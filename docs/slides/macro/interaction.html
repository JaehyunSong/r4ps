<!DOCTYPE html>
<html lang="en"><head>
<link href="../../Figs/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="author" content="宋(そん)&nbsp;&nbsp;財泫(じぇひょん)">
  <title>R for Political Science – マクロ政治データ分析実習</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-781a7d17fae8c5f07fafdeb994283b31.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9TLN2VMPQD"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-9TLN2VMPQD', { 'anonymize_ip': true});
  </script>
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">マクロ政治データ分析実習</h1>
  <p class="subtitle">11/ 交互作用</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<ruby>宋<rp>(</rp><rt>そん</rt><rp>)</rp></ruby>&nbsp;&nbsp;<ruby>財泫<rp>(</rp><rt>じぇひょん</rt><rp>)</rp></ruby> 
</div>
        <p class="quarto-title-affiliation">
            関西大学総合情報学部
          </p>
    </div>
</div>

</section>
<section id="授業開始前に" class="slide level2">
<h2>授業開始前に</h2>
<p>すぐに実習できるように準備しておきましょう。</p>
<ol type="1">
<li>JDCat分析ツールを起動しておいてください。</li>
<li>本日授業用のプロジェクトを作成するか、既存のプロジェクトを開いてください。</li>
<li>LMSから実習用データをダウンロードしておいてください。</li>
<li>ダウンロードしてデータをプロジェクト・フォルダーにアップロードしてください。
<ul>
<li>プロジェクト・フォルダー内に<code>Data</code>フォルダーを作成し、そこにアップロードしましょう。</li>
</ul></li>
<li>実習用コードを入力するスクリプト、またはQuartoファイルを開き、以下のコードを入力&amp;実行してください（コピペ可）。</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a></a><span class="fu">library</span>(summarytools)</span>
<span id="cb1-3"><a></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb1-4"><a></a></span>
<span id="cb1-5"><a></a>jes_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/JES6_W1_2.csv"</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>トラブルが生じた場合、速やかにTAを呼んでください。</li>
<li>時間に余裕があれば、スライド内のコードも書いておきましょう。</li>
</ul>
</section>
<section>
<section id="交互作用とは" class="title-slide slide level1 center">
<h1>交互作用とは</h1>

</section>
<section id="交互作用とは-1" class="slide level2">
<h2>交互作用とは</h2>
<p>主な説明変数（<span class="math inline">\(X\)</span>）と応答変数（<span class="math inline">\(Y\)</span>）の関係において、<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響がその他の変数（<span class="math inline">\(Z\)</span>）の影響を受ける場合</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Figs/12/12.001.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
<ul>
<li><span class="math inline">\(Z\)</span>は<strong>調整変数</strong> (moderation variable; moderator)と呼ばれる。
<ul>
<li>調整変数はダミー変数でも、連続変数でも可能</li>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響は<span class="math inline">\(Z\)</span>によって変わる。</li>
</ul></li>
<li>例）<span class="math inline">\(Z=1\)</span>の場合、<span class="math inline">\(X\)</span>が1上がると<span class="math inline">\(Y\)</span>は2上がるが、<span class="math inline">\(Z=2\)</span>の場合、<span class="math inline">\(X\)</span>が1上がると<span class="math inline">\(Y\)</span>は5上がる。
<ul>
<li><span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(Z\)</span>の値によって<span class="math inline">\(X \rightarrow Y\)</span>の効果（傾き）が変わる。</li>
</ul></li>
</ul>
</section>
<section id="回帰分析における交互作用" class="slide level2">
<h2>回帰分析における交互作用</h2>
<p>説明変数、調整変数、交差項を投入した回帰モデル</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="Figs/12/12.002.png"></p>
</div><div class="column" style="width:50%;">
<p><span class="math display">\[
\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 X \cdot Z
\]</span></p>
<ul>
<li><strong>交差項</strong> (interaction term)
<ul>
<li>説明変数に調整変数をかけた変数 ( <span class="math inline">\(X \cdot Z\)</span> )</li>
</ul></li>
<li>変数<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える効果は<span class="math inline">\(\beta_1\)</span>? <span class="math inline">\(\leftarrow\)</span> 間違い
<ul>
<li>回帰式において<span class="math inline">\(X\)</span>は<span class="math inline">\(\beta_3\)</span>にも登場する。</li>
<li>式を変形すると…</li>
</ul></li>
</ul>
<p><span class="math display">\[
\hat{Y} = \alpha + (\beta_1 + \beta_3 Z) X + \beta_2 Z
\]</span></p>
<ul>
<li>変数<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える効果は <span class="math inline">\(\beta_1 + \beta_3 Z\)</span>
<ul>
<li><span class="math inline">\(\Rightarrow\)</span> 変数<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響は<span class="math inline">\(Z\)</span>の値に依存する。</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="調整変数がダミー変数の場合" class="slide level2">
<h2>調整変数がダミー変数の場合</h2>
<p>調整変数<span class="math inline">\(Z\)</span>が0、または1の値のみをとるダミー変数の場合（<span class="math inline">\(Z \in \{0, 1\}\)</span>）</p>
<p><span class="math display">\[
\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 X \cdot Z
\]</span></p>
<ul>
<li>調整変数（<span class="math inline">\(Z\)</span>）が0か1かによって、<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響が変化する。</li>
<li><span class="math inline">\(Z = 0\)</span>の場合：<span class="math inline">\(\hat{Y} = \alpha + \beta_1 X + \beta_2 Z\)</span>
<ul>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span> に与える影響は<span class="math inline">\(\beta_1\)</span></li>
</ul></li>
<li><span class="math inline">\(Z = 1\)</span>の場合：<span class="math inline">\(\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 X = \alpha + (\beta_1 + \beta_3) X + \beta_2 Z\)</span>
<ul>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響は<span class="math inline">\(\beta_1 + \beta_3\)</span></li>
</ul></li>
</ul>
</section>
<section id="調整変数がダミー変数の場合-1" class="slide level2">
<h2>調整変数がダミー変数の場合</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-4-1.png" class="quarto-figure quarto-figure-center" width="1200"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>以下のモデルの場合…</p>
<p><span class="math display">\[
\begin{align}
\hat{Y} &amp; = 3 + 2 X + 1 Z + 3 X \cdot Z \\
&amp; = 3 + (2 + 3Z) X + 1 Z
\end{align}
\]</span></p>
<ul>
<li><span class="math inline">\(X\)</span>の係数は<span class="math inline">\(2 + 3Z\)</span></li>
<li><span class="math inline">\(Z = 0\)</span>なら… (赤)
<ul>
<li><span class="math inline">\(X\)</span>が1上がると、<span class="math inline">\(Y\)</span>は2上がる。</li>
<li><span class="math inline">\(\hat{Y} = 3 + 2X + 1Z\)</span>であるため</li>
</ul></li>
<li><span class="math inline">\(Z = 1\)</span>なら… (青)
<ul>
<li><span class="math inline">\(X\)</span>が1上がると、<span class="math inline">\(Y\)</span>は5上がる。</li>
<li><span class="math inline">\(\hat{Y} = 3 + 5X + 1Z\)</span>であるため</li>
</ul></li>
<li><span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(Z\)</span>の値に応じて<span class="math inline">\(X\)</span>の傾きが変化する。</li>
</ul>
</div></div>
</section>
<section id="調整変数が連続変数の場合" class="slide level2">
<h2>調整変数が連続変数の場合</h2>
<p>調整変数<span class="math inline">\(Z\)</span>が無数の値をとる連続変数の場合</p>
<p><span class="math display">\[
\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 X \cdot Z
\]</span></p>
<ul>
<li>調整変数（<span class="math inline">\(Z\)</span>）の値によって、<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響が変化する。</li>
<li><span class="math inline">\(Z\)</span>が1の場合：<span class="math inline">\(\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 X \cdot 1 = \alpha + (\beta_1 + \beta_3) X + \beta_2 Z\)</span>
<ul>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響は<span class="math inline">\(\beta_1 + 1\beta_3\)</span></li>
</ul></li>
<li><span class="math inline">\(Z\)</span>が2.5の場合：<span class="math inline">\(\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 2.5 \cdot X = \alpha + (\beta_1 + 2.5\beta_3) X + \beta_2 Z\)</span>
<ul>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響は<span class="math inline">\(\beta_1 + 2.5\beta_3\)</span></li>
</ul></li>
<li><span class="math inline">\(Z\)</span>が6の場合：<span class="math inline">\(\hat{Y} = \alpha + \beta_1 X + \beta_2 Z + \beta_3 6 \cdot X = \alpha + (\beta_1 + 6\beta_3) X + \beta_2 Z\)</span>
<ul>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響は<span class="math inline">\(\beta_1 + 6\beta_3\)</span></li>
</ul></li>
<li>無数のケースがあり得る。</li>
</ul>
</section>
<section id="調整変数が連続変数の場合-1" class="slide level2">
<h2>調整変数が連続変数の場合</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-5-1.png" class="quarto-figure quarto-figure-center" width="1200"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>以下のモデルの場合…</p>
<p><span class="math display">\[
\begin{align}
\hat{Y} &amp; = 2 + 3 X + 2 Z - 1 X \cdot Z \\
&amp; = 2 + (3 - 1Z) X + 2 Z
\end{align}
\]</span></p>
<ul>
<li><span class="math inline">\(X\)</span>の係数は<span class="math inline">\(3 - Z\)</span></li>
<li><span class="math inline">\(Z = -1\)</span>なら<span class="math inline">\(X\)</span>の係数は<span class="math inline">\(3 - (-1) = 4\)</span>（赤）
<ul>
<li><span class="math inline">\(X\)</span>が1上がると、<span class="math inline">\(Y\)</span>は4上がる。</li>
<li><span class="math inline">\(\hat{Y} = 2 + 4X + 2Z\)</span>であるため</li>
</ul></li>
<li><span class="math inline">\(Z = 2\)</span>なら<span class="math inline">\(X\)</span>の係数は<span class="math inline">\(3 - 2 = 1\)</span>（緑）
<ul>
<li><span class="math inline">\(X\)</span>が1上がると、<span class="math inline">\(Y\)</span>は1上がる。</li>
<li><span class="math inline">\(\hat{Y} = 2 + 1X + 2Z\)</span>であるため</li>
</ul></li>
<li><span class="math inline">\(Z = 3.5\)</span>なら<span class="math inline">\(X\)</span>の係数は<span class="math inline">\(3 - 3.5 = -0.5\)</span>（青）
<ul>
<li><span class="math inline">\(X\)</span>が1上がると、<span class="math inline">\(Y\)</span>は0.5下がる。</li>
<li><span class="math inline">\(\hat{Y} = 2 - 0.5 X + 2Z\)</span>であるため</li>
</ul></li>
</ul>
</div></div>
</section></section>
<section>
<section id="交差項を入れた回帰分析" class="title-slide slide level1 center">
<h1>交差項を入れた回帰分析</h1>

</section>
<section id="実習用データ" class="slide level2">
<h2>実習用データ</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a></a>jes_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/JES6_W1_2.csv"</span>)</span>
<span id="cb2-3"><a></a></span>
<span id="cb2-4"><a></a>jes_df</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,000 × 6
   TempKyosan Female   Age Satisfaction Interest Ideology
        &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1         20      1    69            4        4        9
 2         20      1    47            1        1        7
 3          0      1    37            3        3       11
 4          0      0    51            4        3       11
 5         20      0    38            2        3        7
 6          0      0    71            5        4       11
 7         10      0    47            3        3        9
 8          0      0    71            4        4       11
 9         25      0    75            3        4        9
10         40      1    66            2        3        6
# ℹ 2,990 more rows</code></pre>
</div>
</div>
</section>
<section id="実習用データの概要" class="slide level2">
<h2>実習用データの概要</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">変数</th>
<th style="text-align: left;">説明</th>
<th style="text-align: left;">備考</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>TempKyosan</code></td>
<td style="text-align: left;">日本共産党に対する感情温度</td>
<td style="text-align: left;">高いほど好感</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Female</code></td>
<td style="text-align: left;">女性ダミー</td>
<td style="text-align: left;">0: 男性 / 1: 女性</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Age</code></td>
<td style="text-align: left;">回答者の年齢</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Satisfaction</code></td>
<td style="text-align: left;">政治満足度</td>
<td style="text-align: left;">高いほど満足</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Interest</code></td>
<td style="text-align: left;">回答者の政治関心</td>
<td style="text-align: left;">高いほど関心あり</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Ideology</code></td>
<td style="text-align: left;">回答者のイデオロギー</td>
<td style="text-align: left;">高いほど保守的</td>
</tr>
</tbody>
</table>
</section>
<section id="記述統計量" class="slide level2">
<h2>記述統計量</h2>
<p>今回のデータはすべて連続変数扱いとなるため、前処理は不要</p>
<ul>
<li>名目変数もダミー変数になると連続変数と同じ扱いでOK</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>jes_df <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a></a>  <span class="fu">descr</span>(<span class="at">stats =</span> <span class="fu">c</span>(<span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span>, <span class="st">"n.valid"</span>),</span>
<span id="cb4-3"><a></a>        <span class="at">transpose =</span> <span class="cn">TRUE</span>, <span class="at">order =</span> <span class="st">"p"</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Descriptive Statistics  
jes_df  
N: 3000  

                      Mean   Std.Dev     Min      Max   N.Valid
------------------ ------- --------- ------- -------- ---------
        TempKyosan   26.88     24.95    0.00   100.00   3000.00
            Female    0.50      0.50    0.00     1.00   3000.00
               Age   47.34     15.63   18.00    75.00   3000.00
      Satisfaction    2.45      1.08    1.00     5.00   3000.00
          Interest    2.74      0.83    1.00     4.00   3000.00
          Ideology    6.34      2.10    1.00    11.00   3000.00</code></pre>
</div>
</div>
</section>
<section id="問題設定" class="slide level2">
<h2>問題設定</h2>
<blockquote>
<p>　政治満足度が共産党に対する感情温度に与える影響を調べたい。ただし、この影響は一定ではなく、性別や年齢によって異なるかも知れない。政治満足度が共産党に対する感情温度に与える影響の不均一性を調べるためにはどうすれば良いだろうか。仮説検定に使用する有意水準は5%とする（<span class="math inline">\(\alpha = 0.05\)</span>）。</p>
</blockquote>
<p><strong>モデル1</strong></p>
<ul>
<li>応答変数：共産党に対する感情温度（<code>TempKoysan</code>）</li>
<li>主な説明変数：政治満足度（<code>Satisfaction</code>）</li>
<li>調整変数：<strong>女性ダミー</strong>（<code>Female</code>）<span class="math inline">\(\leftarrow\)</span> ダミー変数（二値変数）</li>
<li>統制変数：政治関心（<code>Interest</code>）、イデオロギー（<code>Ideology</code>）、年齢（<code>Age</code>）</li>
</ul>
<p><strong>モデル2</strong></p>
<ul>
<li>応答変数：共産党に対する感情温度（<code>TempKoysan</code>）</li>
<li>主な説明変数：政治満足度（<code>Satisfaction</code>）</li>
<li>調整変数：<strong>年齢</strong>（<code>Age</code>）<span class="math inline">\(\leftarrow\)</span> 連続変数</li>
<li>統制変数：政治関心（<code>Interest</code>）、イデオロギー（<code>Ideology</code>）、女性ダミー（<code>Female</code>）</li>
</ul>
</section>
<section id="調整変数がダミー変数の場合モデル1" class="slide level2">
<h2>調整変数がダミー変数の場合（モデル1）</h2>
<p>政治満足度（= <strong>説明変数</strong>）が共産党に対する感情温度（= <strong>応答変数</strong>）に与える影響は性別（= <strong>調整変数</strong>）によって変わる。</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Figs/12/12.003.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</section>
<section id="調整変数がダミー変数の場合の回帰式モデル1" class="slide level2">
<h2>調整変数がダミー変数の場合の回帰式（モデル1）</h2>
<p><span class="math display">\[
\widehat{\mbox{TempKyosan}} = \alpha + \beta_1 \mbox{Satisfaction} + \beta_2 \mbox{Female} + \beta_3 \mbox{Interest} + \beta_4 \mbox{Ideology} + \beta_5 \mbox{Age} + \beta_6 (\mbox{Satisfaction} \cdot \mbox{Female})
\]</span></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Figs/12/12.004.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</section>
<section id="調整変数が連続変数の場合モデル2" class="slide level2">
<h2>調整変数が連続変数の場合（モデル2）</h2>
<p>政治満足度（= <strong>説明変数</strong>）が共産党に対する感情温度（= <strong>応答変数</strong>）に与える影響は年齢（= <strong>調整変数</strong>）によって変わる。</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Figs/12/12.005.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</section>
<section id="調整変数が連続変数の場合の回帰式モデル2" class="slide level2">
<h2>調整変数が連続変数の場合の回帰式（モデル2）</h2>
<p><span class="math display">\[
\widehat{\mbox{TempKyosan}} = \alpha + \beta_1 \mbox{Satisfaction} + \beta_2 \mbox{Age} + \beta_3 \mbox{Interest} + \beta_4 \mbox{Ideology} + \beta_5 \mbox{Female} + \beta_6 (\mbox{Satisfaction} \cdot \mbox{Age})
\]</span></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Figs/12/12.006.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</section>
<section id="交差項を入れた回帰分析の推定方法" class="slide level2">
<h2>交差項を入れた回帰分析の推定方法</h2>
<p><code>lm()</code>内の回帰式（formula）に2つの変数を<code>*</code>でつなぐだけ</p>
<ul>
<li><code>A * B</code>は説明変数として<code>A</code>、<code>B</code>、<code>A</code><span class="math inline">\(\times\)</span><code>B</code>を同時に投入することを意味する。</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>fit1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(TempKyosan <span class="sc">~</span> Satisfaction <span class="sc">*</span> Female <span class="sc">+</span> Interest <span class="sc">+</span> Ideology <span class="sc">+</span> Age, <span class="at">data =</span> jes_df)</span>
<span id="cb6-2"><a></a>fit2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(TempKyosan <span class="sc">~</span> Satisfaction <span class="sc">*</span> Age <span class="sc">+</span> Interest <span class="sc">+</span> Ideology <span class="sc">+</span> Female <span class="sc">+</span> Age, <span class="at">data =</span> jes_df)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">summary</span>(fit1)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="gkihyucnjw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gkihyucnjw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gkihyucnjw thead, #gkihyucnjw tbody, #gkihyucnjw tfoot, #gkihyucnjw tr, #gkihyucnjw td, #gkihyucnjw th {
  border-style: none;
}

#gkihyucnjw p {
  margin: 0;
  padding: 0;
}

#gkihyucnjw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 24px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gkihyucnjw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gkihyucnjw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gkihyucnjw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gkihyucnjw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gkihyucnjw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gkihyucnjw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gkihyucnjw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gkihyucnjw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gkihyucnjw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gkihyucnjw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gkihyucnjw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gkihyucnjw .gt_spanner_row {
  border-bottom-style: hidden;
}

#gkihyucnjw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gkihyucnjw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gkihyucnjw .gt_from_md > :first-child {
  margin-top: 0;
}

#gkihyucnjw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gkihyucnjw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gkihyucnjw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gkihyucnjw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gkihyucnjw .gt_row_group_first td {
  border-top-width: 2px;
}

#gkihyucnjw .gt_row_group_first th {
  border-top-width: 2px;
}

#gkihyucnjw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkihyucnjw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gkihyucnjw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gkihyucnjw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gkihyucnjw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkihyucnjw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gkihyucnjw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gkihyucnjw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gkihyucnjw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gkihyucnjw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gkihyucnjw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkihyucnjw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gkihyucnjw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkihyucnjw .gt_left {
  text-align: left;
}

#gkihyucnjw .gt_center {
  text-align: center;
}

#gkihyucnjw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gkihyucnjw .gt_font_normal {
  font-weight: normal;
}

#gkihyucnjw .gt_font_bold {
  font-weight: bold;
}

#gkihyucnjw .gt_font_italic {
  font-style: italic;
}

#gkihyucnjw .gt_super {
  font-size: 65%;
}

#gkihyucnjw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gkihyucnjw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gkihyucnjw .gt_indent_1 {
  text-indent: 5px;
}

#gkihyucnjw .gt_indent_2 {
  text-indent: 10px;
}

#gkihyucnjw .gt_indent_3 {
  text-indent: 15px;
}

#gkihyucnjw .gt_indent_4 {
  text-indent: 20px;
}

#gkihyucnjw .gt_indent_5 {
  text-indent: 25px;
}

#gkihyucnjw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#gkihyucnjw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">係数</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">標準誤差</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">t値</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p値</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="term">切片</td>
<td class="gt_row gt_right" headers="estimate">49.275</td>
<td class="gt_row gt_right" headers="std.error">2.587</td>
<td class="gt_row gt_right" headers="statistic">19.047</td>
<td class="gt_row gt_right" headers="p.value">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">政治満足度</td>
<td class="gt_row gt_right" headers="estimate" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">−4.732</td>
<td class="gt_row gt_right" headers="std.error" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">0.561</td>
<td class="gt_row gt_right" headers="statistic" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">−8.429</td>
<td class="gt_row gt_right" headers="p.value" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">&lt; 0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">女性</td>
<td class="gt_row gt_right" headers="estimate">2.752</td>
<td class="gt_row gt_right" headers="std.error">2.186</td>
<td class="gt_row gt_right" headers="statistic">1.259</td>
<td class="gt_row gt_right" headers="p.value">0.208</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">政治関心</td>
<td class="gt_row gt_right" headers="estimate">0.217</td>
<td class="gt_row gt_right" headers="std.error">0.571</td>
<td class="gt_row gt_right" headers="statistic">0.381</td>
<td class="gt_row gt_right" headers="p.value">0.703</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">イデオロギー</td>
<td class="gt_row gt_right" headers="estimate">−1.887</td>
<td class="gt_row gt_right" headers="std.error">0.214</td>
<td class="gt_row gt_right" headers="statistic">−8.815</td>
<td class="gt_row gt_right" headers="p.value">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">年齢</td>
<td class="gt_row gt_right" headers="estimate">−0.040</td>
<td class="gt_row gt_right" headers="std.error">0.030</td>
<td class="gt_row gt_right" headers="statistic">−1.347</td>
<td class="gt_row gt_right" headers="p.value">0.178</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">政治満足度 * 女性</td>
<td class="gt_row gt_right" headers="estimate" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">0.902</td>
<td class="gt_row gt_right" headers="std.error" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">0.817</td>
<td class="gt_row gt_right" headers="statistic" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">1.104</td>
<td class="gt_row gt_right" headers="p.value" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">0.270</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="fu">summary</span>(fit2)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="giyeuvtoim" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#giyeuvtoim table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#giyeuvtoim thead, #giyeuvtoim tbody, #giyeuvtoim tfoot, #giyeuvtoim tr, #giyeuvtoim td, #giyeuvtoim th {
  border-style: none;
}

#giyeuvtoim p {
  margin: 0;
  padding: 0;
}

#giyeuvtoim .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 24px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#giyeuvtoim .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#giyeuvtoim .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#giyeuvtoim .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#giyeuvtoim .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#giyeuvtoim .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#giyeuvtoim .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#giyeuvtoim .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#giyeuvtoim .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#giyeuvtoim .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#giyeuvtoim .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#giyeuvtoim .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#giyeuvtoim .gt_spanner_row {
  border-bottom-style: hidden;
}

#giyeuvtoim .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#giyeuvtoim .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#giyeuvtoim .gt_from_md > :first-child {
  margin-top: 0;
}

#giyeuvtoim .gt_from_md > :last-child {
  margin-bottom: 0;
}

#giyeuvtoim .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#giyeuvtoim .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#giyeuvtoim .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#giyeuvtoim .gt_row_group_first td {
  border-top-width: 2px;
}

#giyeuvtoim .gt_row_group_first th {
  border-top-width: 2px;
}

#giyeuvtoim .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#giyeuvtoim .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#giyeuvtoim .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#giyeuvtoim .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#giyeuvtoim .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#giyeuvtoim .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#giyeuvtoim .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#giyeuvtoim .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#giyeuvtoim .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#giyeuvtoim .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#giyeuvtoim .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#giyeuvtoim .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#giyeuvtoim .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#giyeuvtoim .gt_left {
  text-align: left;
}

#giyeuvtoim .gt_center {
  text-align: center;
}

#giyeuvtoim .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#giyeuvtoim .gt_font_normal {
  font-weight: normal;
}

#giyeuvtoim .gt_font_bold {
  font-weight: bold;
}

#giyeuvtoim .gt_font_italic {
  font-style: italic;
}

#giyeuvtoim .gt_super {
  font-size: 65%;
}

#giyeuvtoim .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#giyeuvtoim .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#giyeuvtoim .gt_indent_1 {
  text-indent: 5px;
}

#giyeuvtoim .gt_indent_2 {
  text-indent: 10px;
}

#giyeuvtoim .gt_indent_3 {
  text-indent: 15px;
}

#giyeuvtoim .gt_indent_4 {
  text-indent: 20px;
}

#giyeuvtoim .gt_indent_5 {
  text-indent: 25px;
}

#giyeuvtoim .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#giyeuvtoim div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">係数</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">標準誤差</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">t値</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p値</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="term">切片</td>
<td class="gt_row gt_right" headers="estimate">28.250</td>
<td class="gt_row gt_right" headers="std.error">4.164</td>
<td class="gt_row gt_right" headers="statistic">6.784</td>
<td class="gt_row gt_right" headers="p.value">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">政治満足度</td>
<td class="gt_row gt_right" headers="estimate" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">3.308</td>
<td class="gt_row gt_right" headers="std.error" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">1.354</td>
<td class="gt_row gt_right" headers="statistic" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">2.442</td>
<td class="gt_row gt_right" headers="p.value" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">0.015</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">年齢</td>
<td class="gt_row gt_right" headers="estimate">0.357</td>
<td class="gt_row gt_right" headers="std.error">0.073</td>
<td class="gt_row gt_right" headers="statistic">4.877</td>
<td class="gt_row gt_right" headers="p.value">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">政治関心</td>
<td class="gt_row gt_right" headers="estimate">−0.118</td>
<td class="gt_row gt_right" headers="std.error">0.570</td>
<td class="gt_row gt_right" headers="statistic">−0.207</td>
<td class="gt_row gt_right" headers="p.value">0.836</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">イデオロギー</td>
<td class="gt_row gt_right" headers="estimate">−1.690</td>
<td class="gt_row gt_right" headers="std.error">0.215</td>
<td class="gt_row gt_right" headers="statistic">−7.845</td>
<td class="gt_row gt_right" headers="p.value">&lt; 0.001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">女性</td>
<td class="gt_row gt_right" headers="estimate">5.061</td>
<td class="gt_row gt_right" headers="std.error">0.888</td>
<td class="gt_row gt_right" headers="statistic">5.698</td>
<td class="gt_row gt_right" headers="p.value">&lt; 0.001</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">政治満足度 * 年齢</td>
<td class="gt_row gt_right" headers="estimate" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">−0.157</td>
<td class="gt_row gt_right" headers="std.error" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">0.026</td>
<td class="gt_row gt_right" headers="statistic" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">−5.920</td>
<td class="gt_row gt_right" headers="p.value" style="background-color: rgba(128,188,216,0.8); color: #000000; font-weight: bold">&lt; 0.001</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div></div>
</section>
<section id="調整変数がダミー変数の場合fit1" class="slide level2">
<h2>調整変数がダミー変数の場合（<code>fit1</code>）</h2>
<ul>
<li>推定結果
<ul>
<li>共産に対する感情温度の予測値 = 49.28 - 4.73 <span class="math inline">\(\times\)</span> <strong>政治満足度</strong> + 2.75 <span class="math inline">\(\times\)</span> 女性ダミー + 0.22 <span class="math inline">\(\times\)</span> 政治関心 - 1.89 <span class="math inline">\(\times\)</span> イデオロギー - 0.04 <span class="math inline">\(\times\)</span> 年齢 + 0.90 <span class="math inline">\(\times\)</span> <strong>政治満足度</strong> <span class="math inline">\(\times\)</span> 女性ダミー</li>
<li>共産に対する感情温度の予測値 = 49.28 - (4.73 - 0.90 <span class="math inline">\(\times\)</span> 女性ダミー) <span class="math inline">\(\times\)</span> <strong>政治満足度</strong> + 2.75 <span class="math inline">\(\times\)</span> 女性ダミー + 0.22 <span class="math inline">\(\times\)</span> 政治関心 - 1.89 <span class="math inline">\(\times\)</span> イデオロギー - 0.04 <span class="math inline">\(\times\)</span> 年齢</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>政治満足度が共産感情温度に与える影響：-(4.73 - 0.90 <span class="math inline">\(\times\)</span> 女性ダミーの値)
<ul>
<li>男性の場合（女性ダミーの値 = 0）：-(4.73 - 0.90 <span class="math inline">\(\times\)</span> 0) = -4.73
<ul>
<li>男性の場合、政治満足度が1単位上がると、共産に対する感情温度は約4.73度下がる。</li>
</ul></li>
<li>女性の場合（女性ダミーの値 = 1）：-(4.73 - 0.90 <span class="math inline">\(\times\)</span> 1) = -3.83
<ul>
<li>女性の場合、政治満足度が1単位上がると、共産に対する感情温度は約3.83度下がる。</li>
</ul></li>
<li><span class="math inline">\(\rightarrow\)</span> 政治満足度が共産に対する感情温度に与える影響は性別によって変わる。</li>
</ul></li>
</ul>
</section>
<section id="調整変数がダミー変数の場合fit1-1" class="slide level2">
<h2>調整変数がダミー変数の場合（<code>fit1</code>）</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">図</a></li><li><a href="#tabset-1-2">コード</a></li><li><a href="#tabset-1-3">リボン+折れ線グラフ</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-13-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>fit1_pred <span class="ot">&lt;-</span> <span class="fu">predictions</span>(fit1, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Satisfaction =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, </span>
<span id="cb9-2"><a></a>                                                  <span class="at">Female       =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>))</span>
<span id="cb9-3"><a></a>fit1_pred <span class="sc">|&gt;</span> </span>
<span id="cb9-4"><a></a>  <span class="fu">mutate</span>(<span class="at">Female =</span> <span class="fu">if_else</span>(Female <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"女性"</span>, <span class="st">"男性"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb9-6"><a></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Satisfaction, <span class="at">y =</span> estimate,</span>
<span id="cb9-7"><a></a>                      <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">color =</span> Female),</span>
<span id="cb9-8"><a></a>                  <span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb9-9"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"政治満足度"</span>, <span class="at">y =</span> <span class="st">"共産感情温度の予測値と95%信頼区間 (度)"</span>,</span>
<span id="cb9-10"><a></a>       <span class="at">fill =</span> <span class="st">""</span>, <span class="at">color =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb9-11"><a></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb9-12"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-15-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="調整変数が連続変数の場合fit2" class="slide level2">
<h2>調整変数が連続変数の場合（<code>fit2</code>）</h2>
<ul>
<li>推定結果
<ul>
<li>共産に対する感情温度の予測値 = 28.25 + 3.31 <span class="math inline">\(\times\)</span> <strong>政治満足度</strong> + 0.37 <span class="math inline">\(\times\)</span> 年齢 - 0.12 <span class="math inline">\(\times\)</span> 政治関心 - 1.69 <span class="math inline">\(\times\)</span> イデオロギー + 5.06 <span class="math inline">\(\times\)</span> 女性ダミー - 0.16 <span class="math inline">\(\times\)</span> 政治満足度 <span class="math inline">\(\times\)</span> 年齢</li>
<li>共産に対する感情温度の予測値 = 28.25 + (3.31 - 0.16 <span class="math inline">\(\times\)</span> 年齢) <span class="math inline">\(\times\)</span> <strong>政治満足度</strong> + 0.37 <span class="math inline">\(\times\)</span> 年齢 - 0.12 <span class="math inline">\(\times\)</span> 政治関心 - 1.69 <span class="math inline">\(\times\)</span> イデオロギー + 5.06 <span class="math inline">\(\times\)</span> 女性ダミー</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>政治満足度が共産感情温度に与える影響 = (3.31 - 0.16 <span class="math inline">\(\times\)</span> 年齢の値)
<ul>
<li>20歳の場合（<code>Age</code>の値 = 20）：3.31 - 0.16 <span class="math inline">\(\times\)</span> 20 = 0.11
<ul>
<li>20歳の場合、政治満足度が1単位上がると、共産に対する感情温度は約0.11度上がる。</li>
</ul></li>
<li>40歳の場合（<code>Age</code>の値 = 40）：3.31 - 0.16 <span class="math inline">\(\times\)</span> 40 = -3.09
<ul>
<li>40歳の場合、政治満足度が1単位上がると、共産に対する感情温度は約3.09度下がる。</li>
</ul></li>
<li>60歳の場合（<code>Age</code>の値 = 60）：3.31 - 0.16 <span class="math inline">\(\times\)</span> 60 = -6.29
<ul>
<li>60歳の場合、政治満足度が1単位上がると、共産に対する感情温度は約6.29度下がる。</li>
</ul></li>
<li><span class="math inline">\(\rightarrow\)</span> 政治満足度が共産に対する感情温度に与える影響は年齢によって変わる。</li>
</ul></li>
</ul>
</section>
<section id="調整変数が連続変数の場合-fit2" class="slide level2">
<h2>調整変数が連続変数の場合 (<code>fit2</code>)</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">図</a></li><li><a href="#tabset-2-2">コード</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-16-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>fit2_pred <span class="ot">&lt;-</span> <span class="fu">predictions</span>(fit2, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Satisfaction =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, </span>
<span id="cb10-2"><a></a>                                                  <span class="at">Age          =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>)))</span>
<span id="cb10-3"><a></a>fit2_pred <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a></a>  <span class="fu">mutate</span>(<span class="at">Age =</span> <span class="fu">factor</span>(Age, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>),</span>
<span id="cb10-5"><a></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"20歳"</span>, <span class="st">"40歳"</span>, <span class="st">"60歳"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb10-6"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Satisfaction)) <span class="sc">+</span></span>
<span id="cb10-7"><a></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high,</span>
<span id="cb10-8"><a></a>                  <span class="at">fill =</span> Age), <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb10-9"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate, <span class="at">color =</span> Age), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-10"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"政治満足度"</span>, <span class="at">y =</span> <span class="st">"共産感情温度の予測値と95%信頼区間 (度)"</span>,</span>
<span id="cb10-11"><a></a>       <span class="at">fill =</span> <span class="st">""</span>, <span class="at">color =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb10-12"><a></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb10-13"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="交互作用の解釈と限界効果" class="title-slide slide level1 center">
<h1>交互作用の解釈と限界効果</h1>

</section>
<section id="交互作用をどう報告するか" class="slide level2">
<h2>交互作用をどう報告するか</h2>
<p>交互作用: 説明変数が応答変数に与える影響は調整変数の値によって変わる</p>
<ul>
<li><span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響の統計的有意性を検定する際に用いられる検定統計量は「<span class="math inline">\(X\)</span>の係数 / <span class="math inline">\(X\)</span>の標準誤差」であるが、ここでの<span class="math inline">\(X\)</span>の係数と標準誤差は<span class="math inline">\(Z\)</span>の値によって変わる。
<ul>
<li><span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(Z\)</span>の値によって<span class="math inline">\(X\)</span>が<span class="math inline">\(Y\)</span>に与える影響の統計的有意性は変わる。</li>
</ul></li>
<li>調整変数の値ごとに、説明変数が応答変数に与える影響（= <strong>限界効果</strong>; marginal effects）と95%信頼区間を図示する。
<ul>
<li>仮説検定に使用する有意水準（<span class="math inline">\(\alpha\)</span>）が0.1なら90%信頼区間、0.01なら99%信頼区間を使用</li>
</ul></li>
</ul>
</section>
<section id="marginaleffectパッケージを用いた限界効果の計算" class="slide level2">
<h2>{marginaleffect}パッケージを用いた限界効果の計算</h2>
<p>{marginaleffect}パッケージの<code>slopes()</code>関数</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">slopes</span>(回帰オブジェクト名, </span>
<span id="cb11-2"><a></a>       <span class="at">variables =</span> <span class="st">"説明変数名"</span>, </span>
<span id="cb11-3"><a></a>       <span class="at">newdata   =</span> <span class="fu">datagrid</span>(調整変数名 <span class="ot">=</span> 調整変数の値))</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><code>variables</code>には説明変数名を指定する（変数名は必ず<code>"</code>で囲むこと）</li>
<li><code>fit1</code>の場合：調整変数（<code>Female</code>）の値が0と1の場合の限界効果
<ul>
<li><code>datagrid(Female = c(0, 1))</code>、または<code>datagrid(Female = 0:1)</code></li>
</ul></li>
<li><code>fit2</code>の場合：調整変数（<code>Age</code>）の値が18、19、20、…、75の場合の限界効果
<ul>
<li><code>datagrid(Age = 18:75)</code></li>
</ul></li>
<li>限界効果は<code>estimate</code>列、<span class="math inline">\(p\)</span>値は<code>p.value</code>列、95%信頼区間は<code>conf.low</code>（下限）と<code>conf.high</code>（上限）</li>
<li>仮説検定に使用する有意水準（<span class="math inline">\(\alpha\)</span>）が0.1な<code>conf_level = 0.9</code>、0.01なら<code>conf_level = 0.99</code>を追加</li>
</ul>
</section>
<section id="調整変数がダミー変数の場合-fit1" class="slide level2">
<h2>調整変数がダミー変数の場合 (<code>fit1</code>)</h2>
<p>性別と関係なく、政治満足度は共産感情温度に負の影響を与える。</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>fit1_ame <span class="ot">&lt;-</span> <span class="fu">slopes</span>(fit1, <span class="at">variables =</span> <span class="st">"Satisfaction"</span>, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Female =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)))</span>
<span id="cb12-2"><a></a></span>
<span id="cb12-3"><a></a>fit1_ame</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Female Estimate Std. Error     z Pr(&gt;|z|)    S 2.5 % 97.5 %
      0    -4.73      0.561 -8.43   &lt;0.001 54.7 -5.83  -3.63
      1    -3.83      0.611 -6.27   &lt;0.001 31.3 -5.03  -2.63

Term: Satisfaction
Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
<ul>
<li><code>Female</code>の値が0の場合
<ul>
<li><code>Satisfaction</code>が1単位上がると<code>TempKyosan</code>は約-4.73度下がり、<span class="math inline">\(\alpha = 0.05\)</span>の水準で統計的に有意である。</li>
</ul></li>
<li><code>Female</code>の値が1の場合
<ul>
<li><code>Satisfaction</code>が1単位上がると<code>TempKyosan</code>は約-3.83度下がり、<span class="math inline">\(\alpha = 0.05\)</span>の水準で統計的に有意である。</li>
</ul></li>
</ul>
</section>
<section id="調整変数が連続変数の場合fit2-1" class="slide level2">
<h2>調整変数が連続変数の場合（<code>fit2</code>）</h2>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>fit2_ame <span class="ot">&lt;-</span> <span class="fu">slopes</span>(fit2, <span class="at">variables =</span> <span class="st">"Satisfaction"</span>, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Age =</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">75</span>))</span>
<span id="cb14-2"><a></a>fit2_ame</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Age Estimate Std. Error        z Pr(&gt;|z|)   S  2.5 % 97.5 %
  18   0.4860      0.912   0.5327    0.594 0.8  -1.30   2.27
  19   0.3292      0.890   0.3700    0.711 0.5  -1.41   2.07
  20   0.1725      0.867   0.1990    0.842 0.2  -1.53   1.87
  21   0.0157      0.842   0.0187    0.985 0.0  -1.63   1.67
  22  -0.1411      0.820  -0.1721    0.863 0.2  -1.75   1.47
--- 48 rows omitted. See ?print.marginaleffects --- 
  71  -7.8227      0.724 -10.8088   &lt;0.001 88.0  -9.24  -6.40
  72  -7.9795      0.745 -10.7044   &lt;0.001 86.4  -9.44  -6.52
  73  -8.1362      0.768 -10.5922   &lt;0.001 84.7  -9.64  -6.63
  74  -8.2930      0.790 -10.4909   &lt;0.001 83.1  -9.84  -6.74
  75  -8.4498      0.812 -10.4048   &lt;0.001 81.8 -10.04  -6.86
Term: Satisfaction
Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
<ul>
<li><code>Age</code>が18の場合、<code>Satisfaction</code>は<code>TempKyosan</code>に影響を与えているとは言えない（<span class="math inline">\(p \geq 0.05\)</span>のため）。</li>
<li><code>Age</code>が19の場合、<code>Satisfaction</code>は<code>TempKyosan</code>に影響を与えているとは言えない（<span class="math inline">\(p \geq 0.05\)</span>のため）。</li>
<li>…（省略）…</li>
<li><code>Age</code>が75の場合、<code>Satisfaction</code>が1単位上がると<code>TempKyosan</code>は約-8.4度下がり、<span class="math inline">\(\alpha = 0.05\)</span>の水準で統計的に有意である。</li>
</ul>
</section>
<section id="省略された行の表示" class="slide level2">
<h2>省略された行の表示</h2>
<p><code>print()</code>内に<code>topn = Inf</code>を追加する。</p>
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">print</span>(fit2_ame, <span class="at">topn =</span> <span class="cn">Inf</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Age Estimate Std. Error        z Pr(&gt;|z|)     S  2.5 % 97.5 %
  18   0.4860      0.912   0.5327  0.59428   0.8  -1.30  2.274
  19   0.3292      0.890   0.3700  0.71138   0.5  -1.41  2.073
  20   0.1725      0.867   0.1990  0.84225   0.2  -1.53  1.871
  21   0.0157      0.842   0.0187  0.98511   0.0  -1.63  1.666
  22  -0.1411      0.820  -0.1721  0.86337   0.2  -1.75  1.465
  23  -0.2978      0.798  -0.3731  0.70908   0.5  -1.86  1.267
  24  -0.4546      0.776  -0.5859  0.55791   0.8  -1.98  1.066
  25  -0.6114      0.752  -0.8130  0.41623   1.3  -2.09  0.863
  26  -0.7681      0.730  -1.0521  0.29277   1.8  -2.20  0.663
  27  -0.9249      0.709  -1.3054  0.19177   2.4  -2.31  0.464
  28  -1.0817      0.689  -1.5699  0.11643   3.1  -2.43  0.269
  29  -1.2384      0.668  -1.8536  0.06379   4.0  -2.55  0.071
  30  -1.3952      0.646  -2.1600  0.03078   5.0  -2.66 -0.129
  31  -1.5520      0.626  -2.4791  0.01317   6.2  -2.78 -0.325
  32  -1.7087      0.608  -2.8114  0.00493   7.7  -2.90 -0.518
  33  -1.8655      0.589  -3.1665  0.00154   9.3  -3.02 -0.711
  34  -2.0223      0.570  -3.5505  &lt; 0.001  11.3  -3.14 -0.906
  35  -2.1790      0.552  -3.9493  &lt; 0.001  13.6  -3.26 -1.098
  36  -2.3358      0.536  -4.3603  &lt; 0.001  16.2  -3.39 -1.286
  37  -2.4926      0.520  -4.7979  &lt; 0.001  19.3  -3.51 -1.474
  38  -2.6493      0.503  -5.2656  &lt; 0.001  22.8  -3.64 -1.663
  39  -2.8061      0.489  -5.7370  &lt; 0.001  26.6  -3.76 -1.847
  40  -2.9629      0.476  -6.2267  &lt; 0.001  31.0  -3.90 -2.030
  41  -3.1196      0.465  -6.7148  &lt; 0.001  35.6  -4.03 -2.209
  42  -3.2764      0.453  -7.2263  &lt; 0.001  40.9  -4.17 -2.388
  43  -3.4332      0.443  -7.7508  &lt; 0.001  46.6  -4.30 -2.565
  44  -3.5900      0.435  -8.2580  &lt; 0.001  52.6  -4.44 -2.738
  45  -3.7467      0.429  -8.7380  &lt; 0.001  58.5  -4.59 -2.906
  46  -3.9035      0.424  -9.2162  &lt; 0.001  64.8  -4.73 -3.073
  47  -4.0603      0.419  -9.6828  &lt; 0.001  71.2  -4.88 -3.238
  48  -4.2170      0.417 -10.1021  &lt; 0.001  77.3  -5.04 -3.399
  49  -4.3738      0.418 -10.4752  &lt; 0.001  82.9  -5.19 -3.555
  50  -4.5306      0.419 -10.8155  &lt; 0.001  88.2  -5.35 -3.710
  51  -4.6873      0.422 -11.1132  &lt; 0.001  92.9  -5.51 -3.861
  52  -4.8441      0.427 -11.3577  &lt; 0.001  96.9  -5.68 -4.008
  53  -5.0009      0.433 -11.5521  &lt; 0.001 100.1  -5.85 -4.152
  54  -5.1576      0.441 -11.7059  &lt; 0.001 102.7  -6.02 -4.294
  55  -5.3144      0.450 -11.8168  &lt; 0.001 104.6  -6.20 -4.433
  56  -5.4712      0.460 -11.8826  &lt; 0.001 105.8  -6.37 -4.569
  57  -5.6279      0.472 -11.9195  &lt; 0.001 106.4  -6.55 -4.703
  58  -5.7847      0.485 -11.9316  &lt; 0.001 106.6  -6.73 -4.834
  59  -5.9415      0.499 -11.9073  &lt; 0.001 106.2  -6.92 -4.963
  60  -6.0982      0.514 -11.8529  &lt; 0.001 105.2  -7.11 -5.090
  61  -6.2550      0.530 -11.7923  &lt; 0.001 104.2  -7.29 -5.215
  62  -6.4118      0.546 -11.7371  &lt; 0.001 103.3  -7.48 -5.341
  63  -6.5685      0.564 -11.6535  &lt; 0.001 101.8  -7.67 -5.464
  64  -6.7253      0.583 -11.5369  &lt; 0.001  99.9  -7.87 -5.583
  65  -6.8821      0.602 -11.4399  &lt; 0.001  98.3  -8.06 -5.703
  66  -7.0388      0.621 -11.3331  &lt; 0.001  96.5  -8.26 -5.822
  67  -7.1956      0.640 -11.2493  &lt; 0.001  95.1  -8.45 -5.942
  68  -7.3524      0.660 -11.1396  &lt; 0.001  93.3  -8.65 -6.059
  69  -7.5092      0.682 -11.0153  &lt; 0.001  91.3  -8.85 -6.173
  70  -7.6659      0.703 -10.9031  &lt; 0.001  89.5  -9.04 -6.288
  71  -7.8227      0.724 -10.8088  &lt; 0.001  88.0  -9.24 -6.404
  72  -7.9795      0.745 -10.7044  &lt; 0.001  86.4  -9.44 -6.518
  73  -8.1362      0.768 -10.5922  &lt; 0.001  84.7  -9.64 -6.631
  74  -8.2930      0.790 -10.4909  &lt; 0.001  83.1  -9.84 -6.744
  75  -8.4498      0.812 -10.4048  &lt; 0.001  81.8 -10.04 -6.858

Term: Satisfaction
Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
<ul>
<li>30歳未満の場合、政治満足度（<code>Satisfaction</code>）は共産感情温度（<code>TempKyosan</code>）に影響を与えるとは言えない。</li>
<li>30歳以上の場合のみ、政治満足度は共産感情温度に負の影響を与える。</li>
</ul>
</section>
<section id="限界効果の可視化と解釈" class="slide level2">
<h2>限界効果の可視化と解釈</h2>
<h4 id="可視化">可視化</h4>
<ul>
<li>調整変数の値が…
<ul>
<li>少数の場合（10個以内）はpoint-rangeプロット（ここでは<code>fit1_ame</code>）</li>
<li>多数の場合（11個以上）はリボン+折れ線グラフを使用（ここでは<code>fit2_ame</code>）</li>
</ul></li>
<li><span class="math inline">\(y = 0\)</span>の水平線を追加すると解釈しやすくなる。
<ul>
<li><code>geom_hline(yintercept = 0)</code>レイヤーを追加</li>
</ul></li>
</ul>
<h4 id="解釈">解釈</h4>
<ul>
<li>解釈の際は具体的な数値（ここだと<code>fit1_ame</code>や<code>fit2_ame</code>）と図両方を見る必要がある。
<ul>
<li>とりわけ、調整変数（<span class="math inline">\(Z\)</span>）が連続変数の場合、「<span class="math inline">\(Z\)</span>がいくらになれば限界効果が統計的に有意になるか」などを判断するために、具体的な数値を見る必要がある。</li>
</ul></li>
<li>95%信頼区間内に0が含まれていれば、説明変数は応答変数に影響を与えるとは言えないと解釈</li>
<li>0が95%信頼区間外にあれば、説明変数は応答変数に影響を与えると解釈可能</li>
</ul>
</section>
<section id="fit1_ameの例" class="slide level2">
<h2><code>fit1_ame</code>の例</h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><code>fit1_ame</code>の中身</a></li><li><a href="#tabset-3-2">コード</a></li><li><a href="#tabset-3-3">図</a></li><li><a href="#tabset-3-4">解釈</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="fu">print</span>(fit1_ame)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Female Estimate Std. Error     z Pr(&gt;|z|)    S 2.5 % 97.5 %
      0    -4.73      0.561 -8.43   &lt;0.001 54.7 -5.83  -3.63
      1    -3.83      0.611 -6.27   &lt;0.001 31.3 -5.03  -2.63

Term: Satisfaction
Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>fit1_ame <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Female, <span class="at">y =</span> estimate, </span>
<span id="cb20-5"><a></a>                      <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high),</span>
<span id="cb20-6"><a></a>                  <span class="at">size =</span> <span class="dv">1</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-7"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>,</span>
<span id="cb20-8"><a></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"男性"</span>, <span class="st">"女性"</span>)) <span class="sc">+</span></span>
<span id="cb20-9"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"性別"</span>, <span class="at">y =</span> <span class="st">"政治満足度の平均限界効果と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb20-10"><a></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-3-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-24-1.png" class="quarto-figure quarto-figure-center" width="700"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-4">
<p><code>fit1_ame</code>の中身と図、両方を見て解釈する。</p>
<ul>
<li>男女関係なく、政治満足度と共産党に対する感情温度の間には統計的に有意な負の関係が見られる。つまり、政治満足度が高い回答者ほど、共産党に対する感情温度は低い傾向がある。たとえば、男性は政治満足度が1単位上がると、共産党に対する感情温度は約4.73度低くなり、女性のそれは約3.83度である。</li>
</ul>
</div>
</div>
</div>
</section>
<section id="fit2_ameの例" class="slide level2">
<h2><code>fit2_ame</code>の例</h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><code>fit2_ame</code>の中身</a></li><li><a href="#tabset-4-2">コード</a></li><li><a href="#tabset-4-3">図</a></li><li><a href="#tabset-4-4">解釈</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">print</span>(fit2_ame, <span class="at">topn =</span> <span class="cn">Inf</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Age Estimate Std. Error        z Pr(&gt;|z|)     S  2.5 % 97.5 %
  18   0.4860      0.912   0.5327  0.59428   0.8  -1.30  2.274
  19   0.3292      0.890   0.3700  0.71138   0.5  -1.41  2.073
  20   0.1725      0.867   0.1990  0.84225   0.2  -1.53  1.871
  21   0.0157      0.842   0.0187  0.98511   0.0  -1.63  1.666
  22  -0.1411      0.820  -0.1721  0.86337   0.2  -1.75  1.465
  23  -0.2978      0.798  -0.3731  0.70908   0.5  -1.86  1.267
  24  -0.4546      0.776  -0.5859  0.55791   0.8  -1.98  1.066
  25  -0.6114      0.752  -0.8130  0.41623   1.3  -2.09  0.863
  26  -0.7681      0.730  -1.0521  0.29277   1.8  -2.20  0.663
  27  -0.9249      0.709  -1.3054  0.19177   2.4  -2.31  0.464
  28  -1.0817      0.689  -1.5699  0.11643   3.1  -2.43  0.269
  29  -1.2384      0.668  -1.8536  0.06379   4.0  -2.55  0.071
  30  -1.3952      0.646  -2.1600  0.03078   5.0  -2.66 -0.129
  31  -1.5520      0.626  -2.4791  0.01317   6.2  -2.78 -0.325
  32  -1.7087      0.608  -2.8114  0.00493   7.7  -2.90 -0.518
  33  -1.8655      0.589  -3.1665  0.00154   9.3  -3.02 -0.711
  34  -2.0223      0.570  -3.5505  &lt; 0.001  11.3  -3.14 -0.906
  35  -2.1790      0.552  -3.9493  &lt; 0.001  13.6  -3.26 -1.098
  36  -2.3358      0.536  -4.3603  &lt; 0.001  16.2  -3.39 -1.286
  37  -2.4926      0.520  -4.7979  &lt; 0.001  19.3  -3.51 -1.474
  38  -2.6493      0.503  -5.2656  &lt; 0.001  22.8  -3.64 -1.663
  39  -2.8061      0.489  -5.7370  &lt; 0.001  26.6  -3.76 -1.847
  40  -2.9629      0.476  -6.2267  &lt; 0.001  31.0  -3.90 -2.030
  41  -3.1196      0.465  -6.7148  &lt; 0.001  35.6  -4.03 -2.209
  42  -3.2764      0.453  -7.2263  &lt; 0.001  40.9  -4.17 -2.388
  43  -3.4332      0.443  -7.7508  &lt; 0.001  46.6  -4.30 -2.565
  44  -3.5900      0.435  -8.2580  &lt; 0.001  52.6  -4.44 -2.738
  45  -3.7467      0.429  -8.7380  &lt; 0.001  58.5  -4.59 -2.906
  46  -3.9035      0.424  -9.2162  &lt; 0.001  64.8  -4.73 -3.073
  47  -4.0603      0.419  -9.6828  &lt; 0.001  71.2  -4.88 -3.238
  48  -4.2170      0.417 -10.1021  &lt; 0.001  77.3  -5.04 -3.399
  49  -4.3738      0.418 -10.4752  &lt; 0.001  82.9  -5.19 -3.555
  50  -4.5306      0.419 -10.8155  &lt; 0.001  88.2  -5.35 -3.710
  51  -4.6873      0.422 -11.1132  &lt; 0.001  92.9  -5.51 -3.861
  52  -4.8441      0.427 -11.3577  &lt; 0.001  96.9  -5.68 -4.008
  53  -5.0009      0.433 -11.5521  &lt; 0.001 100.1  -5.85 -4.152
  54  -5.1576      0.441 -11.7059  &lt; 0.001 102.7  -6.02 -4.294
  55  -5.3144      0.450 -11.8168  &lt; 0.001 104.6  -6.20 -4.433
  56  -5.4712      0.460 -11.8826  &lt; 0.001 105.8  -6.37 -4.569
  57  -5.6279      0.472 -11.9195  &lt; 0.001 106.4  -6.55 -4.703
  58  -5.7847      0.485 -11.9316  &lt; 0.001 106.6  -6.73 -4.834
  59  -5.9415      0.499 -11.9073  &lt; 0.001 106.2  -6.92 -4.963
  60  -6.0982      0.514 -11.8529  &lt; 0.001 105.2  -7.11 -5.090
  61  -6.2550      0.530 -11.7923  &lt; 0.001 104.2  -7.29 -5.215
  62  -6.4118      0.546 -11.7371  &lt; 0.001 103.3  -7.48 -5.341
  63  -6.5685      0.564 -11.6535  &lt; 0.001 101.8  -7.67 -5.464
  64  -6.7253      0.583 -11.5369  &lt; 0.001  99.9  -7.87 -5.583
  65  -6.8821      0.602 -11.4399  &lt; 0.001  98.3  -8.06 -5.703
  66  -7.0388      0.621 -11.3331  &lt; 0.001  96.5  -8.26 -5.822
  67  -7.1956      0.640 -11.2493  &lt; 0.001  95.1  -8.45 -5.942
  68  -7.3524      0.660 -11.1396  &lt; 0.001  93.3  -8.65 -6.059
  69  -7.5092      0.682 -11.0153  &lt; 0.001  91.3  -8.85 -6.173
  70  -7.6659      0.703 -10.9031  &lt; 0.001  89.5  -9.04 -6.288
  71  -7.8227      0.724 -10.8088  &lt; 0.001  88.0  -9.24 -6.404
  72  -7.9795      0.745 -10.7044  &lt; 0.001  86.4  -9.44 -6.518
  73  -8.1362      0.768 -10.5922  &lt; 0.001  84.7  -9.64 -6.631
  74  -8.2930      0.790 -10.4909  &lt; 0.001  83.1  -9.84 -6.744
  75  -8.4498      0.812 -10.4048  &lt; 0.001  81.8 -10.04 -6.858

Term: Satisfaction
Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell" data-layout-align="center">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>fit2_ame <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Age)) <span class="sc">+</span></span>
<span id="cb23-3"><a></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb23-4"><a></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">fill =</span> <span class="st">"gray80"</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb23-6"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"年齢"</span>, <span class="at">y =</span> <span class="st">"政治満足度が共産感情温度に</span><span class="sc">\n</span><span class="st">与える影響と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">75</span>),</span>
<span id="cb23-8"><a></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">75</span>)) <span class="sc">+</span></span>
<span id="cb23-9"><a></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="tabset-4-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="interaction_files/figure-revealjs/unnamed-chunk-27-1.png" class="quarto-figure quarto-figure-center" width="1200"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-4">
<p><code>fit2_ame</code>の中身と図、両方を見て解釈する。</p>
<ul>
<li>18歳以上、29歳以下の回答者の場合、政治満足度と共産党に対する感情温度の間には関係があるとは言えない。</li>
<li>一方、30歳以上の回答者の場合、政治満足度と共産党に対する感情温度の間には統計的に有意な負の関係が見られる。つまり、30歳以上回答者の場合、政治満足度が高いほど、共産党に対する感情温度は低い傾向がある。たとえば、30歳の回答者は政治満足度が1単位上がると、共産党に対する感情温度は約1.395度低くなり、60歳のそれは約6.098度である。</li>
</ul>
</div>
</div>
</div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="Figs/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://www.jaysong.net/r4ps/" class="uri">https://www.jaysong.net/r4ps/</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/www\.jaysong\.net\/r4ps\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
                // target, if specified
                link.setAttribute("target", "_blank");
                if (link.getAttribute("rel") === null) {
                  link.setAttribute("rel", "noopener");
                }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
            let selectedAnnoteEl;
            const selectorForAnnotation = ( cell, annotation) => {
              let cellAttr = 'data-code-cell="' + cell + '"';
              let lineAttr = 'data-code-annotation="' +  annotation + '"';
              const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
              return selector;
            }
            const selectCodeLines = (annoteEl) => {
              const doc = window.document;
              const targetCell = annoteEl.getAttribute("data-target-cell");
              const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
              const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              const lines = annoteSpan.getAttribute("data-code-lines").split(",");
              const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
              })
              let top = null;
              let height = null;
              let parent = null;
              if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                  const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                  const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                  height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                  // cook up a div (if necessary) and position it 
                  let div = window.document.getElementById("code-annotation-line-highlight");
                  if (div === null) {
                    div = window.document.createElement("div");
                    div.setAttribute("id", "code-annotation-line-highlight");
                    div.style.position = 'absolute';
                    parent.appendChild(div);
                  }
                  div.style.top = top - 2 + "px";
                  div.style.height = height + 4 + "px";
                  div.style.left = 0;
                  let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                  if (gutterDiv === null) {
                    gutterDiv = window.document.createElement("div");
                    gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                    gutterDiv.style.position = 'absolute';
                    const codeCell = window.document.getElementById(targetCell);
                    const gutter = codeCell.querySelector('.code-annotation-gutter');
                    gutter.appendChild(gutterDiv);
                  }
                  gutterDiv.style.top = top - 2 + "px";
                  gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
              }
            };
            const unselectCodeLines = () => {
              const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
              elementsIds.forEach((elId) => {
                const div = window.document.getElementById(elId);
                if (div) {
                  div.remove();
                }
              });
              selectedAnnoteEl = undefined;
            };
              // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
          let throttle = false;
          let timer;
            return (...args) => {
              if(!throttle) { // first call gets through
                  fn.apply(this, args);
                  throttle = true;
              } else { // all the others get throttled
                  if(timer) clearTimeout(timer); // cancel #2
                  timer = setTimeout(() => {
                    fn.apply(this, args);
                    timer = throttle = false;
                  }, ms);
              }
            };
          }
            const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
            for (let i=0; i<annoteTargets.length; i++) {
              const annoteTarget = annoteTargets[i];
              const targetCell = annoteTarget.getAttribute("data-target-cell");
              const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
              const contentFn = () => {
                const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                if (content) {
                  const tipContent = content.cloneNode(true);
                  tipContent.classList.add("code-annotation-tip-content");
                  return tipContent.outerHTML;
                }
              }
              const config = {
                allowHTML: true,
                content: contentFn,
                onShow: (instance) => {
                  selectCodeLines(instance.reference);
                  instance.reference.classList.add('code-annotation-active');
                  window.tippy.hideAll();
                },
                onHide: (instance) => {
                  unselectCodeLines();
                  instance.reference.classList.remove('code-annotation-active');
                },
                maxWidth: 300,
                delay: [50, 0],
                duration: [200, 0],
                offset: [5, 10],
                arrow: true,
                appendTo: function(el) {
                  return el.parentElement.parentElement.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'light-border',
                placement: 'right',
                popperOptions: {
                  modifiers: [
                  {
                    name: 'flip',
                    options: {
                      flipVariations: false, // true by default
                      allowedAutoPlacements: ['right'],
                      fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                    },
                  },
                  {
                    name: 'preventOverflow',
                    options: {
                      mainAxis: false,
                      altAxis: false
                    }
                  }
                  ]        
                }      
              };
              window.tippy(annoteTarget, config); 
            }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>