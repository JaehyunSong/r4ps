<!DOCTYPE html>
<html lang="en"><head>
<link href="../../Figs/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.30">

  <meta name="author" content="宋(そん)&nbsp;&nbsp;財泫(じぇひょん)">
  <title>R for Political Science – マクロ政治データ分析実習</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-812327e31f62f2cc4f05359e191f4037.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9TLN2VMPQD"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-9TLN2VMPQD', { 'anonymize_ip': true});
  </script>
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">マクロ政治データ分析実習</h1>
  <p class="subtitle">12/ まとめ</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<ruby>宋<rp>(</rp><rt>そん</rt><rp>)</rp></ruby>&nbsp;&nbsp;<ruby>財泫<rp>(</rp><rt>じぇひょん</rt><rp>)</rp></ruby> 
</div>
        <p class="quarto-title-affiliation">
            関西大学総合情報学部
          </p>
    </div>
</div>

</section>
<section id="授業開始前に" class="slide level2">
<h2>授業開始前に</h2>
<p>すぐに実習できるように準備しておきましょう。</p>
<ol type="1">
<li>JDCat分析ツールを起動しておいてください。</li>
<li>本日授業用のプロジェクトを作成するか、既存のプロジェクトを開いてください。</li>
<li>LMSから実習用データをダウンロードしておいてください。</li>
<li>ダウンロードしてデータをプロジェクト・フォルダーにアップロードしてください。
<ul>
<li>プロジェクト・フォルダー内に<code>Data</code>フォルダーを作成し、そこにアップロードしましょう。</li>
</ul></li>
<li>実習用コードを入力するスクリプト、またはQuartoファイルを開き、以下のコードを入力&amp;実行してください（コピペ可）。</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a></a><span class="fu">library</span>(fastDummies)</span>
<span id="cb1-3"><a></a><span class="fu">library</span>(summarytools)</span>
<span id="cb1-4"><a></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-5"><a></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb1-6"><a></a></span>
<span id="cb1-7"><a></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/youtube.csv"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>トラブルが生じた場合、速やかにTAを呼んでください。</li>
<li>時間に余裕があれば、スライド内のコードも書いておきましょう。</li>
</ul>
</section>
<section>
<section id="リサーチデザイン" class="title-slide slide level1 center">
<h1>リサーチデザイン</h1>

</section>
<section id="問題設定" class="slide level2">
<h2>問題設定</h2>
<blockquote>
<p>YouTube視聴は人々の寛容性にどのような影響を与えるだろうか。YouTubeは誰でもコンテンツが作成・公開できるため、様々な考え方に接触できるツールとして活用できるため、寛容性に正の影響を与えると考えられる。しかし、YouTubeのおすすめ動画は視聴者の閲覧履歴に基づいて提案され、類似したテーマと内容のものが提案んされるケースが多い。したがって、YouTube操作に慣れていない人はおすすめされた動画のみを視聴し、寛容性に負の影響を与えると考えられる。また、このようなインターネットサービスには若年層が高齢者よりも操作に慣れている可能性が高いと考えられる。</p>
</blockquote>
<ul>
<li>仮説：YouTube視聴時間は寛容性の程度に影響を与えるが、その影響は年齢によって異なる。
<ul>
<li>仮説（a）：若年層ほどYouTube視聴時間は寛容性の程度には正の関係がある。</li>
<li>仮説（b）：高齢者ほどYouTube視聴時間は寛容性の程度には負の関係がある。</li>
</ul></li>
<li>有意水準（<span class="math inline">\(\alpha\)</span>）は5%を採用（<span class="math inline">\(\alpha = 0.05\)</span>）</li>
</ul>
</section>
<section id="必要な変数は" class="slide level2">
<h2>必要な変数は?</h2>
<ul>
<li>応答変数（結果）：寛容性の度合い</li>
<li>主要説明変数（原因）：YouTube視聴時間</li>
<li>統制変数（原因と結果両方に影響を与えると考えられる変数）
<ul>
<li>性別、年齢、学歴、…</li>
<li>無数に存在するため、中でもその影響力が強いと思うものを選定し、（自分でデータを収集するのであれば）測定・収集する。</li>
<li>公開済みデータを利用する分析（2次分析）であれば、応答変数と主要説明変数が含まれたデータを見つけたら、そのデータの中から統制変数として適切なものを選ぶ。</li>
</ul></li>
<li>今回は（奇跡的にも）適切なデータが見つかったので、それを使う。</li>
</ul>

<aside><div>
<ul>
<li>調査名：日常生活の行動および意識に関する世論調査</li>
<li>調査期間：2024年11月12日〜14日</li>
<li>対象：楽天インサイトにパネルとして登録した18歳以上の日本人</li>
<li>サンプルサイズ：3725名</li>
</ul>
</div></aside></section></section>
<section>
<section id="データ" class="title-slide slide level1 center">
<h1>データ</h1>

</section>
<section id="データ読み込み" class="slide level2">
<h2>データ読み込み</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a></a><span class="fu">library</span>(fastDummies)</span>
<span id="cb2-3"><a></a><span class="fu">library</span>(summarytools)</span>
<span id="cb2-4"><a></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb2-5"><a></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb2-6"><a></a></span>
<span id="cb2-7"><a></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/youtube.csv"</span>)</span>
<span id="cb2-8"><a></a></span>
<span id="cb2-9"><a></a>df</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,122 × 11
     fem   age  educ   inc child youtube diver1 diver2 diver3 diver4 diver5
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1     0    25     5     7     1       6      1      4      4      2      3
 2     0    26     5    11     1       3      3      2      3      3      3
 3     0    28     5    10     1       4      5      5      5      5      5
 4     1    59     5     6     1       3      3      4      4      3      4
 5     1    28     5     9     1       6      2      4      4      4      4
 6     0    50     5    10     1       4      4      4      4      4      4
 7     0    44     4     2     1       2      3      4      4      3      4
 8     1    45     5    12     1       5      2      3      3      3      4
 9     1    54     5     3     2       1      4      4      4      3      4
10     0    27     5    99     1       4      3      3      3      3      3
# ℹ 3,112 more rows</code></pre>
</div>
</div>
</section>
<section id="データ説明" class="slide level2">
<h2>データ説明</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">変数名</th>
<th style="text-align: left;">説明</th>
<th style="text-align: left;">備考</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>fem</code></td>
<td style="text-align: left;">性別</td>
<td style="text-align: left;">0 = 男性; 1 = 女性</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>age</code></td>
<td style="text-align: left;">年齢</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>educ</code></td>
<td style="text-align: left;">学歴</td>
<td style="text-align: left;">1 = 中卒　〜　6 = 大学院; 9 = 欠損値</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>inc</code></td>
<td style="text-align: left;">世帯収入</td>
<td style="text-align: left;">1 = なし　〜　19 = 2300万円以上; 99 = 欠損値</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>child</code></td>
<td style="text-align: left;">子どもの有無</td>
<td style="text-align: left;">1 = なし; 2 = あり（同居）; 3 = あり（別居）</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>youtube</code></td>
<td style="text-align: left;">YouTube視聴時間（1日平均）</td>
<td style="text-align: left;">1 = 見ない　〜　7 = 5時間以上</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>diver1</code></td>
<td style="text-align: left;">寛容性尺度1<sup>1</sup></td>
<td style="text-align: left;">高いほど寛容的（1〜5）</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>diver2</code></td>
<td style="text-align: left;">寛容性尺度2<sup>2</sup></td>
<td style="text-align: left;">高いほど寛容的（1〜5）</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>diver3</code></td>
<td style="text-align: left;">寛容性尺度3<sup>3</sup></td>
<td style="text-align: left;">高いほど寛容的（1〜5）</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>diver4</code></td>
<td style="text-align: left;">寛容性尺度4<sup>4</sup></td>
<td style="text-align: left;">高いほど寛容的（1〜5）</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>diver5</code></td>
<td style="text-align: left;">寛容性尺度5<sup>5</sup></td>
<td style="text-align: left;">高いほど寛容的（1〜5）</td>
</tr>
</tbody>
</table>
<aside><ol class="aside-footnotes"><li id="fn1"><p>自分と違う考えや価値観を持つ人と話し合いをすることは楽しい</p></li><li id="fn2"><p>自分と背景が異なる人と接することは、人生において必要である</p></li><li id="fn3"><p>違う文化から来ている人について学ぶことは、人生において重要である</p></li><li id="fn4"><p>自分とは違う考えや価値観を持つ人と今後接したいと思う</p></li><li id="fn5"><p>自分の考え方や好み、やり方が違うからと言って、その人を遠ざけることはしない</p></li></ol></aside></section>
<section id="データハンドリング寛容性スコアの作成" class="slide level2">
<h2>データハンドリング：寛容性スコアの作成</h2>
<ul>
<li><code>diver1</code>〜<code>diver5</code>変数を一つの変数にまとめたい。
<ul>
<li><code>diver1</code>から<code>diver5</code>までの平均値、因子分析、主成分分析、…</li>
<li>ここでは平均値を採用し、計算結果を<code>diversity</code>列として追加（既存の<code>diver1</code>から<code>diver5</code>までの列は削除）</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a></a>  <span class="fu">mutate</span>(<span class="at">diversity =</span> diver1 <span class="sc">+</span> diver2 <span class="sc">+</span> diver3 <span class="sc">+</span> diver4 <span class="sc">+</span> diver5,</span>
<span id="cb4-3"><a></a>         <span class="at">diversity =</span> diversity <span class="sc">/</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>(diver1<span class="sc">:</span>diver5))</span>
<span id="cb4-5"><a></a></span>
<span id="cb4-6"><a></a>df</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,122 × 7
     fem   age  educ   inc child youtube diversity
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1     0    25     5     7     1       6       2.8
 2     0    26     5    11     1       3       2.8
 3     0    28     5    10     1       4       5  
 4     1    59     5     6     1       3       3.6
 5     1    28     5     9     1       6       3.6
 6     0    50     5    10     1       4       4  
 7     0    44     4     2     1       2       3.6
 8     1    45     5    12     1       5       3  
 9     1    54     5     3     2       1       3.8
10     0    27     5    99     1       4       3  
# ℹ 3,112 more rows</code></pre>
</div>
</div>
</section>
<section id="データハンドリング欠損値処理" class="slide level2">
<h2>データハンドリング：欠損値処理</h2>
<ul>
<li>データのよって欠損値が<code>NA</code>でなく、数字になっているケースもあるため、この場合は欠損値に置換する。
<ul>
<li>学歴（<code>educ</code>）の欠損値は<code>9</code>、世帯収入（<code>inc</code>）の欠損値は<code>99</code></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a></a>  <span class="fu">mutate</span>(<span class="at">educ =</span> <span class="fu">if_else</span>(educ <span class="sc">==</span> <span class="dv">9</span>,  <span class="cn">NA</span>, educ), <span class="co"># educの値が9ならNAに、それ以外はそのままに</span></span>
<span id="cb6-3"><a></a>         <span class="at">inc  =</span> <span class="fu">if_else</span>(inc  <span class="sc">==</span> <span class="dv">99</span>, <span class="cn">NA</span>, inc))  <span class="co"># incの値が99ならNAに、それ以外はそのままに</span></span>
<span id="cb6-4"><a></a></span>
<span id="cb6-5"><a></a>df</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,122 × 7
     fem   age  educ   inc child youtube diversity
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1     0    25     5     7     1       6       2.8
 2     0    26     5    11     1       3       2.8
 3     0    28     5    10     1       4       5  
 4     1    59     5     6     1       3       3.6
 5     1    28     5     9     1       6       3.6
 6     0    50     5    10     1       4       4  
 7     0    44     4     2     1       2       3.6
 8     1    45     5    12     1       5       3  
 9     1    54     5     3     2       1       3.8
10     0    27     5    NA     1       4       3  
# ℹ 3,112 more rows</code></pre>
</div>
</div>
</section>
<section id="データハンドリング欠損の確認" class="slide level2">
<h2>データハンドリング：欠損の確認</h2>
<ul>
<li><code>colSums(is.na(表オブジェクト名))</code>で確認可能
<ul>
<li><code>summary(表オブジェクト名)</code>でもOK（欠損値以外の情報も出力される）</li>
</ul></li>
<li>学歴（<code>educ</code>）が欠損したケースは56名、世帯収入（<code>inc</code>）のそれは411名</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="fu">is.na</span>(df) <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a></a>  <span class="fu">colSums</span>()</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      fem       age      educ       inc     child   youtube diversity 
        0         0        56       411         0         0         0 </code></pre>
</div>
</div>
<ul>
<li>分析に使用する変数一つでも抜けている行は分析から除外する。
<ul>
<li>例）10行目は世帯収入（<code>inc</code>）が欠損（<code>NA</code>）しているため、除外する必要がある。</li>
<li>参考）欠損値を補完する手法（多重代入法; multiple imputation）もある。</li>
</ul></li>
</ul>
</section>
<section id="データハンドリング欠損した行の除外" class="slide level2">
<h2>データハンドリング：欠損した行の除外</h2>
<ul>
<li><code>filter()</code>か<code>drop_na()</code>を使用
<ul>
<li><code>filter()</code>を使用する場合、<code>変数名 != NA</code>でなく、<code>!is.na(変数名)</code>を使用する。</li>
<li>前期講義の「データハンドリング（1）」を参照</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(educ) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(inc)) <span class="co"># drop_na(educ, inc) でもOK</span></span>
<span id="cb10-3"><a></a></span>
<span id="cb10-4"><a></a>df</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,683 × 7
     fem   age  educ   inc child youtube diversity
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1     0    25     5     7     1       6       2.8
 2     0    26     5    11     1       3       2.8
 3     0    28     5    10     1       4       5  
 4     1    59     5     6     1       3       3.6
 5     1    28     5     9     1       6       3.6
 6     0    50     5    10     1       4       4  
 7     0    44     4     2     1       2       3.6
 8     1    45     5    12     1       5       3  
 9     1    54     5     3     2       1       3.8
10     0    74     5    10     3       2       3.6
# ℹ 2,673 more rows</code></pre>
</div>
</div>
</section>
<section id="データハンドリング名目変数のfactor化" class="slide level2">
<h2>データハンドリング：名目変数のfactor化</h2>
<ul>
<li>子どもの有無（<code>child</code>）は名目変数だが、現在は数値型であるため、factor型変数に変換</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a></a>  <span class="fu">mutate</span>(<span class="at">child =</span> <span class="fu">factor</span>(child, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb12-3"><a></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"子どもなし"</span>, <span class="st">"同居中の子どもあり"</span>, <span class="st">"別居中の子どもあり"</span>)))</span>
<span id="cb12-4"><a></a></span>
<span id="cb12-5"><a></a>df</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,683 × 7
     fem   age  educ   inc child              youtube diversity
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;                &lt;dbl&gt;     &lt;dbl&gt;
 1     0    25     5     7 子どもなし               6       2.8
 2     0    26     5    11 子どもなし               3       2.8
 3     0    28     5    10 子どもなし               4       5  
 4     1    59     5     6 子どもなし               3       3.6
 5     1    28     5     9 子どもなし               6       3.6
 6     0    50     5    10 子どもなし               4       4  
 7     0    44     4     2 子どもなし               2       3.6
 8     1    45     5    12 子どもなし               5       3  
 9     1    54     5     3 同居中の子どもあり       1       3.8
10     0    74     5    10 別居中の子どもあり       2       3.6
# ℹ 2,673 more rows</code></pre>
</div>
</div>
</section>
<section id="記述統計の計算" class="slide level2">
<h2>記述統計の計算</h2>
<ul>
<li>名目変数（ここでは<code>child</code>）はダミー化してから計算</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>df <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a></a>  <span class="fu">dummy_cols</span>(<span class="at">select_columns =</span> <span class="st">"child"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a></a>  <span class="fu">descr</span>(<span class="at">stats =</span> <span class="fu">c</span>(<span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span>, <span class="st">"n.valid"</span>),</span>
<span id="cb14-4"><a></a>        <span class="at">transpose =</span> <span class="cn">TRUE</span>, <span class="at">order =</span> <span class="st">"p"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Descriptive Statistics  
df  
N: 2683  

                                  Mean   Std.Dev     Min     Max   N.Valid
------------------------------ ------- --------- ------- ------- ---------
                           fem    0.51      0.50    0.00    1.00   2683.00
                           age   50.95     16.13   18.00   79.00   2683.00
                          educ    3.85      1.44    1.00    6.00   2683.00
                           inc    6.60      3.69    1.00   19.00   2683.00
                       youtube    2.94      1.52    1.00    7.00   2683.00
                     diversity    3.47      0.66    1.00    5.00   2683.00
              child_子どもなし    0.44      0.50    0.00    1.00   2683.00
      child_同居中の子どもあり    0.33      0.47    0.00    1.00   2683.00
      child_別居中の子どもあり    0.23      0.42    0.00    1.00   2683.00</code></pre>
</div>
</div>
</section>
<section id="記述統計の掲載" class="slide level2">
<h2>記述統計の掲載</h2>
<ul>
<li>レポート、論文に掲載する際はしっかり加工すること
<ul>
<li>変数名をそのまま使わず、誰でも分かるように</li>
<li>応答変数、主要説明変数、その他の説明変数（統制変数）の順で</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="mjudcyppsa" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mjudcyppsa table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mjudcyppsa thead, #mjudcyppsa tbody, #mjudcyppsa tfoot, #mjudcyppsa tr, #mjudcyppsa td, #mjudcyppsa th {
  border-style: none;
}

#mjudcyppsa p {
  margin: 0;
  padding: 0;
}

#mjudcyppsa .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 24px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mjudcyppsa .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mjudcyppsa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mjudcyppsa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mjudcyppsa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mjudcyppsa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjudcyppsa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mjudcyppsa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mjudcyppsa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mjudcyppsa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mjudcyppsa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mjudcyppsa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mjudcyppsa .gt_spanner_row {
  border-bottom-style: hidden;
}

#mjudcyppsa .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mjudcyppsa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mjudcyppsa .gt_from_md > :first-child {
  margin-top: 0;
}

#mjudcyppsa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mjudcyppsa .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mjudcyppsa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mjudcyppsa .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mjudcyppsa .gt_row_group_first td {
  border-top-width: 2px;
}

#mjudcyppsa .gt_row_group_first th {
  border-top-width: 2px;
}

#mjudcyppsa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjudcyppsa .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mjudcyppsa .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mjudcyppsa .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjudcyppsa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjudcyppsa .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mjudcyppsa .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mjudcyppsa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mjudcyppsa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mjudcyppsa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mjudcyppsa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjudcyppsa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mjudcyppsa .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mjudcyppsa .gt_left {
  text-align: left;
}

#mjudcyppsa .gt_center {
  text-align: center;
}

#mjudcyppsa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mjudcyppsa .gt_font_normal {
  font-weight: normal;
}

#mjudcyppsa .gt_font_bold {
  font-weight: bold;
}

#mjudcyppsa .gt_font_italic {
  font-style: italic;
}

#mjudcyppsa .gt_super {
  font-size: 65%;
}

#mjudcyppsa .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mjudcyppsa .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mjudcyppsa .gt_indent_1 {
  text-indent: 5px;
}

#mjudcyppsa .gt_indent_2 {
  text-indent: 10px;
}

#mjudcyppsa .gt_indent_3 {
  text-indent: 15px;
}

#mjudcyppsa .gt_indent_4 {
  text-indent: 20px;
}

#mjudcyppsa .gt_indent_5 {
  text-indent: 25px;
}

#mjudcyppsa .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mjudcyppsa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="a::stub" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="Mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">平均値</th>
<th id="Std.Dev" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">標準偏差</th>
<th id="Min" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">最小値</th>
<th id="Max" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">最大値</th>
<th id="N.Valid" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">有効ケース数</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td id="stub_1_1" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">寛容性スコア</td>
<td class="gt_row gt_right" headers="stub_1_1 Mean">3.475</td>
<td class="gt_row gt_right" headers="stub_1_1 Std.Dev">0.664</td>
<td class="gt_row gt_right" headers="stub_1_1 Min">1</td>
<td class="gt_row gt_right" headers="stub_1_1 Max">5</td>
<td class="gt_row gt_right" headers="stub_1_1 N.Valid">2683</td>
</tr>
<tr class="even">
<td id="stub_1_2" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">YouTube視聴時間</td>
<td class="gt_row gt_right" headers="stub_1_2 Mean">2.944</td>
<td class="gt_row gt_right" headers="stub_1_2 Std.Dev">1.522</td>
<td class="gt_row gt_right" headers="stub_1_2 Min">1</td>
<td class="gt_row gt_right" headers="stub_1_2 Max">7</td>
<td class="gt_row gt_right" headers="stub_1_2 N.Valid">2683</td>
</tr>
<tr class="odd">
<td id="stub_1_3" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">女性ダミー</td>
<td class="gt_row gt_right" headers="stub_1_3 Mean">0.507</td>
<td class="gt_row gt_right" headers="stub_1_3 Std.Dev">0.500</td>
<td class="gt_row gt_right" headers="stub_1_3 Min">0</td>
<td class="gt_row gt_right" headers="stub_1_3 Max">1</td>
<td class="gt_row gt_right" headers="stub_1_3 N.Valid">2683</td>
</tr>
<tr class="even">
<td id="stub_1_4" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">年齢</td>
<td class="gt_row gt_right" headers="stub_1_4 Mean">50.954</td>
<td class="gt_row gt_right" headers="stub_1_4 Std.Dev">16.128</td>
<td class="gt_row gt_right" headers="stub_1_4 Min">18</td>
<td class="gt_row gt_right" headers="stub_1_4 Max">79</td>
<td class="gt_row gt_right" headers="stub_1_4 N.Valid">2683</td>
</tr>
<tr class="odd">
<td id="stub_1_5" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">学歴</td>
<td class="gt_row gt_right" headers="stub_1_5 Mean">3.849</td>
<td class="gt_row gt_right" headers="stub_1_5 Std.Dev">1.439</td>
<td class="gt_row gt_right" headers="stub_1_5 Min">1</td>
<td class="gt_row gt_right" headers="stub_1_5 Max">6</td>
<td class="gt_row gt_right" headers="stub_1_5 N.Valid">2683</td>
</tr>
<tr class="even">
<td id="stub_1_6" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">世帯収入</td>
<td class="gt_row gt_right" headers="stub_1_6 Mean">6.602</td>
<td class="gt_row gt_right" headers="stub_1_6 Std.Dev">3.691</td>
<td class="gt_row gt_right" headers="stub_1_6 Min">1</td>
<td class="gt_row gt_right" headers="stub_1_6 Max">19</td>
<td class="gt_row gt_right" headers="stub_1_6 N.Valid">2683</td>
</tr>
<tr class="odd">
<td id="stub_1_7" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">子どもなし</td>
<td class="gt_row gt_right" headers="stub_1_7 Mean">0.435</td>
<td class="gt_row gt_right" headers="stub_1_7 Std.Dev">0.496</td>
<td class="gt_row gt_right" headers="stub_1_7 Min">0</td>
<td class="gt_row gt_right" headers="stub_1_7 Max">1</td>
<td class="gt_row gt_right" headers="stub_1_7 N.Valid">2683</td>
</tr>
<tr class="even">
<td id="stub_1_8" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">同居中の子どもあり</td>
<td class="gt_row gt_right" headers="stub_1_8 Mean">0.330</td>
<td class="gt_row gt_right" headers="stub_1_8 Std.Dev">0.470</td>
<td class="gt_row gt_right" headers="stub_1_8 Min">0</td>
<td class="gt_row gt_right" headers="stub_1_8 Max">1</td>
<td class="gt_row gt_right" headers="stub_1_8 N.Valid">2683</td>
</tr>
<tr class="odd">
<td id="stub_1_9" class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" scope="row">別居中の子どもあり</td>
<td class="gt_row gt_right" headers="stub_1_9 Mean">0.235</td>
<td class="gt_row gt_right" headers="stub_1_9 Std.Dev">0.424</td>
<td class="gt_row gt_right" headers="stub_1_9 Min">0</td>
<td class="gt_row gt_right" headers="stub_1_9 Max">1</td>
<td class="gt_row gt_right" headers="stub_1_9 N.Valid">2683</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section></section>
<section>
<section id="推定" class="title-slide slide level1 center">
<h1>推定</h1>

</section>
<section id="youtube線形時間と寛容性間の関係" class="slide level2">
<h2>YouTube線形時間と寛容性間の関係</h2>
<ul>
<li>線形（右上がり、右下がり）?U字?逆U字?その他の関係?
<ul>
<li>説明変数の値ごとに応答変数の平均値を計算するか散布図から確認</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a>df <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a></a>  <span class="fu">group_by</span>(youtube) <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a></a>  <span class="fu">summarise</span>(<span class="at">diversity =</span> <span class="fu">mean</span>(diversity))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  youtube diversity
    &lt;dbl&gt;     &lt;dbl&gt;
1       1      3.38
2       2      3.48
3       3      3.47
4       4      3.56
5       5      3.56
6       6      3.50
7       7      3.20</code></pre>
</div>
</div>
<ul>
<li><code>youtube</code> = 4か5を頂点とする「逆U字型」であるため、<code>youtube</code>の2乗項も投入
<ul>
<li>参考）1 = 使わない、2 = 30分未満、3 = 30分〜1時間未満、4 = 1〜2時間未満、5 = 2〜3.5時間未満、6 = 3.5〜5時間未満、7 = 5時間以上</li>
</ul></li>
</ul>
</section>
<section id="非線形関係" class="slide level2">
<h2>（非）線形関係</h2>
<ul>
<li>説明変数の2乗項を追加することで非線形の関係も推定可能</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>式1：<span class="math inline">\(y = \beta_0 + \beta_1 x\)</span>（赤）</li>
<li>式2：<span class="math inline">\(y = \beta_0 - \beta_1 x\)</span>（青）</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-13-1.png" class="quarto-figure quarto-figure-center" width="1500"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>式1：<span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 x^2\)</span>（赤）</li>
<li>式2：<span class="math inline">\(y = \beta_0 + \beta_1 x - \beta_2 x^2\)</span>（青）</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-14-1.png" class="quarto-figure quarto-figure-center" width="1500"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="推定モデル1" class="slide level2">
<h2>推定モデル（1）</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-15-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="推定モデル2" class="slide level2">
<h2>推定モデル（2）</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-16-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="推定-1" class="slide level2">
<h2>推定</h2>
<ul>
<li><code>poly(X, 2)</code>で<code>X</code>だけでなく、<code>X</code>の2乗項もモデルに投入される。</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(diversity <span class="sc">~</span> <span class="fu">poly</span>(youtube, <span class="dv">2</span>) <span class="sc">*</span> age <span class="sc">+</span> fem <span class="sc">+</span> age <span class="sc">+</span> educ <span class="sc">+</span> inc <span class="sc">+</span> child, <span class="at">data =</span> df)</span>
<span id="cb18-2"><a></a></span>
<span id="cb18-3"><a></a><span class="fu">summary</span>(fit)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = diversity ~ poly(youtube, 2) * age + fem + age + 
    educ + inc + child, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.69345 -0.37513  0.05671  0.42330  1.71225 

Coefficients:
                          Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              3.1063172  0.0693572  44.787  &lt; 2e-16 ***
poly(youtube, 2)1        8.0975241  2.2287799   3.633 0.000285 ***
poly(youtube, 2)2       -3.0631081  2.1180847  -1.446 0.148247    
age                     -0.0026340  0.0009952  -2.647 0.008175 ** 
fem                      0.1808630  0.0287074   6.300 3.46e-10 ***
educ                     0.0435088  0.0091125   4.775 1.90e-06 ***
inc                      0.0281334  0.0039815   7.066 2.03e-12 ***
child同居中の子どもあり  0.0650000  0.0301424   2.156 0.031139 *  
child別居中の子どもあり  0.0977025  0.0392202   2.491 0.012794 *  
poly(youtube, 2)1:age   -0.1389109  0.0419930  -3.308 0.000952 ***
poly(youtube, 2)2:age    0.0018895  0.0401860   0.047 0.962502    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.6464 on 2672 degrees of freedom
Multiple R-squared:  0.05474,   Adjusted R-squared:  0.0512 
F-statistic: 15.47 on 10 and 2672 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="回帰表" class="slide level2">
<h2>回帰表</h2>
<ul>
<li><code>summary(回帰オブジェクト)</code>の結果を参照し、自分で回帰表を作っても良い。</li>
</ul>
<div class="columns">
<div class="column" style="width:58%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">modelsummary</span>(</span>
<span id="cb20-2"><a></a>  fit,</span>
<span id="cb20-3"><a></a>  <span class="at">estimate    =</span> <span class="st">"{estimate} ({std.error}){stars}"</span>,</span>
<span id="cb20-4"><a></a>  <span class="at">coef_rename =</span> <span class="fu">c</span>(</span>
<span id="cb20-5"><a></a>    <span class="st">"(Intercept)"</span>       <span class="ot">=</span> <span class="st">"切片"</span>,</span>
<span id="cb20-6"><a></a>    <span class="st">"poly(youtube, 2)1"</span> <span class="ot">=</span> <span class="st">"YouTube視聴時間"</span>,</span>
<span id="cb20-7"><a></a>    <span class="st">"poly(youtube, 2)2"</span> <span class="ot">=</span> <span class="st">"YouTube視聴時間の2乗"</span>,</span>
<span id="cb20-8"><a></a>    <span class="st">"age"</span>               <span class="ot">=</span> <span class="st">"年齢"</span>,</span>
<span id="cb20-9"><a></a>    <span class="st">"fem"</span>               <span class="ot">=</span> <span class="st">"女性"</span>,</span>
<span id="cb20-10"><a></a>    <span class="st">"educ"</span>              <span class="ot">=</span> <span class="st">"学歴"</span>,</span>
<span id="cb20-11"><a></a>    <span class="st">"inc"</span>               <span class="ot">=</span> <span class="st">"世帯収入"</span>,</span>
<span id="cb20-12"><a></a>    <span class="st">"child同居中の子どもあり"</span> <span class="ot">=</span> <span class="st">"同居中の子どもあり"</span>,</span>
<span id="cb20-13"><a></a>    <span class="st">"child別居中の子どもあり"</span> <span class="ot">=</span> <span class="st">"別居中の子どもあり"</span></span>
<span id="cb20-14"><a></a>  ),</span>
<span id="cb20-15"><a></a>  <span class="at">statistic   =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-16"><a></a>  <span class="at">gof_map     =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>),</span>
<span id="cb20-17"><a></a>  <span class="at">notes       =</span> <span class="st">"注：カッコ内は標準誤差"</span></span>
<span id="cb20-18"><a></a>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_eixswr97o5rx5ahu0526(i, j, css_id) {
          var table = document.getElementById("tinytable_eixswr97o5rx5ahu0526");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_eixswr97o5rx5ahu0526');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_eixswr97o5rx5ahu0526(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_eixswr97o5rx5ahu0526");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 12, j: 0 },  ], css_id: 'tinytable_css_xu1r9go2oig1xsuxiwta',}, 
          { positions: [ { i: 11, j: 0 },  ], css_id: 'tinytable_css_jf5loreaxhmeqmet7f49',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 12, j: 1 },  ], css_id: 'tinytable_css_ixhc74z0tkltmboefh5m',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_ise1yhp0uqkvn5pu9hyg',}, 
          { positions: [ { i: 13, j: 1 },  ], css_id: 'tinytable_css_dhn9j6vm9dkwiz8cd8ml',}, 
          { positions: [ { i: 13, j: 0 },  ], css_id: 'tinytable_css_bwtloqvi96j6z7ga2m4p',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_9kydu429urehyyxq480j',}, 
          { positions: [ { i: 11, j: 1 },  ], css_id: 'tinytable_css_1szh71hechlhdpyl841m',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_eixswr97o5rx5ahu0526(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_xu1r9go2oig1xsuxiwta, .table th.tinytable_css_xu1r9go2oig1xsuxiwta { text-align: left; }
      .table td.tinytable_css_jf5loreaxhmeqmet7f49, .table th.tinytable_css_jf5loreaxhmeqmet7f49 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_ixhc74z0tkltmboefh5m, .table th.tinytable_css_ixhc74z0tkltmboefh5m { text-align: center; }
      .table td.tinytable_css_ise1yhp0uqkvn5pu9hyg, .table th.tinytable_css_ise1yhp0uqkvn5pu9hyg { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_dhn9j6vm9dkwiz8cd8ml, .table th.tinytable_css_dhn9j6vm9dkwiz8cd8ml { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_bwtloqvi96j6z7ga2m4p, .table th.tinytable_css_bwtloqvi96j6z7ga2m4p { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_9kydu429urehyyxq480j, .table th.tinytable_css_9kydu429urehyyxq480j { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_1szh71hechlhdpyl841m, .table th.tinytable_css_1szh71hechlhdpyl841m { text-align: center; border-bottom: solid black 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_eixswr97o5rx5ahu0526" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">注：カッコ内は標準誤差</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>切片</td>
                  <td>3.106 (0.069)***</td>
                </tr>
                <tr>
                  <td>YouTube視聴時間</td>
                  <td>8.098 (2.229)***</td>
                </tr>
                <tr>
                  <td>YouTube視聴時間の2乗</td>
                  <td>-3.063 (2.118)</td>
                </tr>
                <tr>
                  <td>年齢</td>
                  <td>-0.003 (0.001)**</td>
                </tr>
                <tr>
                  <td>女性</td>
                  <td>0.181 (0.029)***</td>
                </tr>
                <tr>
                  <td>学歴</td>
                  <td>0.044 (0.009)***</td>
                </tr>
                <tr>
                  <td>世帯収入</td>
                  <td>0.028 (0.004)***</td>
                </tr>
                <tr>
                  <td>同居中の子どもあり</td>
                  <td>0.065 (0.030)*</td>
                </tr>
                <tr>
                  <td>別居中の子どもあり</td>
                  <td>0.098 (0.039)*</td>
                </tr>
                <tr>
                  <td>YouTube視聴時間:年齢</td>
                  <td>-0.139 (0.042)***</td>
                </tr>
                <tr>
                  <td>YouTube視聴時間の2乗:年齢</td>
                  <td>0.002 (0.040)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>2683</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.055</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</div></div>
</section></section>
<section>
<section id="結果の報告" class="title-slide slide level1 center">
<h1>結果の報告</h1>

</section>
<section id="交互作用を考慮しない予測値" class="slide level2">
<h2>交互作用を考慮しない予測値</h2>
<ul>
<li>YouTube視聴時間を除く全ての変数（調整変数を含む）は平均値に固定（名目変数はベースカテゴリーに固定）</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>pred1 <span class="ot">&lt;-</span> fit <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a></a>  <span class="fu">predictions</span>(<span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">youtube =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>))</span>
<span id="cb21-3"><a></a></span>
<span id="cb21-4"><a></a>pred1</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 youtube Estimate Std. Error     z Pr(&gt;|z|)   S 2.5 % 97.5 %
       1     3.41     0.0350  97.3   &lt;0.001 Inf  3.34   3.47
       2     3.50     0.0269 130.5   &lt;0.001 Inf  3.45   3.56
       3     3.56     0.0284 125.3   &lt;0.001 Inf  3.50   3.61
       4     3.57     0.0302 118.2   &lt;0.001 Inf  3.51   3.63
       5     3.54     0.0323 109.5   &lt;0.001 Inf  3.48   3.60
       6     3.47     0.0422  82.0   &lt;0.001 Inf  3.38   3.55
       7     3.35     0.0655  51.1   &lt;0.001 Inf  3.22   3.48

Type:  response </code></pre>
</div>
</div>
</section>
<section id="交互作用を考慮しない予測値可視化" class="slide level2">
<h2>交互作用を考慮しない予測値（可視化）</h2>
<div class="columns">
<div class="column" style="width:54%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>pred1 <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb23-3"><a></a>  <span class="fu">geom_pointrange</span>(</span>
<span id="cb23-4"><a></a>    <span class="fu">aes</span>(<span class="at">x =</span> youtube, <span class="at">y =</span> estimate, </span>
<span id="cb23-5"><a></a>        <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)</span>
<span id="cb23-6"><a></a>  ) <span class="sc">+</span></span>
<span id="cb23-7"><a></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb23-8"><a></a>    <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb23-9"><a></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"使わない"</span>, <span class="st">"〜30分"</span>, <span class="st">"30分〜1時間"</span>, </span>
<span id="cb23-10"><a></a>               <span class="st">"1〜2時間"</span>, <span class="st">"2〜3.5時間"</span>, </span>
<span id="cb23-11"><a></a>               <span class="st">"3.5〜5時間"</span>, <span class="st">"5時間〜"</span>)</span>
<span id="cb23-12"><a></a>  ) <span class="sc">+</span></span>
<span id="cb23-13"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"YouTube視聴時間"</span>, </span>
<span id="cb23-14"><a></a>       <span class="at">y =</span> <span class="st">"寛容性スコアの予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb23-15"><a></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:44%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-22-1.png" class="quarto-figure quarto-figure-center" width="1800"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="交互作用を考慮した予測値" class="slide level2">
<h2>交互作用を考慮した予測値</h2>
<ul>
<li>すべての年齢に対して予測値を出すと可視化が難しいため、20、45、70歳の場合の予測値を計算</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>pred2 <span class="ot">&lt;-</span> fit <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a></a>  <span class="fu">predictions</span>(<span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">youtube =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">45</span>, <span class="dv">70</span>)))</span>
<span id="cb24-3"><a></a></span>
<span id="cb24-4"><a></a>pred2</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 youtube age Estimate Std. Error     z Pr(&gt;|z|)     S 2.5 % 97.5 %
       1  20     3.38     0.0723  46.8   &lt;0.001   Inf  3.24   3.52
       1  45     3.40     0.0385  88.4   &lt;0.001   Inf  3.32   3.48
       1  70     3.42     0.0454  75.4   &lt;0.001   Inf  3.33   3.51
       2  20     3.53     0.0408  86.6   &lt;0.001   Inf  3.45   3.61
       2  45     3.51     0.0266 132.0   &lt;0.001   Inf  3.46   3.56
       2  70     3.48     0.0373  93.4   &lt;0.001   Inf  3.41   3.56
       3  20     3.64     0.0386  94.5   &lt;0.001   Inf  3.57   3.72
       3  45     3.57     0.0269 132.7   &lt;0.001   Inf  3.52   3.63
       3  70     3.50     0.0418  83.9   &lt;0.001   Inf  3.42   3.59
       4  20     3.71     0.0420  88.3   &lt;0.001   Inf  3.63   3.79
       4  45     3.60     0.0287 125.3   &lt;0.001   Inf  3.54   3.65
       4  70     3.48     0.0447  77.9   &lt;0.001   Inf  3.40   3.57
       5  20     3.73     0.0443  84.2   &lt;0.001   Inf  3.65   3.82
       5  45     3.58     0.0303 118.1   &lt;0.001   Inf  3.52   3.64
       5  70     3.42     0.0493  69.4   &lt;0.001   Inf  3.32   3.52
       6  20     3.71     0.0627  59.2   &lt;0.001   Inf  3.59   3.84
       6  45     3.51     0.0392  89.6   &lt;0.001   Inf  3.44   3.59
       6  70     3.31     0.0684  48.4   &lt;0.001   Inf  3.18   3.45
       7  20     3.65     0.1089  33.5   &lt;0.001 814.7  3.43   3.86
       7  45     3.41     0.0620  54.9   &lt;0.001   Inf  3.29   3.53
       7  70     3.17     0.1086  29.1   &lt;0.001 617.7  2.95   3.38

Type:  response </code></pre>
</div>
</div>
</section>
<section id="交互作用を考慮した予測値可視化" class="slide level2">
<h2>交互作用を考慮した予測値（可視化）</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">コード1</a></li><li><a href="#tabset-1-2">結果1</a></li><li><a href="#tabset-1-3">コード2</a></li><li><a href="#tabset-1-4">結果2</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a>pred2 <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">factor</span>(age,</span>
<span id="cb26-3"><a></a>                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">45</span>, <span class="dv">70</span>),</span>
<span id="cb26-4"><a></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"20歳"</span>, <span class="st">"45歳"</span>, <span class="st">"70歳"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb26-5"><a></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb26-6"><a></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> youtube, <span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb26-7"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"YouTube視聴時間"</span>, <span class="at">y =</span> <span class="st">"寛容性スコアの予測値と</span><span class="sc">\n</span><span class="st">95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb26-8"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb26-9"><a></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"使わない"</span>, <span class="st">"〜30分"</span>, <span class="st">"30分〜1時間"</span>, <span class="st">"1〜2時間"</span>,</span>
<span id="cb26-10"><a></a>                                <span class="st">"2〜3.5時間"</span>, <span class="st">"3.5〜5時間"</span>, <span class="st">"5時間〜"</span>)) <span class="sc">+</span></span>
<span id="cb26-11"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>age) <span class="sc">+</span></span>
<span id="cb26-12"><a></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb26-13"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-25-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>pred2 <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">factor</span>(age,</span>
<span id="cb27-3"><a></a>                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">45</span>, <span class="dv">70</span>),</span>
<span id="cb27-4"><a></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"20歳"</span>, <span class="st">"45歳"</span>, <span class="st">"70歳"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb27-5"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> youtube)) <span class="sc">+</span></span>
<span id="cb27-6"><a></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">fill =</span> age),</span>
<span id="cb27-7"><a></a>              <span class="at">alpha =</span> <span class="fl">0.35</span>) <span class="sc">+</span></span>
<span id="cb27-8"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate, <span class="at">color =</span> age),</span>
<span id="cb27-9"><a></a>            <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb27-10"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"YouTube視聴時間"</span>, <span class="at">y =</span> <span class="st">"寛容性スコアの予測値と</span><span class="sc">\n</span><span class="st">95%信頼区間"</span>, <span class="at">fill =</span> <span class="st">"年齢"</span>, <span class="at">color =</span> <span class="st">"年齢"</span>) <span class="sc">+</span></span>
<span id="cb27-11"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb27-12"><a></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"使わない"</span>, <span class="st">"〜30分"</span>, <span class="st">"30分〜1時間"</span>, <span class="st">"1〜2時間"</span>,</span>
<span id="cb27-13"><a></a>                                <span class="st">"2〜3.5時間"</span>, <span class="st">"3.5〜5時間"</span>, <span class="st">"5時間〜"</span>)) <span class="sc">+</span></span>
<span id="cb27-14"><a></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb27-15"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-4">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-27-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="乗項付きの交互作用について" class="slide level2">
<h2>2乗項付きの交互作用について</h2>
<ul>
<li><strong>例1）</strong><span class="math inline">\(\hat{y} = \beta_0 + \beta_1 x + \beta_2 x^2\)</span>
<ul>
<li><span class="math inline">\(x\)</span>が1上がれば<span class="math inline">\(y\)</span>はどれほど上がるか（=<span class="math inline">\(x\)</span>の傾き係数は?）。
<ul>
<li>回帰式に<span class="math inline">\(x\)</span>は2回登場し、<span class="math inline">\(\beta_1 x + \beta_2 x^2 = (\beta_1 + \beta_2 x)x\)</span></li>
<li><span class="math inline">\(x\)</span>が1上がれば、<span class="math inline">\(y\)</span>は<span class="math inline">\((\beta_1 + \beta_2 x)\)</span>分上がる。</li>
<li><span class="math inline">\(x\)</span>が<span class="math inline">\(y\)</span>に与える影響は<span class="math inline">\(x\)</span>の値に依存する。</li>
<li><span class="math inline">\(\Rightarrow\)</span> 2乗項そのものが交差項と同じ</li>
</ul></li>
</ul></li>
<li><strong>例2）</strong><span class="math inline">\(\hat{y} = \beta_0 + \beta_1 x + \beta_2 x^2 + \beta_3 z + \gamma_1 x z + \gamma_2 x^2 z\)</span>
<ul>
<li><span class="math inline">\(x\)</span>が1上がれば<span class="math inline">\(y\)</span>はどれほど上がるか（=<span class="math inline">\(x\)</span>の傾き係数は?）。
<ul>
<li>回帰式に<span class="math inline">\(x\)</span>は4回登場し、<span class="math inline">\(\beta_1 x + \beta_2 x^2 + \gamma_1 x z + \gamma_2 x^2 z = (\beta_1 + \beta_2 x + \gamma_1 z + \gamma_2 xz)x\)</span></li>
<li><span class="math inline">\(x\)</span>が1上がれば、<span class="math inline">\(y\)</span>は<span class="math inline">\((\beta_1 + \beta_2 x + \gamma_1 z + \gamma_2 xz)\)</span>分上がる。</li>
<li><span class="math inline">\(x\)</span>が<span class="math inline">\(y\)</span>に与える影響は<span class="math inline">\(x\)</span>と<span class="math inline">\(z\)</span>の値に依存する。</li>
<li><span class="math inline">\(\Rightarrow\)</span> 2乗項付きの交互作用は三重交差項</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="限界効果" class="slide level2">
<h2>限界効果</h2>
<ul>
<li><code>youtube</code>が<code>diversity</code>に与える影響は<code>youtube</code>と<code>age</code>によって変わる。</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>ame <span class="ot">&lt;-</span> fit <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a></a>  <span class="fu">slopes</span>(<span class="at">variables =</span> <span class="st">"youtube"</span>, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">youtube =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">45</span>, <span class="dv">70</span>)))</span>
<span id="cb28-3"><a></a></span>
<span id="cb28-4"><a></a>ame</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 youtube age  Estimate Std. Error       z Pr(&gt;|z|)    S    2.5 %   97.5 %
       1  20  0.175667     0.0572  3.0693  0.00215  8.9  0.06349  0.28784
       1  45  0.129918     0.0284  4.5791  &lt; 0.001 17.7  0.07431  0.18553
       1  70  0.084169     0.0375  2.2422  0.02495  5.3  0.01059  0.15774
       2  20  0.132056     0.0389  3.3955  &lt; 0.001 10.5  0.05583  0.20828
       2  45  0.086988     0.0191  4.5501  &lt; 0.001 17.5  0.04952  0.12446
       2  70  0.041920     0.0239  1.7576  0.07881  3.7 -0.00483  0.08867
       3  20  0.088445     0.0229  3.8596  &lt; 0.001 13.1  0.04353  0.13336
       3  45  0.044058     0.0114  3.8741  &lt; 0.001 13.2  0.02177  0.06635
       3  70 -0.000329     0.0144 -0.0229  0.98176  0.0 -0.02852  0.02786
       4  20  0.044835     0.0187  2.4038  0.01622  5.9  0.00828  0.08139
       4  45  0.001129     0.0100  0.1128  0.91020  0.1 -0.01848  0.02074
       4  70 -0.042578     0.0172 -2.4718  0.01344  6.2 -0.07634 -0.00882
       5  20  0.001224     0.0308  0.0397  0.96832  0.0 -0.05918  0.06163
       5  45 -0.041801     0.0167 -2.5042  0.01227  6.3 -0.07452 -0.00908
       5  70 -0.084826     0.0293 -2.8986  0.00375  8.1 -0.14218 -0.02747
       6  20 -0.042387     0.0490 -0.8656  0.38671  1.4 -0.13836  0.05359
       6  45 -0.084731     0.0258 -3.2861  0.00102  9.9 -0.13527 -0.03419
       6  70 -0.127075     0.0430 -2.9552  0.00313  8.3 -0.21136 -0.04279
       7  20 -0.085997     0.0676 -1.2723  0.20328  2.3 -0.21848  0.04648
       7  45 -0.127661     0.0355 -3.5965  &lt; 0.001 11.6 -0.19723 -0.05809
       7  70 -0.169324     0.0578 -2.9309  0.00338  8.2 -0.28256 -0.05609

Term: youtube
Type:  response 
Comparison: dY/dX</code></pre>
</div>
</div>
</section>
<section id="限界効果の可視化" class="slide level2">
<h2>限界効果の可視化</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">コード</a></li><li><a href="#tabset-2-2">結果</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>ame <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">factor</span>(age,</span>
<span id="cb30-3"><a></a>                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">45</span>, <span class="dv">70</span>),</span>
<span id="cb30-4"><a></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"20歳"</span>, <span class="st">"45歳"</span>, <span class="st">"70歳"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb30-5"><a></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb30-6"><a></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb30-7"><a></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> youtube, <span class="at">y =</span> estimate,</span>
<span id="cb30-8"><a></a>                      <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb30-9"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"YouTube視聴時間"</span>, <span class="at">y =</span> <span class="st">"寛容性スコアの予測値と</span><span class="sc">\n</span><span class="st">95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb30-10"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb30-11"><a></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"使わない"</span>, <span class="st">"〜30分"</span>, <span class="st">"30分〜1時間"</span>, <span class="st">"1〜2時間"</span>, </span>
<span id="cb30-12"><a></a>                                <span class="st">"2〜3.5時間"</span>, <span class="st">"3.5〜5時間"</span>, <span class="st">"5時間〜"</span>)) <span class="sc">+</span></span>
<span id="cb30-13"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>age) <span class="sc">+</span></span>
<span id="cb30-14"><a></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb30-15"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-30-1.png" class="quarto-figure quarto-figure-center" width="2400"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="どう解釈するか45歳の例" class="slide level2">
<h2>どう解釈するか（45歳の例）</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="summary_files/figure-revealjs/unnamed-chunk-31-1.png" class="quarto-figure quarto-figure-center" width="1200"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li>YouTubeを全く見ない（<code>youtube</code> = 1）45歳の人における<code>youtube</code>の値が1単位上がる（=YouTubeを1日30分見るようになる）と、寛容性スコアが約0.13上がり、これは統計的に有意である。</li>
<li>YouTubeを30分未満見る（<code>youtube</code> = 2）45歳の人における<code>youtube</code>の値が1単位上がる（=YouTubeを1日30分〜1時間見るようになる）と、寛容性スコアが約0.85上がり、これは統計的に有意である。</li>
<li>YouTubeを1〜2時間見る（<code>youtube</code> = 4）45歳の人における<code>youtube</code>の値が1単位上がっても（=YouTubeを1日2〜3.5時間見るようになっても）、寛容性スコアが変わるとは言えない。</li>
<li>YouTubeを2〜3.5時間見る（<code>youtube</code> = 5）45歳の人における<code>youtube</code>の値が1単位上がる（=YouTubeを1日3.5〜5時間見るようになる）と、寛容性スコアが約0.04下がり、これは統計的に有意である。</li>
</ul>
</div></div>


</section></section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="Figs/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://www.jaysong.net/r4ps/" class="uri">https://www.jaysong.net/r4ps/</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/www\.jaysong\.net\/r4ps\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
                // target, if specified
                link.setAttribute("target", "_blank");
                if (link.getAttribute("rel") === null) {
                  link.setAttribute("rel", "noopener");
                }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
            let selectedAnnoteEl;
            const selectorForAnnotation = ( cell, annotation) => {
              let cellAttr = 'data-code-cell="' + cell + '"';
              let lineAttr = 'data-code-annotation="' +  annotation + '"';
              const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
              return selector;
            }
            const selectCodeLines = (annoteEl) => {
              const doc = window.document;
              const targetCell = annoteEl.getAttribute("data-target-cell");
              const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
              const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              const lines = annoteSpan.getAttribute("data-code-lines").split(",");
              const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
              })
              let top = null;
              let height = null;
              let parent = null;
              if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                  const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                  const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                  height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                  // cook up a div (if necessary) and position it 
                  let div = window.document.getElementById("code-annotation-line-highlight");
                  if (div === null) {
                    div = window.document.createElement("div");
                    div.setAttribute("id", "code-annotation-line-highlight");
                    div.style.position = 'absolute';
                    parent.appendChild(div);
                  }
                  div.style.top = top - 2 + "px";
                  div.style.height = height + 4 + "px";
                  div.style.left = 0;
                  let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                  if (gutterDiv === null) {
                    gutterDiv = window.document.createElement("div");
                    gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                    gutterDiv.style.position = 'absolute';
                    const codeCell = window.document.getElementById(targetCell);
                    const gutter = codeCell.querySelector('.code-annotation-gutter');
                    gutter.appendChild(gutterDiv);
                  }
                  gutterDiv.style.top = top - 2 + "px";
                  gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
              }
            };
            const unselectCodeLines = () => {
              const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
              elementsIds.forEach((elId) => {
                const div = window.document.getElementById(elId);
                if (div) {
                  div.remove();
                }
              });
              selectedAnnoteEl = undefined;
            };
              // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
          let throttle = false;
          let timer;
            return (...args) => {
              if(!throttle) { // first call gets through
                  fn.apply(this, args);
                  throttle = true;
              } else { // all the others get throttled
                  if(timer) clearTimeout(timer); // cancel #2
                  timer = setTimeout(() => {
                    fn.apply(this, args);
                    timer = throttle = false;
                  }, ms);
              }
            };
          }
            const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
            for (let i=0; i<annoteTargets.length; i++) {
              const annoteTarget = annoteTargets[i];
              const targetCell = annoteTarget.getAttribute("data-target-cell");
              const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
              const contentFn = () => {
                const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                if (content) {
                  const tipContent = content.cloneNode(true);
                  tipContent.classList.add("code-annotation-tip-content");
                  return tipContent.outerHTML;
                }
              }
              const config = {
                allowHTML: true,
                content: contentFn,
                onShow: (instance) => {
                  selectCodeLines(instance.reference);
                  instance.reference.classList.add('code-annotation-active');
                  window.tippy.hideAll();
                },
                onHide: (instance) => {
                  unselectCodeLines();
                  instance.reference.classList.remove('code-annotation-active');
                },
                maxWidth: 300,
                delay: [50, 0],
                duration: [200, 0],
                offset: [5, 10],
                arrow: true,
                appendTo: function(el) {
                  return el.parentElement.parentElement.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'light-border',
                placement: 'right',
                popperOptions: {
                  modifiers: [
                  {
                    name: 'flip',
                    options: {
                      flipVariations: false, // true by default
                      allowedAutoPlacements: ['right'],
                      fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                    },
                  },
                  {
                    name: 'preventOverflow',
                    options: {
                      mainAxis: false,
                      altAxis: false
                    }
                  }
                  ]        
                }      
              };
              window.tippy(annoteTarget, config); 
            }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>