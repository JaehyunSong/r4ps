<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for Political Science - 第8回講義資料</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Figs/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9TLN2VMPQD"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9TLN2VMPQD', { 'anonymize_ip': true});
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&amp;display=swap" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&amp;display=swap" rel="stylesheet"> 

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../Figs/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">R for Political Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">シラバス</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../../syllabus/syllabus_micro.html" rel="" target="">
 <span class="dropdown-text">[前期] ミクロ政治データ分析実習</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../syllabus/syllabus_macro.html" rel="" target="">
 <span class="dropdown-text">[後期] マクロ政治データ分析実習</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../syllabus/session.html" rel="" target="">
 <span class="dropdown-text">セッション情報</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-rの使い方" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Rの使い方</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-rの使い方">    
        <li>
    <a class="dropdown-item" href="../../intro/install.html" rel="" target="">
 <span class="dropdown-text">Rの導入</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/rstudio.html" rel="" target="">
 <span class="dropdown-text">RStudioの設定</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/filesystem.html" rel="" target="">
 <span class="dropdown-text">ファイル・システム</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/project.html" rel="" target="">
 <span class="dropdown-text">プロジェクト管理</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/file.html" rel="" target="">
 <span class="dropdown-text">ファイル管理</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/packages.html" rel="" target="">
 <span class="dropdown-text">パッケージ</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/homework.html" rel="" target="">
 <span class="dropdown-text">課題の取り組み方</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/faq.html" rel="" target="">
 <span class="dropdown-text">この授業の「あるある」</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--1" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">前期講義資料</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--1">    
        <li>
    <a class="dropdown-item" href="../../materials/micro/introduction.html" rel="" target="">
 <span class="dropdown-text">第1回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/r.html" rel="" target="">
 <span class="dropdown-text">第2回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/basic.html" rel="" target="">
 <span class="dropdown-text">第3回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/programming.html" rel="" target="">
 <span class="dropdown-text">第4回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/quarto.html" rel="" target="">
 <span class="dropdown-text">第5回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/dataset.html" rel="" target="">
 <span class="dropdown-text">第6回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/datatype.html" rel="" target="">
 <span class="dropdown-text">第7回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/datastructure.html" rel="" target="">
 <span class="dropdown-text">第8回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/handling1.html" rel="" target="">
 <span class="dropdown-text">第9回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/handling2.html" rel="" target="">
 <span class="dropdown-text">第10回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/handling3.html" rel="" target="">
 <span class="dropdown-text">第11回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/visualization1.html" rel="" target="">
 <span class="dropdown-text">第12回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/visualization2.html" rel="" target="">
 <span class="dropdown-text">第13回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/visualization3.html" rel="" target="">
 <span class="dropdown-text">第14回講義資料</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--2" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">後期講義資料</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--2">    
        <li>
    <a class="dropdown-item" href="../../materials/macro/introduction.html" rel="" target="">
 <span class="dropdown-text">第1回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/research_design.html" rel="" target="">
 <span class="dropdown-text">第2・3回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/descriptive_statistics.html" rel="" target="">
 <span class="dropdown-text">第4回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/inference.html" rel="" target="">
 <span class="dropdown-text">第5回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/nhts.html" rel="" target="">
 <span class="dropdown-text">第6回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/association.html" rel="" target="">
 <span class="dropdown-text">第7回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/regression1.html" rel="" target="">
 <span class="dropdown-text">第8回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/regression2.html" rel="" target="">
 <span class="dropdown-text">第9回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/reporting.html" rel="" target="">
 <span class="dropdown-text">第10回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/logit.html" rel="" target="">
 <span class="dropdown-text">第11回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/interaction.html" rel="" target="">
 <span class="dropdown-text">第12回講義資料</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--3" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">課題</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--3">    
        <li>
    <a class="dropdown-item" href="../../intro/homework.html" rel="" target="">
 <span class="dropdown-text">課題の取り組み方</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">ミクロ</li>
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW05.html" rel="" target="">
 <span class="dropdown-text">[前期] 第5回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW10.html" rel="" target="">
 <span class="dropdown-text">[前期] 第10回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW11.html" rel="" target="">
 <span class="dropdown-text">[前期] 第11回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW13.html" rel="" target="">
 <span class="dropdown-text">[前期] 第13回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW14.html" rel="" target="">
 <span class="dropdown-text">[前期] 第14回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_Final.html" rel="" target="">
 <span class="dropdown-text">[前期] 期末レポート</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">マクロ</li>
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW04.html" rel="" target="">
 <span class="dropdown-text">[後期] 第4回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW07.html" rel="" target="">
 <span class="dropdown-text">[後期] 第7回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW10.html" rel="" target="">
 <span class="dropdown-text">[後期] 第10回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW12.html" rel="" target="">
 <span class="dropdown-text">[後期] 第12回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_Final.html" rel="" target="">
 <span class="dropdown-text">[後期] 期末レポート</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://jupyter.cs.rcos.nii.ac.jp/" rel="" target=""><i class="bi bi-terminal" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.jaysong.net/RBook/" rel="" target=""><i class="bi bi-book" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../materials/micro/datastructure.html">第8回講義資料</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第1回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第2回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第3回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第4回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第5回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第6回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/datatype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第7回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/datastructure.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">第8回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/handling1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第9回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/handling2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第10回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/handling3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第11回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/visualization1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第12回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/visualization2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第13回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/micro/visualization3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第14回講義資料</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目次</h2>
   
  <ul>
  <li><a href="#データ構造とは" id="toc-データ構造とは" class="nav-link active" data-scroll-target="#データ構造とは">データ構造とは</a></li>
  <li><a href="#ベクトル" id="toc-ベクトル" class="nav-link" data-scroll-target="#ベクトル">ベクトル</a></li>
  <li><a href="#行列" id="toc-行列" class="nav-link" data-scroll-target="#行列">行列</a>
  <ul class="collapse">
  <li><a href="#行列の作成" id="toc-行列の作成" class="nav-link" data-scroll-target="#行列の作成">行列の作成</a></li>
  <li><a href="#行列の操作" id="toc-行列の操作" class="nav-link" data-scroll-target="#行列の操作">行列の操作</a></li>
  <li><a href="#行列の演算" id="toc-行列の演算" class="nav-link" data-scroll-target="#行列の演算">行列の演算</a></li>
  <li><a href="#配列" id="toc-配列" class="nav-link" data-scroll-target="#配列">配列</a></li>
  </ul></li>
  <li><a href="#データフレーム" id="toc-データフレーム" class="nav-link" data-scroll-target="#データフレーム">データ・フレーム</a>
  <ul class="collapse">
  <li><a href="#データフレームの作成" id="toc-データフレームの作成" class="nav-link" data-scroll-target="#データフレームの作成">データ・フレームの作成</a></li>
  <li><a href="#データフレームの確認" id="toc-データフレームの確認" class="nav-link" data-scroll-target="#データフレームの確認">データ・フレームの確認</a></li>
  <li><a href="#行の抽出" id="toc-行の抽出" class="nav-link" data-scroll-target="#行の抽出">行の抽出</a></li>
  <li><a href="#列の抽出" id="toc-列の抽出" class="nav-link" data-scroll-target="#列の抽出">列の抽出</a></li>
  </ul></li>
  <li><a href="#リスト" id="toc-リスト" class="nav-link" data-scroll-target="#リスト">リスト</a></li>
  <li><a href="#教科書" id="toc-教科書" class="nav-link" data-scroll-target="#教科書">教科書</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">第8回講義資料</h1>
<p class="subtitle lead">データ構造</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="スライド" class="level2 unlisted">
<h2 class="unlisted anchored" data-anchor-id="スライド">スライド</h2>
<p><a href="../../slides/micro/datastructure.html" class="btn btn-primary btn-sm" target="_blank" role="button"><i class="bi bi-window"></i> 新しいタブで開く</a></p>
<iframe class="slide-deck" src="../../slides/micro/datastructure.html" width="100%" style="aspect-ratio: 16 / 9.5;"></iframe>
</section>
<section id="データ構造とは" class="level2">
<h2 class="anchored" data-anchor-id="データ構造とは">データ構造とは</h2>
<p>　Rにおけるデータの最小単位はベクトルである<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>。そして、これらのベクトルが集合として行列や表などが出来上がる。ベクトルの集合の在り方をRでは<strong>データ構造 (data structure)</strong>と呼ぶ。</p>
<p>　たとえば、同じ長さのnumeric型（数値型）、またはcomplex型（複素数型）の縦ベクトルが横に並んでいる構造（<a href="#fig-structure-intro-matrix">図&nbsp;1</a>）をRではmatrix構造（行列構造）と呼ぶ。Matrix構造の場合「同じ長さ、かつnumeric/complex型の縦ベクトル」の集合と言えよう。データ型の制約のない「同じ長さの縦ベクトル」の集合はRでdata.frame構造（データフレーム構造）と呼ばれる。また、data.frame構造は各列には名前が付くといった特徴がある。</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 42.9%;justify-content: center;">
<div id="fig-structure-intro-matrix" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Figs/structure/matrix1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">図&nbsp;1: 行列構造の例</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 57.1%;justify-content: center;">
<div id="fig-structure-intro-df" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Figs/structure/df.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">図&nbsp;2: データフレーム構造の例</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>　本講義で使うデータ構造は主にベクトル (vector) とデータ・フレーム (data.frame) とその拡張版のティブル (tibble) のみであるため、行列 (matrix) 、配列 (array) 、リスト (array) の説明は割愛する。</p>
</section>
<section id="ベクトル" class="level2">
<h2 class="anchored" data-anchor-id="ベクトル">ベクトル</h2>
<p>　ベクトル構造は<strong>同じデータ型が一つ以上</strong>格納されているオブジェクトであり、これまで何回も登場したデータ構造である。ベクトルはRにおけるデータの最小単位である。Rには数百、数千種類のデータ構造が存在するが、これら全てのデータ構造の最小単位はベクトルである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 01</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>my_vec1 <span class="ot">&lt;-</span> <span class="st">"R is fun!"</span> <span class="co"># 長さ1のcharacter型ベクトル</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>my_vec1</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "R is fun!"</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 02</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>my_vec2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>) <span class="co"># 長さ5のnumeric型ベクトル</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>my_vec2</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 6 7</code></pre>
</div>
</div>
<p>　ベクトルを作成する際、注意しないといけないことは<strong>一つのベクトル内の全ての要素は同じデータ型</strong>である点である。もし、複数のデータ型が混在している場合、優先順位の高いデータ型へ強制的に変換される。頻繁に使われるデータ型の場合、優先順位はcharacter型 &gt; numeric型 &gt; logical型であり、character型の優先順位が最も高い。</p>
<p>　たとえば、character型とnumeric型の要素が混在したベクトルを考えてみよう。<code>my_vec3</code>は長さ6のベクトルであるが、2つのデータ型が混在しているため、character型が優先される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 03</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>my_vec3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>my_vec3</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "1" "2" "3"</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 04</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">class</span>(my_vec3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>　Numeric型とlogical型が混在している場合、logical型の要素はnumeric型へ変換される。変換される際、<code>TRUE</code>は1、<code>FALSE</code>は0に変換される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 05</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>my_vec4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>my_vec4</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 20  1  0</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 06</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">class</span>(my_vec4)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>　Character型とlogical型が混在している場合、logical型の要素はcharacter型へ変換される。変換される際、<code>TRUE</code>は<code>"TRUE"</code>、<code>FALSE</code>は<code>"FALSE"</code>に変換される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 07</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>my_vec5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Miyakura"</span>, <span class="st">"Seki"</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a>my_vec5</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Miyakura" "Seki"     "TRUE"     "FALSE"   </code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 08</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">class</span>(my_vec5)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>　その他、ベクトルの操作（演算、要素の抽出など）についてはこれまでの講義資料を参照すること。</p>
</section>
<section id="行列" class="level2">
<h2 class="anchored" data-anchor-id="行列">行列</h2>
<p>　行列構造とはnumeric型、またはcomplex型の縦ベクトルを横に並べたデータ構造である。以下の<code>my_mat1</code>は3行4列（3 <span class="math inline">\(\times\)</span> 4）の行列である。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 09</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>my_mat1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a>my_mat1</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
</div>
<p>　この<code>my_mat1</code>は長さ3のnumeric型<strong>縦</strong>ベクトルが4つ並んでいる。4つの縦ベクトルとは<code>c(1, 2, 3)</code>、<code>c(4, 5, 6)</code>、<code>c(7, 8, 9)</code>、<code>c(10, 11, 12)</code>である。他にも長さ4のnumeric型<strong>横</strong>ベクトルが3つ（<code>c(1, 4, 7, 10)</code>、<code>c(2, 5, 8, 11)</code>、<code>c(3, 6, 9, 12)</code>）積まれているとも読めるが、データ分析では一般的に縦ベクトルの集合として行列を捉える。</p>
<section id="行列の作成" class="level3">
<h3 class="anchored" data-anchor-id="行列の作成">行列の作成</h3>
<p>　行列を作成する際は<code>matrix()</code>関数を使用する。第1引数としてnumericまたはcomplex型ベクトル、<code>nrow</code>引数で行列の行数を指定する。たとえば、以下のような行列を作成し、<code>my_mat2</code>という名のオブジェクトとして作業環境内に格納するとしよう。</p>
<p><span class="math display">\[
\begin{bmatrix}
5 &amp; 2 &amp; 9 &amp; 6 \\
5 &amp; 4 &amp; -8 &amp; 2 \\
-3 &amp; 3 &amp; 0 &amp; 7
\end{bmatrix}
\]</span></p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 10</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>my_mat2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">7</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb19-2"><a href="#cb19-2"></a>my_mat2</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    5    2    9    6
[2,]    5    4   -8    2
[3,]   -3    3    0    7</code></pre>
</div>
</div>
<p>　第1引数はベクトルはベクトル構造のオブジェクトであるため、予めベクトルを作成し、ベクトル名を入れることも可能である。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 11</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>my_vec6 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="sc">-</span><span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">7</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a>my_mat3 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(my_vec6, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb21-3"><a href="#cb21-3"></a>my_mat3</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    5    2    9    6
[2,]    5    4   -8    2
[3,]   -3    3    0    7</code></pre>
</div>
</div>
<p>　ここで注意すべき点は要素が入る順番である。我々は通常「左から右へ」、「上から下へ」文字列を読むが、行列はその逆、つまり「上から下へ」、「左から右へ」の順番となる（<a href="#fig-structure-matrix-order">図&nbsp;3</a>）。行列が「<strong>縦</strong>ベクトルの集合」ということを意識すれば、予め混乱は避けられるだろう。</p>
<div id="fig-structure-matrix-order" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Figs/structure/matrix2.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">図&nbsp;3: 行列の要素の順番</figcaption>
</figure>
</div>
</section>
<section id="行列の操作" class="level3">
<h3 class="anchored" data-anchor-id="行列の操作">行列の操作</h3>
<p>　行列構造のデータは本講義では使用しないため、説明は割愛し、ここでは行列の確認と要素の抽出するコードのみ紹介する。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 12</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">class</span>(my_mat1) <span class="co"># my_mat1のデータ構造</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 13</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">dim</span>(my_mat1)   <span class="co"># 行列の行数と列数</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 14</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">nrow</span>(my_mat1)  <span class="co"># 行列の行数</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 15</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">ncol</span>(my_mat1)  <span class="co"># 行列の列数</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 16</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>my_mat1[<span class="dv">1</span>, ]   <span class="co"># my_matの1「行」目を抽出</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  4  7 10</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 17</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>my_mat1[, <span class="dv">3</span>]   <span class="co"># my_matの3「列」目を抽出</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7 8 9</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 18</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>my_mat1[<span class="dv">2</span>, <span class="dv">4</span>]  <span class="co"># my_matの2「行」、4「列」目を抽出</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</section>
<section id="行列の演算" class="level3">
<h3 class="anchored" data-anchor-id="行列の演算">行列の演算</h3>
<p>　行列構造のデータは本講義では使用しないため、説明は割愛するが、これらは線形代数を勉強する人には便利な演算子である。</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">演算子/関数</th>
<th style="text-align: left;">説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;">行列の足し算</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>-</code></td>
<td style="text-align: left;">行列の引き算</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%*%</code></td>
<td style="text-align: left;">行列の掛け算</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>/</code></td>
<td style="text-align: left;">行列の割り算</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>*</code></td>
<td style="text-align: left;">行列のアダマール積 (Hadamard product)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>t(オブジェクト名)</code></td>
<td style="text-align: left;">行列の転置</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>qr(オブジェクト名)$rank</code></td>
<td style="text-align: left;">行列の階数</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>solve(オブジェクト名)</code></td>
<td style="text-align: left;">逆行列</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>eigen(オブジェクト名)</code></td>
<td style="text-align: left;">行列の固有値</td>
</tr>
</tbody>
</table>
<p>　<code>solve()</code>と<code>eigen()</code>は正方行列 (<span class="math inline">\(n \times n\)</span>の行列)でないと使えないことに注意しよう。</p>
</section>
<section id="配列" class="level3">
<h3 class="anchored" data-anchor-id="配列">配列</h3>
<p>　行列と似たようなデータ構造として、配列（array）構造がある。これは<strong>同じ大きさ行列</strong>を重ねたものであり（<a href="#fig-structure-matrix-array">図&nbsp;4</a>）、行列は層 (layer) が1つのみの配列である。つまり、行列構造は配列構造の一種であり、実際、<code>class()</code>で行列構造のデータ構造を確認すると<code>"matrix"</code>だけでなく、<code>"array"</code>も同時に出力される。2次元である行列を重ねたものであるため、配列構造は3次元のデータ構造であり、要素抽出の際、<code>[x, y, z]</code>で指定する必要がある（3番目の<code>z</code>が配列の層 (layer)を意味する）。</p>
<div id="fig-structure-matrix-array" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Figs/structure/array.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">図&nbsp;4: 配列構造のイメージ</figcaption>
</figure>
</div>
</section>
</section>
<section id="データフレーム" class="level2">
<h2 class="anchored" data-anchor-id="データフレーム">データ・フレーム</h2>
<p>　データ・フレーム構造（data.frame）は行列構造と同様、縦ベクトルを横に並べたものである。しかし、以下の2点が異なる。</p>
<ol type="1">
<li>データ・フレーム構造の場合、すべてのベクトルが同じデータ型である必要がない。
<ul>
<li><a href="#fig-structure-df-image">図&nbsp;5</a> の場合、character型（1列目）とnumeric型（2、3、4列目）ベクトルが混在している。</li>
</ul></li>
<li>データ・フレーム構造の場合、各列に名前が付いている。
<ul>
<li><a href="#fig-structure-df-image">図&nbsp;5</a> の場合、Name、Foundation、Students、Facultiesが列名である。</li>
</ul></li>
</ol>
<div id="fig-structure-df-image" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Figs/structure/df.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">図&nbsp;5: 行列の要素の順番</figcaption>
</figure>
</div>
<p>　データ・フレーム構造は我々が頻繁に接する<strong>表形式データ</strong>、そのものである。前期・後期の講義全体を通じて最も頻繁に扱うこととなるデータ構造であるため、非常に重要なデータ構造である。詳しい操作方法は次回以降（データ・ハンドリング）の講義で解説するが、ここでは作成方法、確認方法、簡単な抽出方法について解説する。</p>
<section id="データフレームの作成" class="level3">
<h3 class="anchored" data-anchor-id="データフレームの作成">データ・フレームの作成</h3>
<p>　データ・フレームを作成する方法は大きく分けて2通りある。小さい表であれば（1）自分で作成することも可能だが、ある程度の規模のあるデータならダウンロードしたデータや表計算ソフト（Excel、Numbers、LibreOffice Calcなど）で作成した表を（2）読み込むこともできる。</p>
<p>　まずは、直接データ・フレームを作成する方法から紹介する。データ・フレームの作成には<code>data.frame()</code>、または<code>tibble()</code>関数を使用する。<code>data.frame()</code>はR内蔵関数であるが、<code>tibble()</code>関数は使用する前に予め{tidyverse}パッケージを読み込んでおく必要がある。<code>data.frame()</code>と<code>tibble()</code>は厳密には異なるデータ構造であるが、<code>tibble()</code>で作成した表がより汎用性が高いため、ここでは<code>tibble()</code>関数を使用したデータ・フレームの作成する方法を紹介する。</p>
<p>　まず、{tidyverse}パッケージを読み込む。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 19</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>　ここでは以下のような表を作成する。</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<div id="mkdixnhzed" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mkdixnhzed table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mkdixnhzed thead, #mkdixnhzed tbody, #mkdixnhzed tfoot, #mkdixnhzed tr, #mkdixnhzed td, #mkdixnhzed th {
  border-style: none;
}

#mkdixnhzed p {
  margin: 0;
  padding: 0;
}

#mkdixnhzed .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mkdixnhzed .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mkdixnhzed .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mkdixnhzed .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mkdixnhzed .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mkdixnhzed .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mkdixnhzed .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mkdixnhzed .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mkdixnhzed .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mkdixnhzed .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mkdixnhzed .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mkdixnhzed .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mkdixnhzed .gt_spanner_row {
  border-bottom-style: hidden;
}

#mkdixnhzed .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mkdixnhzed .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mkdixnhzed .gt_from_md > :first-child {
  margin-top: 0;
}

#mkdixnhzed .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mkdixnhzed .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mkdixnhzed .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mkdixnhzed .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mkdixnhzed .gt_row_group_first td {
  border-top-width: 2px;
}

#mkdixnhzed .gt_row_group_first th {
  border-top-width: 2px;
}

#mkdixnhzed .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mkdixnhzed .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mkdixnhzed .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mkdixnhzed .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mkdixnhzed .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mkdixnhzed .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mkdixnhzed .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mkdixnhzed .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mkdixnhzed .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mkdixnhzed .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mkdixnhzed .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mkdixnhzed .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mkdixnhzed .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mkdixnhzed .gt_left {
  text-align: left;
}

#mkdixnhzed .gt_center {
  text-align: center;
}

#mkdixnhzed .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mkdixnhzed .gt_font_normal {
  font-weight: normal;
}

#mkdixnhzed .gt_font_bold {
  font-weight: bold;
}

#mkdixnhzed .gt_font_italic {
  font-style: italic;
}

#mkdixnhzed .gt_super {
  font-size: 65%;
}

#mkdixnhzed .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mkdixnhzed .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mkdixnhzed .gt_indent_1 {
  text-indent: 5px;
}

#mkdixnhzed .gt_indent_2 {
  text-indent: 10px;
}

#mkdixnhzed .gt_indent_3 {
  text-indent: 15px;
}

#mkdixnhzed .gt_indent_4 {
  text-indent: 20px;
}

#mkdixnhzed .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Name">Name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Foundation">Foundation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Students">Students</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Name" class="gt_row gt_left">Kansai</td>
<td headers="Foundation" class="gt_row gt_right">1886</td>
<td headers="Students" class="gt_row gt_right">27736</td></tr>
    <tr><td headers="Name" class="gt_row gt_left">Kangaku</td>
<td headers="Foundation" class="gt_row gt_right">1889</td>
<td headers="Students" class="gt_row gt_right">23671</td></tr>
    <tr><td headers="Name" class="gt_row gt_left">Doshisha</td>
<td headers="Foundation" class="gt_row gt_right">1875</td>
<td headers="Students" class="gt_row gt_right">25974</td></tr>
    <tr><td headers="Name" class="gt_row gt_left">Ritsumeikan</td>
<td headers="Foundation" class="gt_row gt_right">1900</td>
<td headers="Students" class="gt_row gt_right">32467</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>　この表は3つの縦ベクトルの集合であり、それぞれの名前は<code>Name</code>、<code>Foundation</code>、<code>Students</code>である。<code>tibble()</code>関数内に<code>列名 = 縦ベクトル</code>を入れるだけである。作成したデータ・フレームを<code>my_df1</code>という名のオブジェクトとして格納し、その中身を確認してみよう。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 20</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>my_df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Name       =</span> <span class="fu">c</span>(<span class="st">"Kansai"</span>, <span class="st">"Kangaku"</span>, <span class="st">"Doshisha"</span>, <span class="st">"Ritsumeikan"</span>),</span>
<span id="cb38-2"><a href="#cb38-2"></a>                 <span class="at">Foundation =</span> <span class="fu">c</span>(<span class="dv">1886</span>, <span class="dv">1889</span>, <span class="dv">1875</span>, <span class="dv">1900</span>),</span>
<span id="cb38-3"><a href="#cb38-3"></a>                 <span class="at">Students   =</span> <span class="fu">c</span>(<span class="dv">27736</span>, <span class="dv">23671</span>, <span class="dv">25974</span>, <span class="dv">32467</span>))</span>
<span id="cb38-4"><a href="#cb38-4"></a></span>
<span id="cb38-5"><a href="#cb38-5"></a>my_df1</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  Name        Foundation Students
  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;
1 Kansai            1886    27736
2 Kangaku           1889    23671
3 Doshisha          1875    25974
4 Ritsumeikan       1900    32467</code></pre>
</div>
</div>
<p>　データ・フレーム構造はベクトルの集合であるため、ベクトルから作成することも出来る。以下のような表を作成するとする。</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<div id="inqnyizweh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#inqnyizweh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#inqnyizweh thead, #inqnyizweh tbody, #inqnyizweh tfoot, #inqnyizweh tr, #inqnyizweh td, #inqnyizweh th {
  border-style: none;
}

#inqnyizweh p {
  margin: 0;
  padding: 0;
}

#inqnyizweh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#inqnyizweh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#inqnyizweh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#inqnyizweh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#inqnyizweh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#inqnyizweh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#inqnyizweh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#inqnyizweh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#inqnyizweh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#inqnyizweh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#inqnyizweh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#inqnyizweh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#inqnyizweh .gt_spanner_row {
  border-bottom-style: hidden;
}

#inqnyizweh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#inqnyizweh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#inqnyizweh .gt_from_md > :first-child {
  margin-top: 0;
}

#inqnyizweh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#inqnyizweh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#inqnyizweh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#inqnyizweh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#inqnyizweh .gt_row_group_first td {
  border-top-width: 2px;
}

#inqnyizweh .gt_row_group_first th {
  border-top-width: 2px;
}

#inqnyizweh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#inqnyizweh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#inqnyizweh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#inqnyizweh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#inqnyizweh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#inqnyizweh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#inqnyizweh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#inqnyizweh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#inqnyizweh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#inqnyizweh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#inqnyizweh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#inqnyizweh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#inqnyizweh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#inqnyizweh .gt_left {
  text-align: left;
}

#inqnyizweh .gt_center {
  text-align: center;
}

#inqnyizweh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#inqnyizweh .gt_font_normal {
  font-weight: normal;
}

#inqnyizweh .gt_font_bold {
  font-weight: bold;
}

#inqnyizweh .gt_font_italic {
  font-style: italic;
}

#inqnyizweh .gt_super {
  font-size: 65%;
}

#inqnyizweh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#inqnyizweh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#inqnyizweh .gt_indent_1 {
  text-indent: 5px;
}

#inqnyizweh .gt_indent_2 {
  text-indent: 10px;
}

#inqnyizweh .gt_indent_3 {
  text-indent: 15px;
}

#inqnyizweh .gt_indent_4 {
  text-indent: 20px;
}

#inqnyizweh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Name">Name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Pop">Pop</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Area">Area</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Food">Food</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Name" class="gt_row gt_left">Tokyo</td>
<td headers="Pop" class="gt_row gt_right">1396</td>
<td headers="Area" class="gt_row gt_right">2194</td>
<td headers="Food" class="gt_row gt_left">Monja</td></tr>
    <tr><td headers="Name" class="gt_row gt_left">Nagoya</td>
<td headers="Pop" class="gt_row gt_right">755</td>
<td headers="Area" class="gt_row gt_right">5173</td>
<td headers="Food" class="gt_row gt_left">Tebasaki</td></tr>
    <tr><td headers="Name" class="gt_row gt_left">Osaka</td>
<td headers="Pop" class="gt_row gt_right">882</td>
<td headers="Area" class="gt_row gt_right">1899</td>
<td headers="Food" class="gt_row gt_left">Takoyaki</td></tr>
    <tr><td headers="Name" class="gt_row gt_left">Fukuoka</td>
<td headers="Pop" class="gt_row gt_right">511</td>
<td headers="Area" class="gt_row gt_right">4987</td>
<td headers="Food" class="gt_row gt_left">Ramen</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>　今回はそれぞれの列に外とするベクトルを予め作成し、そのベクトルを<code>tibble()</code>関数の引数として使用する。作成したオブジェクトは<code>my_df2</code>と名付けよう。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 21</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>Name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Tokyo"</span>, <span class="st">"Nagoya"</span>, <span class="st">"Osaka"</span>, <span class="st">"Fukuoka"</span>)</span>
<span id="cb40-2"><a href="#cb40-2"></a>Food <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Monja"</span>, <span class="st">"Tebasaki"</span>, <span class="st">"Takoyaki"</span>, <span class="st">"Ramen"</span>)</span>
<span id="cb40-3"><a href="#cb40-3"></a>Pop  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1396</span>, <span class="dv">755</span>, <span class="dv">882</span>, <span class="dv">511</span>)</span>
<span id="cb40-4"><a href="#cb40-4"></a>Area <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2194</span>, <span class="dv">5173</span>, <span class="dv">1899</span>, <span class="dv">4987</span>)</span>
<span id="cb40-5"><a href="#cb40-5"></a></span>
<span id="cb40-6"><a href="#cb40-6"></a>my_df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(Name, Pop, Area, Food)</span>
<span id="cb40-7"><a href="#cb40-7"></a></span>
<span id="cb40-8"><a href="#cb40-8"></a>my_df2</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  Name      Pop  Area Food    
  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
1 Tokyo    1396  2194 Monja   
2 Nagoya    755  5173 Tebasaki
3 Osaka     882  1899 Takoyaki
4 Fukuoka   511  4987 Ramen   </code></pre>
</div>
</div>
<p>　以上のような数行 <span class="math inline">\(\times\)</span> 数列の表なら手打ちで作成することもできるが、数百〜数万人のデータなどを手打ちで作成することはほぼ不可能であろう。この場合、予め表計算ソフトを使って表を作成しておくか、既に公開されている表形式データを使うこととなる。別途のファイルとして保存されている表形式ファイル（<code>.csv</code>ファイル）の読み込みには<code>read_csv()</code>関数を使う<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>。<code>read_csv()</code>は{tidyverse}パッケージを読み込んでおかないと使えないため、予め読んでおこう。今回は既に読み込み済みであるため不要である。</p>
<p>　第6回の講義で作成したデータ（<code>BuildingData.csv</code>）がプロジェクト・フォルダー内の<code>Data</code>フォルダー内に保存されている場合、以下のように読み込む。読み込んだデータを使うためには作業環境内にオブジェクトとして格納しておく必要があり、今回は<code>my_df3</code>と名付ける。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 22</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>my_df3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/BuildingData.csv"</span>) <span class="co"># 第6回のデータ</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="データフレームの確認" class="level3">
<h3 class="anchored" data-anchor-id="データフレームの確認">データ・フレームの確認</h3>
<p>　作業環境に格納されたデータ・フレームを出力する場合は<code>オブジェクト名</code>を入力する。データが画面に収まらない場合は一部の列が省略される場合があり、出力される行数はデフォルト設定では10行である。以下でも最初の10行しか出力されているが、出力画面の1行目の情報（<code># A tibble: 47 × 5</code>）から全47行のデータであることが分かる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 23</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>my_df3</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 47 × 5
      ID Pref   Finance Over65 Turnout
   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1     1 北海道   0.462   32.3    58.8
 2     2 青森県   0.358   33.7    52.9
 3     3 岩手県   0.372   33.8    60.4
 4     4 宮城県   0.626   28.4    55.9
 5     5 秋田県   0.322   37.6    58.2
 6     6 山形県   0.379   34.0    64.3
 7     7 福島県   0.545   31.8    58.0
 8     8 茨城県   0.656   30.3    52.5
 9     9 栃木県   0.648   29.6    53.1
10    10 群馬県   0.638   30.9    53.9
# ℹ 37 more rows</code></pre>
</div>
</div>
<p>　全ての行を出力するためには<code>print()</code>関数を使用し、<code>n = Inf</code>を指定する。ちなみに<code>n = 20</code>にすると、最初の20行が出力される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 24</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">print</span>(my_df3, <span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 47 × 5
      ID Pref     Finance Over65 Turnout
   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1     1 北海道     0.462   32.3    58.8
 2     2 青森県     0.358   33.7    52.9
 3     3 岩手県     0.372   33.8    60.4
 4     4 宮城県     0.626   28.4    55.9
 5     5 秋田県     0.322   37.6    58.2
 6     6 山形県     0.379   34.0    64.3
 7     7 福島県     0.545   31.8    58.0
 8     8 茨城県     0.656   30.3    52.5
 9     9 栃木県     0.648   29.6    53.1
10    10 群馬県     0.638   30.9    53.9
11    11 埼玉県     0.770   27.3    54.0
12    12 千葉県     0.778   28.0    53.6
13    13 東京都     1.15    23.3    57.2
14    14 神奈川県   0.889   25.9    56.3
15    15 新潟県     0.475   33.0    63.2
16    16 富山県     0.485   32.9    55.7
17    17 石川県     0.518   30.2    57.1
18    18 福井県     0.421   31.1    57.8
19    19 山梨県     0.409   31.1    60.6
20    20 長野県     0.528   32.3    59.8
21    21 岐阜県     0.559   31.1    58.1
22    22 静岡県     0.726   30.7    54.8
23    23 愛知県     0.912   25.8    56.0
24    24 三重県     0.609   30.6    56.2
25    25 滋賀県     0.576   26.7    57.3
26    26 京都府     0.595   29.5    56.3
27    27 大阪府     0.792   27.7    56.2
28    28 兵庫県     0.649   29.3    54.3
29    29 奈良県     0.437   31.7    59.1
30    30 和歌山県   0.338   33.4    58.2
31    31 鳥取県     0.287   32.5    58.2
32    32 島根県     0.266   34.7    61.6
33    33 岡山県     0.535   30.7    50.9
34    34 広島県     0.618   29.8    52.1
35    35 山口県     0.457   34.8    49.7
36    36 徳島県     0.327   34.3    53.9
37    37 香川県     0.487   32.1    56.1
38    38 愛媛県     0.448   33.4    55.0
39    39 高知県     0.274   35.6    57.3
40    40 福岡県     0.658   28.2    52.1
41    41 佐賀県     0.356   30.9    58.5
42    42 長崎県     0.348   33.2    56.9
43    43 熊本県     0.427   31.7    56.4
44    44 大分県     0.395   33.5    57.3
45    45 宮崎県     0.358   32.9    53.7
46    46 鹿児島県   0.353   32.7    57.7
47    47 沖縄県     0.375   22.7    54.9</code></pre>
</div>
</div>
<p>　データの最初のx行を出力するには<code>print()</code>関数と<code>n</code>引数の組み合わせでも出来るが、他にも<code>head()</code>関数がある。これは<strong>最初</strong>の6行のみ出力してくれる関数である。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 25</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">head</span>(my_df3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
     ID Pref   Finance Over65 Turnout
  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1     1 北海道   0.462   32.3    58.8
2     2 青森県   0.358   33.7    52.9
3     3 岩手県   0.372   33.8    60.4
4     4 宮城県   0.626   28.4    55.9
5     5 秋田県   0.322   37.6    58.2
6     6 山形県   0.379   34.0    64.3</code></pre>
</div>
</div>
<p>　<code>head()</code>関数は<code>print()</code>関数同様、<code>n</code>引数で出力行数を変えることが出来る。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 26</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">head</span>(my_df3, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
      ID Pref   Finance Over65 Turnout
   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1     1 北海道   0.462   32.3    58.8
 2     2 青森県   0.358   33.7    52.9
 3     3 岩手県   0.372   33.8    60.4
 4     4 宮城県   0.626   28.4    55.9
 5     5 秋田県   0.322   37.6    58.2
 6     6 山形県   0.379   34.0    64.3
 7     7 福島県   0.545   31.8    58.0
 8     8 茨城県   0.656   30.3    52.5
 9     9 栃木県   0.648   29.6    53.1
10    10 群馬県   0.638   30.9    53.9</code></pre>
</div>
</div>
<p>　<code>head()</code>関数の友達として<code>tail()</code>関数がある。これは<strong>最後</strong>の6行を出力をしてくれる関数である。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 27</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">tail</span>(my_df3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
     ID Pref     Finance Over65 Turnout
  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1    42 長崎県     0.348   33.2    56.9
2    43 熊本県     0.427   31.7    56.4
3    44 大分県     0.395   33.5    57.3
4    45 宮崎県     0.358   32.9    53.7
5    46 鹿児島県   0.353   32.7    57.7
6    47 沖縄県     0.375   22.7    54.9</code></pre>
</div>
</div>
<p>　むろん、<code>head()</code>関数同様、<code>n</code>引数で出力行数を変えることが出来る。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 28</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">tail</span>(my_df3, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
     ID Pref     Finance Over65 Turnout
  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1    45 宮崎県     0.358   32.9    53.7
2    46 鹿児島県   0.353   32.7    57.7
3    47 沖縄県     0.375   22.7    54.9</code></pre>
</div>
</div>
<p>　もう一つ便利な関数はデータの中身を一切出力せず、列名（変数名）のみを出力してくれる<code>names()</code>関数である。結果としてcharacter型ベクトルが返される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 29</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="fu">names</span>(my_df3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ID"      "Pref"    "Finance" "Over65"  "Turnout"</code></pre>
</div>
</div>
<p>　<code>my_df3</code>のデータ構造はデータ・フレームであるが、これは<code>class()</code>関数で確認できる。詳細は割愛するがオブジェクトは複数のクラスを持つことが許容されており、<code>my_df3</code>の場合は4つのクラスの中に<code>"data.frame"</code>が含まれているため、データ・フレーム構造であることが分かる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 30</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">class</span>(my_df3) <span class="co"># my_df2のデータ構造</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame" </code></pre>
</div>
</div>
<p>　実際、あるオブジェクトがデータ・フレームかどうかを判定する<code>is.data.frame()</code>関数を使うと、<code>my_df3</code>がデータ・フレームであることが分かる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 31</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="fu">is.data.frame</span>(my_df3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>　他にもデータ・フレームの特徴を調べる関数としてデータ・フレームの大きさを計算する関数がある。データ・フレームの大きさとは行数と列数を意味し、それぞれ<code>nrow()</code>と<code>ncol()</code>関数で計算することができる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 32</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">nrow</span>(my_df1) <span class="co"># my_df1の行数</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 33</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="fu">ncol</span>(my_df2) <span class="co"># my_df2の列数</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>　<code>dim()</code>関数を使えば行数と列数を同時に出力され、長さ2のnumeric型ベクトルが返される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 34</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="fu">dim</span>(my_df3) <span class="co"># my_df3の大きさ</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 47  5</code></pre>
</div>
</div>
</section>
<section id="行の抽出" class="level3">
<h3 class="anchored" data-anchor-id="行の抽出">行の抽出</h3>
<p>　ベクトルは1次元であるに対し、データ・フレームは行と列といった2次元構造であるため、行・列を抽出するためには行、列をそれぞれ指定する必要がある。ベクトルと同様、オブジェクト名の後ろに<code>[]</code>を付けることは変わらないが、データ・フレームは2次元構造であるため、<code>[行, 列]</code>で指定する必要がある。</p>
<p>　たとえば、<code>my_df3</code>の27行目を抽出するためには<code>my_df3[27, ]</code>と入力する。列の指定がされていない場合は全ての列が抽出される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 35</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>my_df3[<span class="dv">27</span>, ]</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
     ID Pref   Finance Over65 Turnout
  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1    27 大阪府   0.792   27.7    56.2</code></pre>
</div>
</div>
<p>　抽出された行のデータ構造はデータ・フレームである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 36</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">class</span>(my_df3[<span class="dv">27</span>, ])</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>　行の位置を長さ2以上のベクトルにすることで、複数行の抽出もできる。<code>c()</code>関数や<code>:</code>演算子が使用可能である。以下の例は<code>my_df3</code>から13、27、40行目を抽出するコードである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 37</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>my_df3[<span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">27</span>, <span class="dv">40</span>), ]</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
     ID Pref   Finance Over65 Turnout
  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1    13 東京都   1.15    23.3    57.2
2    27 大阪府   0.792   27.7    56.2
3    40 福岡県   0.658   28.2    52.1</code></pre>
</div>
</div>
<p>　抽出された行のデータ構造はデータ・フレームである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 38</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="fu">class</span>(my_df3[<span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">27</span>, <span class="dv">40</span>), ])</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
</section>
<section id="列の抽出" class="level3">
<h3 class="anchored" data-anchor-id="列の抽出">列の抽出</h3>
<p>　列の抽出も行の抽出方法と同じである。たとえば、<code>my_df3</code>の2列目を抽出したい場合は以下のように入力する。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 39</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>my_df3[, <span class="dv">2</span>] <span class="co"># my_df3[, "Pref"] でもOK</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 47 × 1
   Pref  
   &lt;chr&gt; 
 1 北海道
 2 青森県
 3 岩手県
 4 宮城県
 5 秋田県
 6 山形県
 7 福島県
 8 茨城県
 9 栃木県
10 群馬県
# ℹ 37 more rows</code></pre>
</div>
</div>
<p>　抽出された列のデータ構造はデータ・フレームである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 40</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="fu">class</span>(my_df3[, <span class="dv">2</span>])</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>　<code>c()</code>や<code>:</code>演算子を使うことで複数列の抽出も可能であり、抽出後のデータ構造もデータ・フレームである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 41</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="co"># my_df3[, c("Pref", "Over65", "Turnout")] でもOK</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>my_df3[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)]</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 47 × 3
   Pref   Over65 Turnout
   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 北海道   32.3    58.8
 2 青森県   33.7    52.9
 3 岩手県   33.8    60.4
 4 宮城県   28.4    55.9
 5 秋田県   37.6    58.2
 6 山形県   34.0    64.3
 7 福島県   31.8    58.0
 8 茨城県   30.3    52.5
 9 栃木県   29.6    53.1
10 群馬県   30.9    53.9
# ℹ 37 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="fu">class</span>(my_df3[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)])</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>　列抽出の場合、<code>[]</code>以外にも<code>$</code>を使うこともできる。<code>[]</code>は抽出する行・列の<strong>位置</strong>を指定するが、<code>$</code>を使う場合は<strong>列名</strong>を指定する。たとえば、<code>my_df3</code>の<code>Pref</code>列を抽出する場合は以下のように入力する。この場合は複数列の抽出はできないことに注意すること。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 42</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>my_df3<span class="sc">$</span>Pref</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "北海道"   "青森県"   "岩手県"   "宮城県"   "秋田県"   "山形県"  
 [7] "福島県"   "茨城県"   "栃木県"   "群馬県"   "埼玉県"   "千葉県"  
[13] "東京都"   "神奈川県" "新潟県"   "富山県"   "石川県"   "福井県"  
[19] "山梨県"   "長野県"   "岐阜県"   "静岡県"   "愛知県"   "三重県"  
[25] "滋賀県"   "京都府"   "大阪府"   "兵庫県"   "奈良県"   "和歌山県"
[31] "鳥取県"   "島根県"   "岡山県"   "広島県"   "山口県"   "徳島県"  
[37] "香川県"   "愛媛県"   "高知県"   "福岡県"   "佐賀県"   "長崎県"  
[43] "熊本県"   "大分県"   "宮崎県"   "鹿児島県" "沖縄県"  </code></pre>
</div>
</div>
<p>　もう一つ注意すべき点としては<code>$</code>で抽出された列はデータ・フレームでなく、ベクトルである点だ。実際、<code>my_df3$Pref</code>のデータ構造を調べてみると、character型と出力される。データ構造がベクトルの場合はデータ型が出力される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 43</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="fu">class</span>(my_df3<span class="sc">$</span>Pref)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>　<code>is.vector()</code>関数で<code>my_df3$Pref</code>がベクトルかどうかを調べることもできる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 44</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a><span class="fu">is.vector</span>(my_df3<span class="sc">$</span>Pref)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>　このように、抽出方法によって返り値のデータ構造が異なる。要約すると、（1）<code>[]</code>を用いた抽出は返り値がデータ・フレームであり、（2）<code>$</code>を用いた抽出は返り値がベクトルである点だ。</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">コード</th>
<th style="text-align: left;">意味</th>
<th style="text-align: left;">返り値</th>
<th style="text-align: left;">備考</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>データ・フレーム名[i, ]</code></td>
<td style="text-align: left;"><code>i</code>番目の行を抽出</td>
<td style="text-align: left;">データ・フレーム</td>
<td style="text-align: left;"><code>i</code>は任意のベクトル</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>データ・フレーム名[, i]</code></td>
<td style="text-align: left;"><code>i</code>番目の列を抽出</td>
<td style="text-align: left;">データ・フレーム</td>
<td style="text-align: left;"><code>i</code>は任意のベクトル</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>データ・フレーム名$列名</code></td>
<td style="text-align: left;">当該列を抽出</td>
<td style="text-align: left;"><strong>ベクトル</strong></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="リスト" class="level2">
<h2 class="anchored" data-anchor-id="リスト">リスト</h2>
<p>　最後に紹介するリスト構造はあらゆるデータ構造が格納できるデータ構造である。つまり、様々なデータ構造のオブジェクトが一つのオブジェクトとしてまとまったものであえる<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>。実は、Rに存在する多くのオブジェクトはリストである。したがって、Rでデータを自由自在に操るためにはリストの知識が必須である。ただし、本講義（後期を含む）ではリストは使わないため、詳細な説明は省略する。</p>
<p>　リスト構造オブジェクトを作成する場合は<code>list()</code>関数を使用し、中には格納するオブジェクト名を入力する。それぞれのオブジェクトに名前を付ける場合は<code>名前 = オブジェクト名</code>と入力する。ここではこれまで作成してきた<code>my_vec1</code>、<code>my_vec4</code>、<code>my_mat1</code>、<code>my_df1</code>をまとめた<code>my_list</code>を作成し、それぞれ<code>Vector1</code>、<code>Vector2</code>、<code>Matrix</code>、<code>DF</code>と名付ける。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 45</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Vector1 =</span> my_vec1,</span>
<span id="cb89-2"><a href="#cb89-2"></a>                <span class="at">Vector2 =</span> my_vec4,</span>
<span id="cb89-3"><a href="#cb89-3"></a>                <span class="at">Matrix  =</span> my_mat1,</span>
<span id="cb89-4"><a href="#cb89-4"></a>                <span class="at">DF      =</span> my_df1)</span>
<span id="cb89-5"><a href="#cb89-5"></a></span>
<span id="cb89-6"><a href="#cb89-6"></a>my_list</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$Vector1
[1] "R is fun!"

$Vector2
[1] 10 20  1  0

$Matrix
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12

$DF
# A tibble: 4 × 3
  Name        Foundation Students
  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;
1 Kansai            1886    27736
2 Kangaku           1889    23671
3 Doshisha          1875    25974
4 Ritsumeikan       1900    32467</code></pre>
</div>
</div>
<p>　<code>class()</code>関数で<code>my_list</code>のデータ構造を確認してみるとリスト構造であることが分かる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 46</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a><span class="fu">class</span>(my_list)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
<p>　また、<code>length()</code>関数を使えば、当該オブジェクト内にいくつのオブジェクトが入っているかが分かる。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 47</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="fu">length</span>(my_list)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>　リスト構造のオブジェクトから任意の要素（オブジェクト）を抽出する場合は<code>[]</code>でなく、<code>[[]]</code>を使用する。<code>リスト名[[i]]</code>の場合、リストの<code>i</code>番目要素が抽出される。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 48</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>my_list[[<span class="dv">2</span>]] <span class="co"># my_listから2番目のオブジェクトを抽出</span></span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 20  1  0</code></pre>
</div>
</div>
<p>　もし、各オブジェクトに名前が付いている場合は<code>[[]]</code>内に位置でなく、要素名で抽出することもできる。<code>my_list</code>内の<code>DF</code>と名付けられた要素を抽出するためには以下のように入力する。要素名は<code>"</code>で囲む必要がある。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 49</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a>my_list[[<span class="st">"DF"</span>]]</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  Name        Foundation Students
  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;
1 Kansai            1886    27736
2 Kangaku           1889    23671
3 Doshisha          1875    25974
4 Ritsumeikan       1900    32467</code></pre>
</div>
</div>
<p>　また、データフレームの列抽出のように、<code>$</code>を使うこともできる。ただし、当該要素に名前が付いてある必要があり、要素名は<code>"</code>で囲む必要がない。以下のコードは<code>my_list</code>から<code>Matrix</code>と名付けられた要素を抽出するコードである。</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Code 50</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a>my_list<span class="sc">$</span>Matrix</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
</div>
</section>
<section id="教科書" class="level2">
<h2 class="anchored" data-anchor-id="教科書">教科書</h2>
<ul>
<li>『私たちのR: ベストプラクティスの探求』<a href="https://www.jaysong.net/RBook/datastructure.html">第9章: データ構造</a></li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p><code>"Cat"</code>や<code>5</code>も長さ1のベクトルであり、原子ベクトル (atomic vector) とも呼ばれ、中でもnumeric型の長さ1のベクトルはスカラー (scalar) とも呼ばれる。<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Excleで作成されたファイル（<code>.xlsx</code>、または<code>.xls</code>）の場合、{readxl}パッケージの<code>read_excle()</code>関数を使用する。Stataファイル（<code>.dta</code>）は{haven}パッケージの<code>read_dta()</code>を使う。<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>リストの中にリストを入れることも出来る。<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/www\.jaysong\.net\/r4ps\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, <a href="https://www.jaysong.net" target="_blank">Jaehyun Song</a>. Powered by <a href="https://quarto.org/" target="_blank">Quarto</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.jaysong.net">
      <i class="bi bi-house-fill" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JaehyunSong">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>