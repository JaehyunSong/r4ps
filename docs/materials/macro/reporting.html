<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for Political Science - 第10回講義資料</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Figs/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9TLN2VMPQD"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9TLN2VMPQD', { 'anonymize_ip': true});
</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&amp;display=swap" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&amp;display=swap" rel="stylesheet"> 

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../Figs/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">R for Political Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">シラバス</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../../syllabus/syllabus_micro.html" rel="" target="">
 <span class="dropdown-text">[前期] ミクロ政治データ分析実習</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../syllabus/syllabus_macro.html" rel="" target="">
 <span class="dropdown-text">[後期] マクロ政治データ分析実習</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../syllabus/session.html" rel="" target="">
 <span class="dropdown-text">セッション情報</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-rの使い方" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Rの使い方</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-rの使い方">    
        <li>
    <a class="dropdown-item" href="../../intro/install.html" rel="" target="">
 <span class="dropdown-text">Rの導入</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/rstudio.html" rel="" target="">
 <span class="dropdown-text">RStudioの設定</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/filesystem.html" rel="" target="">
 <span class="dropdown-text">ファイル・システム</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/project.html" rel="" target="">
 <span class="dropdown-text">プロジェクト管理</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/file.html" rel="" target="">
 <span class="dropdown-text">ファイル管理</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/packages.html" rel="" target="">
 <span class="dropdown-text">パッケージ</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/homework.html" rel="" target="">
 <span class="dropdown-text">課題の取り組み方</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../intro/faq.html" rel="" target="">
 <span class="dropdown-text">この授業の「あるある」</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--1" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">前期講義資料</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--1">    
        <li>
    <a class="dropdown-item" href="../../materials/micro/introduction.html" rel="" target="">
 <span class="dropdown-text">第1回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/r.html" rel="" target="">
 <span class="dropdown-text">第2回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/basic.html" rel="" target="">
 <span class="dropdown-text">第3回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/programming.html" rel="" target="">
 <span class="dropdown-text">第4回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/quarto.html" rel="" target="">
 <span class="dropdown-text">第5回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/dataset.html" rel="" target="">
 <span class="dropdown-text">第6回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/datatype.html" rel="" target="">
 <span class="dropdown-text">第7回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/datastructure.html" rel="" target="">
 <span class="dropdown-text">第8回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/handling1.html" rel="" target="">
 <span class="dropdown-text">第9回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/handling2.html" rel="" target="">
 <span class="dropdown-text">第10回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/handling3.html" rel="" target="">
 <span class="dropdown-text">第11回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/visualization1.html" rel="" target="">
 <span class="dropdown-text">第12回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/visualization2.html" rel="" target="">
 <span class="dropdown-text">第13回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/micro/visualization3.html" rel="" target="">
 <span class="dropdown-text">第14回講義資料</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--2" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">後期講義資料</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--2">    
        <li>
    <a class="dropdown-item" href="../../materials/macro/introduction.html" rel="" target="">
 <span class="dropdown-text">第1回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/research_design.html" rel="" target="">
 <span class="dropdown-text">第2・3回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/descriptive_statistics.html" rel="" target="">
 <span class="dropdown-text">第4回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/inference.html" rel="" target="">
 <span class="dropdown-text">第5回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/nhts.html" rel="" target="">
 <span class="dropdown-text">第6回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/association.html" rel="" target="">
 <span class="dropdown-text">第7回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/regression1.html" rel="" target="">
 <span class="dropdown-text">第8回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/regression2.html" rel="" target="">
 <span class="dropdown-text">第9回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/reporting.html" rel="" target="">
 <span class="dropdown-text">第10回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/logit.html" rel="" target="">
 <span class="dropdown-text">第11回講義資料</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../materials/macro/interaction.html" rel="" target="">
 <span class="dropdown-text">第12回講義資料</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--3" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">課題</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--3">    
        <li>
    <a class="dropdown-item" href="../../intro/homework.html" rel="" target="">
 <span class="dropdown-text">課題の取り組み方</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">ミクロ</li>
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW05.html" rel="" target="">
 <span class="dropdown-text">[前期] 第5回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW10.html" rel="" target="">
 <span class="dropdown-text">[前期] 第10回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW11.html" rel="" target="">
 <span class="dropdown-text">[前期] 第11回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW13.html" rel="" target="">
 <span class="dropdown-text">[前期] 第13回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_HW14.html" rel="" target="">
 <span class="dropdown-text">[前期] 第14回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Micro_Final.html" rel="" target="">
 <span class="dropdown-text">[前期] 期末レポート</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">マクロ</li>
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW04.html" rel="" target="">
 <span class="dropdown-text">[後期] 第4回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW07.html" rel="" target="">
 <span class="dropdown-text">[後期] 第7回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW10.html" rel="" target="">
 <span class="dropdown-text">[後期] 第10回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW12.html" rel="" target="">
 <span class="dropdown-text">[後期] 第12回課題</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../HW/Macro_HW13.html" rel="" target="">
 <span class="dropdown-text">[後期] 第13回課題</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://jupyter.cs.rcos.nii.ac.jp/" rel="" target=""><i class="bi bi-terminal" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.jaysong.net/RBook/" rel="" target=""><i class="bi bi-book" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../materials/macro/reporting.html">第10回講義資料</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第1回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/research_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第2・3回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/descriptive_statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第4回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第5回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/nhts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第6回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/association.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第7回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/regression1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第8回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/regression2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第9回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/reporting.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">第10回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/logit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第11回講義資料</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/macro/interaction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第12回講義資料</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目次</h2>
   
  <ul>
  <li><a href="#分析結果をどう示すか" id="toc-分析結果をどう示すか" class="nav-link active" data-scroll-target="#分析結果をどう示すか">分析結果をどう示すか</a></li>
  <li><a href="#回帰表" id="toc-回帰表" class="nav-link" data-scroll-target="#回帰表">回帰表</a>
  <ul class="collapse">
  <li><a href="#単一モデルの例" id="toc-単一モデルの例" class="nav-link" data-scroll-target="#単一モデルの例">単一モデルの例</a></li>
  <li><a href="#複数モデルの例" id="toc-複数モデルの例" class="nav-link" data-scroll-target="#複数モデルの例">複数モデルの例</a></li>
  <li><a href="#回帰表の可視化" id="toc-回帰表の可視化" class="nav-link" data-scroll-target="#回帰表の可視化">回帰表の可視化</a></li>
  </ul></li>
  <li><a href="#回帰分析結果の可視化" id="toc-回帰分析結果の可視化" class="nav-link" data-scroll-target="#回帰分析結果の可視化">回帰分析結果の可視化</a></li>
  <li><a href="#信頼区間の話" id="toc-信頼区間の話" class="nav-link" data-scroll-target="#信頼区間の話">信頼区間の話</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">第10回講義資料</h1>
<p class="subtitle lead">分析結果の報告</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="スライド" class="level2 unlisted">
<h2 class="unlisted anchored" data-anchor-id="スライド">スライド</h2>
<p><a href="../../slides/macro/reporting.html" class="btn btn-primary btn-sm" target="_blank" role="button"><i class="bi bi-window"></i> 新しいタブで開く</a></p>
<iframe class="slide-deck" src="../../slides/macro/reporting.html" width="100%" style="aspect-ratio: 16 / 9.2;"></iframe>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
解説は作成中です。
</div>
</div>
<div class="callout-body-container callout-body">
<p>授業日まで完成します…!!!!!</p>
</div>
</div>
</section>
<section id="分析結果をどう示すか" class="level2">
<h2 class="anchored" data-anchor-id="分析結果をどう示すか">分析結果をどう示すか</h2>
<p>　前回までは線形回帰分析の理論、推定、解釈方法を紹介したが、この分析結果をレポートや論文に提示する場合はどうすれば良いだろうか。分析手法ごとに報告方法は異なるが、本講義では<strong>線形回帰分析</strong>に焦点を当てる<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>。</p>
<p>　それでは本日の実習で使用するパッケージとデータを読み込んでおこう。馴染みの{tidyverse}と{modelsummary}に加え、今回は{marginaleffects}というパッケージも使用する。宋がこの授業のためにセットアップしたJDCat分析ツールであれば、既にインストールされているが、自前のPCにインストールしたR + RStudioを使用する場合、コンソール上で<code>install.packages("marginaleffects")</code>と入力し、インストールしてから読み込んでおこう。</p>
<p>　データは<code>M1.csv</code>であり、LMSから入手可能だ。<code>read_csv()</code>内のパスは適宜修正すること。読み込んだデータは<code>df</code>と名付け、作業環境上に格納する。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/M1.csv"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>　このデータは<a href="https://www.jaysong.net">ある暇な研究者</a>が集めたM-1グランプリのデータの<strong>一部</strong>だ。フルバージョンのデータは<a href="https://github.com/JaehyunSong/M-1_Grand_Pix">ここ</a>から入手できる。データは60行8列であり、各変数の詳細は以下の通りだ。</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">変数名</th>
<th style="text-align: left;">説明</th>
<th style="text-align: left;">備考</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>No</code></td>
<td style="text-align: left;">第X回大会</td>
<td style="text-align: left;">第13回（2017年）から</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Year</code></td>
<td style="text-align: left;">大会年度</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Name</code></td>
<td style="text-align: left;">コンビ名</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Duration</code></td>
<td style="text-align: left;">結成からの経過年数</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>First</code></td>
<td style="text-align: left;">初出場ダミー</td>
<td style="text-align: left;">1 = 初出場 / 0 = その他</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Final</code></td>
<td style="text-align: left;">ファイナルステージへの進出有無</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Order</code></td>
<td style="text-align: left;">出場順番</td>
<td style="text-align: left;">1から10</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Score_Mean</code></td>
<td style="text-align: left;">平均得点</td>
<td style="text-align: left;">7人の審査委員からの評価の平均値</td>
</tr>
</tbody>
</table>
<p>　分析に入る前にデータの記述統計を計算する。{summarytools}パッケージの<code>descr()</code>を使用するが、1回使うためにわざわざ{summarytools}を読み込むのも面倒なので、<code>summarytools::descr()</code>で関数を呼び出そう<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  summarytools<span class="sc">::</span><span class="fu">descr</span>(<span class="at">stats =</span> <span class="fu">c</span>(<span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"min"</span>, <span class="st">"max"</span>, <span class="st">"n.valid"</span>),</span>
<span id="cb2-3"><a href="#cb2-3"></a>                      <span class="at">transpose =</span> <span class="cn">TRUE</span>, <span class="at">order =</span> <span class="st">"p"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Descriptive Statistics  
df  
N: 50  

                      Mean   Std.Dev       Min       Max   N.Valid
---------------- --------- --------- --------- --------- ---------
              No     15.00      1.43     13.00     17.00     50.00
            Year   2019.00      1.43   2017.00   2021.00     50.00
        Duration     10.76      3.74      2.00     16.00     50.00
           First      0.52      0.50      0.00      1.00     50.00
           Final      0.30      0.46      0.00      1.00     50.00
           Order      5.50      2.90      1.00     10.00     50.00
      Score_Mean     91.20      2.40     84.86     97.29     50.00</code></pre>
</div>
</div>
<p>　本日の内容は分析結果をどう報告するかに関するものなので、予めいくつかの回帰モデルを推定しておこう。今回は平均得点（<code>Score_Mean</code>）を応答変数とした線形回帰モデルを推定する。説明変数は出場順番（<code>Order</code>）、初出場ダミー（<code>First</code>）、芸歴（<code>Duration</code>）の3つを用意する。出場順番（<code>Order</code>）のみ投入した単回帰モデルを<code>fit1</code>、初出場ダミー（<code>First</code>）を加えたものを<code>fit2</code>、全て投入したモデルを<code>fit3</code>と名付ける。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>fit1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Score_Mean <span class="sc">~</span> Order, <span class="at">data =</span> df)</span>
<span id="cb4-2"><a href="#cb4-2"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Score_Mean <span class="sc">~</span> Order <span class="sc">+</span> First, <span class="at">data =</span> df)</span>
<span id="cb4-3"><a href="#cb4-3"></a>fit3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Score_Mean <span class="sc">~</span> Order <span class="sc">+</span> First <span class="sc">+</span> Duration, <span class="at">data =</span> df)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="回帰表" class="level2">
<h2 class="anchored" data-anchor-id="回帰表">回帰表</h2>
<section id="単一モデルの例" class="level3">
<h3 class="anchored" data-anchor-id="単一モデルの例">単一モデルの例</h3>
<p>　回帰分析の推定結果（切片や傾きの点推定値、標準誤差、信頼区間、<span class="math inline">\(p\)</span>値、決定係数など）は<code>summary()</code>関数で簡単に確認できる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">summary</span>(fit3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Score_Mean ~ Order + First + Duration, data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-6.3582 -1.2054  0.3995  1.0814  5.6779 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 88.82624    1.42843  62.184  &lt; 2e-16 ***
Order        0.31226    0.11427   2.733  0.00889 ** 
First       -0.52116    0.67304  -0.774  0.44269    
Duration     0.08592    0.09234   0.930  0.35700    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.276 on 46 degrees of freedom
Multiple R-squared:  0.1564,    Adjusted R-squared:  0.1014 
F-statistic: 2.843 on 3 and 46 DF,  p-value: 0.04794</code></pre>
</div>
</div>
<p>　しかし、これは<strong>分析する側</strong>が結果を確認するために用意されたものであり、「他人に見せる」ために用意されたものではない。レポートや論文に推定結果を示す場合は表を使う場合が多いが、<code>summary()</code>関数から得られたものはあくまでの文字列のみだ。ここで便利なのが{modelsummary}パッケージである。使い方は簡単で<code>modelsummary(回帰オブジェクト名)</code>のみで良い。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">modelsummary</span>(fit1)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">89.627</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.696)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Order</td>
<td style="text-align: center;">0.286</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">(0.112)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
</tr>
<tr class="even">
<td style="text-align: left;">AIC</td>
<td style="text-align: center;">228.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIC</td>
<td style="text-align: center;">233.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Log.Lik.</td>
<td style="text-align: center;">−111.072</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: center;">6.486</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: center;">2.23</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>　一発でかなりきれいな表ができた。デフォルトでは切片と傾き係数の点推定値と標準誤差（カッコ内）が表示される。また、分析に使用されたサンプルサイズ（Num.Obs.）や適合度指標（決定係数（R2）、調整済み決定係数（R2 Adj.））なども表示される。これでも十分良いが、ここからはより自分好みの表にするためにいくつかカスタマイズしてみよう。</p>
<p>　その前に前提知識として<code>modelsummary()</code>では各変数に対応する統計量が2行構成になっていることを意識する必要がある。デフォルトだと1行目は点推定値、2行目はその標準誤差である。<code>modelsummary()</code>関数では<code>estimate</code>（1行目）と<code>statistic</code>（2行目）引数で出力される統計量を変更することができる。デフォルトだと<code>estimate</code>は点推定値（<code>"{estimate}"</code>）、<code>statistic</code>は標準誤差（<code>"{std.error}"</code>）になっている。つまり、<code>modelsummary(オブジェクト名)</code>は<code>modelsummary(オブジェクト名, estiamte = "{estimate}", statistic = "{std.error}")</code>と同じコードだ。このように<code>"{統計量}"</code>の形式で表示する統計量が選択できる。たとえば、<span class="math inline">\(p\)</span>値は<code>"{p.value}"</code>、95%信頼区間の下限は<code>"{conf.low}"</code>、上限は<code>"{conf.high}"</code>だ<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>。もし、特定の行を消したい場合は<code>NULL</code>を割り当てる。</p>
<p>　それではいくつかの例を確認してみよう。まずは標準誤差の代わりに<span class="math inline">\(p\)</span>値を表示する例からだ。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">modelsummary</span>(fit1, <span class="at">statistic =</span> <span class="st">"({p.value})"</span>, <span class="at">note =</span> <span class="st">"注：カッコ内はp値"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">89.627</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(&lt;0.001)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Order</td>
<td style="text-align: center;">0.286</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">(0.014)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
</tr>
<tr class="even">
<td style="text-align: left;">AIC</td>
<td style="text-align: center;">228.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIC</td>
<td style="text-align: center;">233.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Log.Lik.</td>
<td style="text-align: center;">−111.072</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: center;">6.486</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: center;">2.23</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><sup></sup> 注：カッコ内はp値</td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>　切片（(Intercept)）の<span class="math inline">\(p\)</span>値が<code>&lt;0.001</code>と表示されているが、これは<span class="math inline">\(p\)</span>値が0.001より小さい、つまり非常に小さいことを意味する。これなら<span class="math inline">\(\alpha = 0.001\)</span>で検定を行っても統計的に有意であると判定できる水準である。また、<code>note</code>引数で表の下に注も付けることができる。2行目の統計量が何の統計量か分からない人もいるかも知れないので、このように付けておくことをおすすめする。</p>
<p>　次の例は、点推定値と標準誤差を一行にまとめる例だ。たとえば「点推定値 (標準誤差)」のようにまとめるとする。2行目（<code>statistics</code>）には<code>NULL</code>を割り当てて各変数の2行目を削除し、1行目（<code>estimate</code>）は<code>"{estimate} ({std.error})"</code>と指定すれば良い。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">modelsummary</span>(fit1, </span>
<span id="cb9-2"><a href="#cb9-2"></a>             <span class="at">estimate  =</span> <span class="st">"{estimate} ({std.error})"</span>,</span>
<span id="cb9-3"><a href="#cb9-3"></a>             <span class="at">statistic =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-4"><a href="#cb9-4"></a>             <span class="at">note      =</span> <span class="st">"注：カッコ内は標準誤差"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">89.627 (0.696)</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;">Order</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">0.286 (0.112)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
</tr>
<tr class="even">
<td style="text-align: left;">AIC</td>
<td style="text-align: center;">228.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIC</td>
<td style="text-align: center;">233.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Log.Lik.</td>
<td style="text-align: center;">−111.072</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: center;">6.486</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: center;">2.23</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><sup></sup> 注：カッコ内は標準誤差</td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>　また、以下のように標準誤差を90%信頼区間に変えることもできる。デフォルトでは95%信頼区間が表示されるので、90%を使いたい場合は<code>conf_level</code>を0.9に変える必要がある。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">modelsummary</span>(fit1, </span>
<span id="cb10-2"><a href="#cb10-2"></a>             <span class="at">conf_level =</span> <span class="fl">0.9</span>,</span>
<span id="cb10-3"><a href="#cb10-3"></a>             <span class="at">estimate   =</span> <span class="st">"{estimate}"</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>             <span class="at">statistic  =</span> <span class="st">"[{conf.low}, {conf.high}]"</span>,</span>
<span id="cb10-5"><a href="#cb10-5"></a>             <span class="at">note       =</span> <span class="st">"注：カッコ内は90%信頼区間"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">89.627</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">[88.460, 90.793]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Order</td>
<td style="text-align: center;">0.286</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">[0.097, 0.474]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
</tr>
<tr class="even">
<td style="text-align: left;">AIC</td>
<td style="text-align: center;">228.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIC</td>
<td style="text-align: center;">233.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Log.Lik.</td>
<td style="text-align: center;">−111.072</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: center;">6.486</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: center;">2.23</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><sup></sup> 注：カッコ内は90%信頼区間</td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<p>　モデルの当てはまりの良さ、評価指標として本講義では決定係数（<span class="math inline">\(R^2\)</span>）と調整済み決定係数（Adjusted <span class="math inline">\(R^2\)</span>）を紹介した。これらの統計量は適合度指標（goodness of fit; gof）と呼ばれるが、分析手法によって使用可能な適合度指標が異なる。{modelsummary}の<code>get_gof()</code>関数を使えば、使用可能な適合度指標が出力される。以下は<code>fit3</code>の適合度指標を出力するコードだ。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">get_gof</span>(fit3)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       aic      bic r.squared adj.r.squared     rmse nobs        F    logLik
1 229.9754 239.5355 0.1564347     0.1014196 2.183251   50 2.843485 -109.9877</code></pre>
</div>
</div>
<p>　基本的には上記のすべての適合度指標が<code>modelsummary()</code>で出力されるが、<code>gof_map</code>引数で一部だけ出力させることもできる。今回のような線形回帰分析ならサンプルサイズ（<code>"nobs"</code>）、決定係数（<code>r.squared</code>）、調整済み決定係数（<code>"adj.r.squared"</code>）程度で十分だろう。それではこの3つの指標のみ出してみよう。3つの指標となるので<code>c()</code>でcharacter型ベクトルを割り当てれば良い。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>fit3 <span class="sc">|&gt;</span> <span class="co"># パイプ演算子も使用可</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">modelsummary</span>(</span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="at">estimate  =</span> <span class="st">"{estimate} ({p.value})"</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="at">statistic =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="at">gof_map   =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>),</span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="at">note      =</span> <span class="st">"注：カッコ内はp値"</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  )</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">88.826 (&lt;0.001)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Order</td>
<td style="text-align: center;">0.312 (0.009)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">First</td>
<td style="text-align: center;">−0.521 (0.443)</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;">Duration</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">0.086 (0.357)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.156</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
</tr>
</tbody><tfoot>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> 注：カッコ内はp値</td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</section>
<section id="複数モデルの例" class="level3">
<h3 class="anchored" data-anchor-id="複数モデルの例">複数モデルの例</h3>
<p>　一つの表に複数の推定結果を並べることもでいる。方法は回帰オブジェクトを<code>list()</code>でまとめるだけだ。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(fit1, fit2, fit3),</span>
<span id="cb14-2"><a href="#cb14-2"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;&nbsp;(2)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;&nbsp;(3)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">89.627</td>
<td style="text-align: center;">89.953</td>
<td style="text-align: center;">88.826</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.696)</td>
<td style="text-align: center;">(0.757)</td>
<td style="text-align: center;">(1.428)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Order</td>
<td style="text-align: center;">0.286</td>
<td style="text-align: center;">0.292</td>
<td style="text-align: center;">0.312</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.112)</td>
<td style="text-align: center;">(0.112)</td>
<td style="text-align: center;">(0.114)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">First</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">−0.699</td>
<td style="text-align: center;">−0.521</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">(0.644)</td>
<td style="text-align: center;">(0.673)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Duration</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">0.086</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">(0.092)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
<td style="text-align: center;">0.141</td>
<td style="text-align: center;">0.156</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
<td style="text-align: center;">0.104</td>
<td style="text-align: center;">0.101</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>　自動的に（1）、（2）、…のようにモデル名が付くが<code>"モデル名" = オブジェクト名</code>のように書くと任意のモデル名も指定できる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(<span class="st">"Model 1"</span> <span class="ot">=</span> fit1, <span class="st">"Model 2"</span> <span class="ot">=</span> fit2, <span class="st">"Model 3"</span> <span class="ot">=</span> fit3),</span>
<span id="cb15-2"><a href="#cb15-2"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Model 1</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;Model 2</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;Model 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: center;">89.627</td>
<td style="text-align: center;">89.953</td>
<td style="text-align: center;">88.826</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.696)</td>
<td style="text-align: center;">(0.757)</td>
<td style="text-align: center;">(1.428)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Order</td>
<td style="text-align: center;">0.286</td>
<td style="text-align: center;">0.292</td>
<td style="text-align: center;">0.312</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.112)</td>
<td style="text-align: center;">(0.112)</td>
<td style="text-align: center;">(0.114)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">First</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">−0.699</td>
<td style="text-align: center;">−0.521</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">(0.644)</td>
<td style="text-align: center;">(0.673)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Duration</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">0.086</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">(0.092)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
<td style="text-align: center;">0.141</td>
<td style="text-align: center;">0.156</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
<td style="text-align: center;">0.104</td>
<td style="text-align: center;">0.101</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>　やや話がずれるが、表示される変数名を変えることもできる。変数名のままになると読者は「この変数って何？」と思うかも知れない。いきなり表を見せつけられても解釈ができる表が良い表なので、なるべく元の変数名ではなく、ちゃんと言葉で書いておこう。変数名の修正は<code>coef_rename</code>引数で調整でき、書き方は<code>"元の変数名" = "新しい変数名"</code>である。複数の変数名を変更する場合、<code>c()</code>でまとめる。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(fit1, fit2, fit3),</span>
<span id="cb16-2"><a href="#cb16-2"></a>             <span class="at">coef_rename =</span> <span class="fu">c</span>(<span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"切片"</span>,</span>
<span id="cb16-3"><a href="#cb16-3"></a>                             <span class="st">"Order"</span>       <span class="ot">=</span> <span class="st">"出場順番"</span>,</span>
<span id="cb16-4"><a href="#cb16-4"></a>                             <span class="st">"First"</span>       <span class="ot">=</span> <span class="st">"初出場ダミー"</span>,</span>
<span id="cb16-5"><a href="#cb16-5"></a>                             <span class="st">"Duration"</span>    <span class="ot">=</span> <span class="st">"結成からの経過年数"</span>),</span>
<span id="cb16-6"><a href="#cb16-6"></a>             <span class="at">gof_map     =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;&nbsp;(2)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;&nbsp;(3)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">切片</td>
<td style="text-align: center;">89.627</td>
<td style="text-align: center;">89.953</td>
<td style="text-align: center;">88.826</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.696)</td>
<td style="text-align: center;">(0.757)</td>
<td style="text-align: center;">(1.428)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">出場順番</td>
<td style="text-align: center;">0.286</td>
<td style="text-align: center;">0.292</td>
<td style="text-align: center;">0.312</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.112)</td>
<td style="text-align: center;">(0.112)</td>
<td style="text-align: center;">(0.114)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">初出場ダミー</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">−0.699</td>
<td style="text-align: center;">−0.521</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">(0.644)</td>
<td style="text-align: center;">(0.673)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">結成からの経過年数</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">0.086</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">(0.092)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.119</td>
<td style="text-align: center;">0.141</td>
<td style="text-align: center;">0.156</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.101</td>
<td style="text-align: center;">0.104</td>
<td style="text-align: center;">0.101</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="回帰表の可視化" class="level3">
<h3 class="anchored" data-anchor-id="回帰表の可視化">回帰表の可視化</h3>
<p>　余談だが、回帰表も図にすることができる。最近の政治学では回帰表を使う人も多いが、図で回帰表を示す人も急増している。ここでは{modelsummary}の<code>modelplot()</code>関数を紹介しよう。使い方は<code>modelsummary()</code>と非常に似ており、まず<code>modelplot()</code>内に回帰オブジェクト名を入れておけばそれっぽい図が生成される。</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="annotated-cell-14"><pre class="sourceCode numberSource r code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-14-1"><a href="#annotated-cell-14-1"></a><span class="fu">modelplot</span>(<span class="fu">list</span>(<span class="st">"Model 1"</span> <span class="ot">=</span> fit1, <span class="st">"Model 2"</span> <span class="ot">=</span> fit2, <span class="st">"Model 3"</span> <span class="ot">=</span> fit3),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="1">1</button><span id="annotated-cell-14-2" class="code-annotation-target"><a href="#annotated-cell-14-2"></a>          <span class="at">coef_omit =</span> <span class="st">"(Intercept)"</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="2">2</button><span id="annotated-cell-14-3" class="code-annotation-target"><a href="#annotated-cell-14-3"></a>          <span class="at">coef_map  =</span> <span class="fu">c</span>(<span class="st">"Duration"</span>, <span class="st">"First"</span>, <span class="st">"Order"</span>)) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="3">3</button><span id="annotated-cell-14-4" class="code-annotation-target"><a href="#annotated-cell-14-4"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-14" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="2" data-code-annotation="1" data-code-cell="annotated-cell-14">切片を表示しない</span>
</dd>
<dt data-target-cell="annotated-cell-14" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="3" data-code-annotation="2" data-code-cell="annotated-cell-14">表示順番を「下」からDuraion、First、Orderの順に</span>
</dd>
<dt data-target-cell="annotated-cell-14" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="4" data-code-annotation="3" data-code-cell="annotated-cell-14">x = 0に破線を引く</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="600"></p>
</figure>
</div>
</div>
</div>
<p>　<code>modelplot()</code>から作成された図は{ggplot2}ベースなので<code>+</code>でレイヤーの追加および調整できる。本講義の履修者は{ggplot2}なしでは生きていけない人のはずなので非常に嬉しい知らせだろう。<code>modelplot()</code>の詳細はコンソール上で<code>?modelplot</code>を入力してヘルプを見るか<a href="https://modelsummary.com/vignettes/modelplot.html">公式ページ</a>で確認してみよう。他にも{<a href="https://cran.r-project.org/web/packages/coefplot/index.html">coefplot</a>}も人気だ<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>。</p>
</section>
</section>
<section id="回帰分析結果の可視化" class="level2">
<h2 class="anchored" data-anchor-id="回帰分析結果の可視化">回帰分析結果の可視化</h2>
<p>可視化の手順</p>
<p>{marginaleffects}と{ggplot2}パッケージを使用（{ggplot2}は{tidyverse}と同時に自動的に読み込まれる）</p>
<ol type="1">
<li><code>predictions()</code>関数で予測値を計算し、オブジェクトとして格納
<ul>
<li>表形式オブジェクトとして格納される。</li>
</ul></li>
<li>予測値・限界効果オブジェクトの加工（ラベル付け/factor化）
<ul>
<li>予測値/限界効果は<code>estimate</code>列</li>
<li>95%信頼区間の下限と上限は<code>conf.low</code>と<code>conf.high</code>列</li>
</ul></li>
<li>{ggplot2}を用いた作図
<ul>
<li>予測値 + 95%信頼区間</li>
<li>横軸上の値が少ない場合、<code>geom_pointrange()</code></li>
<li>横軸上の値が多い場合、<code>geom_line()</code> + <code>geom_ribbon()</code></li>
</ul></li>
</ol>
<p>今後紹介するロジスティック回帰分析の場合、<code>predictions()</code>関数を使うと予測「確率」が表示される。また、交差項を含むモデルの場合は予測値・予測確率以外にも<code>slopes()</code>関数で限界効果を計算し、可視化する必要がある。いずれも今後の講義で紹介する。</p>
<p>予測値の計算（<code>fit3</code>の場合）</p>
<ul>
<li><strong>例）</strong>初出場ダミー（<code>First</code>）の値が0の場合と1の場合の、<code>Score_Mean</code>の予測値は?</li>
</ul>
<p><span class="math display">\[
\widehat{\mbox{Score\_Mean}} = 89.605 + 0.258 \cdot \mbox{Order} - 0.963 \cdot \mbox{First} + 0.076 \cdot \mbox{Duration}.
\]</span></p>
<ul>
<li><code>Order</code>と<code>Duration</code>は平均値（それぞれ5.5、10.6）に固定し、<code>First</code>だけ0と1を入れる。</li>
</ul>
<p>計算例</p>
<ul>
<li>初出場（<code>First = 1</code>）の場合
<ul>
<li>89.605 + 0.256 <span class="math inline">\(\times\)</span> 5.5 - 0.963 <span class="math inline">\(\times\)</span> 1 + 0.076 <span class="math inline">\(\times\)</span> 10.6 <span class="math inline">\(\simeq\)</span> 90.856</li>
</ul></li>
<li>初出場ではない（<code>First = 0</code>）場合
<ul>
<li>89.605 + 0.256 <span class="math inline">\(\times\)</span> 5.5 - 0.963 <span class="math inline">\(\times\)</span> 0 + 0.076 <span class="math inline">\(\times\)</span> 10.6 <span class="math inline">\(\simeq\)</span> 91.819</li>
</ul></li>
<li>{marginaleffects}の<code>predictions()</code>関数を使えば簡単に計算可能</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>新しいオブジェクト名 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(回帰オブジェクト名,</span>
<span id="cb17-2"><a href="#cb17-2"></a>                                 <span class="at">newdata =</span> <span class="fu">datagrid</span>(変数 <span class="ot">=</span> 値))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>予測値の計算（<code>fit3</code>利用）</p>
<ul>
<li><strong>例）</strong>初出場ダミー（<code>First</code>）の値が0の場合と1の場合の、<code>Score_Mean</code>の予測値を計算し、<code>fit3_pred1</code>という名のオブジェクトとして格納</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>fit3_pred1 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(fit3,</span>
<span id="cb18-2"><a href="#cb18-2"></a>                          <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">First =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)))</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>fit3_pred1</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 First Estimate Std. Error   z Pr(&gt;|z|)   S 2.5 % 97.5 % Order Duration
     0     91.5      0.476 192   &lt;0.001 Inf  90.5   92.4   5.5     10.8
     1     90.9      0.456 199   &lt;0.001 Inf  90.1   91.8   5.5     10.8

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, Score_Mean, Order, Duration, First 
Type:  response </code></pre>
</div>
</div>
<ul>
<li><code>Estimate</code>列が予測値、<code>2.5%</code>と<code>97.5%</code>列が95%信頼区間の下限と上限</li>
<li><code>First</code>以外の変数は平均値に固定される。</li>
</ul>
<p>平均値以外に固定する方法</p>
<ul>
<li><strong>例）</strong>初出場ダミー（<code>First</code>）の値が0の場合と1の場合の、<code>Score_Mean</code>の予測値を計算し、<code>fit3_pred2</code>という名のオブジェクトとして格納
<ul>
<li>ただし、出場順番は5番目（<code>Order = 5</code>）、結成からの年数は5年（<code>Duration = 5</code>）と固定する。</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>fit3_pred2 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(fit3,</span>
<span id="cb20-2"><a href="#cb20-2"></a>                          <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">First    =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-3"><a href="#cb20-3"></a>                                             <span class="at">Order    =</span> <span class="dv">5</span>,</span>
<span id="cb20-4"><a href="#cb20-4"></a>                                             <span class="at">Duration =</span> <span class="dv">5</span>))</span>
<span id="cb20-5"><a href="#cb20-5"></a></span>
<span id="cb20-6"><a href="#cb20-6"></a>fit3_pred2</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 First Order Duration Estimate Std. Error   z Pr(&gt;|z|)   S 2.5 % 97.5 %
     0     5        5     90.8      0.793 114   &lt;0.001 Inf  89.3   92.4
     1     5        5     90.3      0.639 141   &lt;0.001 Inf  89.0   91.5

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, Score_Mean, First, Order, Duration 
Type:  response </code></pre>
</div>
</div>
<p>作図の際の注意事項</p>
<ul>
<li><code>fit3_pred2</code>で表示される列名は「本当の」列名ではない!!
<ul>
<li>ユーザーが読みやすいように列名が変更されてから出力される。</li>
<li>たとえば、予測値の本当の列名は<code>estimate</code>だが、表示名は<code>Estimate</code>になっている。</li>
</ul></li>
<li>「本当の」列名が見たい場合は<code>print(オブジェクト名, style = "data.frame")</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">print</span>(fit3_pred2, <span class="at">style =</span> <span class="st">"data.frame"</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  rowid estimate std.error statistic p.value s.value conf.low conf.high Score_Mean First Order
1     1 90.81712 0.7933713  114.4699       0     Inf 89.26214  92.37210   91.19714     0     5
2     2 90.29596 0.6386978  141.3751       0     Inf 89.04414  91.54778   91.19714     1     5
  Duration
1        5
2        5</code></pre>
</div>
</div>
<ul>
<li>作図によく使うのは予測値（<code>estimate</code>）、信頼区間の下限（<code>conf.low</code>）と上限（<code>conf.high</code>）、動かしている変数名（ここでは<code>First</code>）</li>
</ul>
<p>作図の例</p>
<p>Pointrangeプロットを使用する。</p>
<p><code>geom_pointrange()</code>レイヤー</p>
<ul>
<li><code>x</code>：説明変数</li>
<li><code>y</code>：予測値</li>
<li><code>ymin</code>：信頼区間の下限</li>
<li><code>ymax</code>：信頼区間の上限</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>fit3_pred2_plot1 <span class="ot">&lt;-</span> fit3_pred2 <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> First, <span class="at">y =</span> estimate, </span>
<span id="cb24-4"><a href="#cb24-4"></a>                      <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"初出場ダミー"</span>, </span>
<span id="cb24-6"><a href="#cb24-6"></a>       <span class="at">y =</span> <span class="st">"予測点数と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a></span>
<span id="cb24-9"><a href="#cb24-9"></a>fit3_pred2_plot1</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="1050"></p>
</figure>
</div>
</div>
</div>
<p>無駄の目盛りの削除</p>
<ul>
<li>横軸（X軸）の無駄な目盛りを削除し、0と1のみ残す。</li>
</ul>
<p><code>scale_x_continuous()</code>で目盛り調整</p>
<ul>
<li><code>breaks</code>：目盛りの位置</li>
<li><code>labels</code>：目盛りのラベル</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>fit3_pred2_plot1 <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb25-3"><a href="#cb25-3"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0"</span>, <span class="st">"1"</span>))</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="1050"></p>
</figure>
</div>
</div>
</div>
<p>出場順番と平均得点間の関係（計算）</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>fit3_pred3 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(fit3, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Order =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>))</span>
<span id="cb26-2"><a href="#cb26-2"></a>fit3_pred3</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Order Estimate Std. Error   z Pr(&gt;|z|)   S 2.5 % 97.5 % First Duration
     1     89.8      0.607 148   &lt;0.001 Inf  88.6   91.0  0.52     10.8
     2     90.1      0.513 176   &lt;0.001 Inf  89.1   91.1  0.52     10.8
     3     90.4      0.430 210   &lt;0.001 Inf  89.6   91.3  0.52     10.8
     4     90.7      0.365 249   &lt;0.001 Inf  90.0   91.4  0.52     10.8
     5     91.0      0.327 278   &lt;0.001 Inf  90.4   91.7  0.52     10.8
     6     91.4      0.327 279   &lt;0.001 Inf  90.7   92.0  0.52     10.8
     7     91.7      0.365 251   &lt;0.001 Inf  91.0   92.4  0.52     10.8
     8     92.0      0.430 214   &lt;0.001 Inf  91.1   92.8  0.52     10.8
     9     92.3      0.513 180   &lt;0.001 Inf  91.3   93.3  0.52     10.8
    10     92.6      0.607 153   &lt;0.001 Inf  91.4   93.8  0.52     10.8

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, Score_Mean, First, Duration, Order 
Type:  response </code></pre>
</div>
</div>
<p>出場順番と平均得点間の関係（可視化）</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>fit3_pred3 <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Order, <span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">labels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"出場順番"</span>, <span class="at">y =</span> <span class="st">"平均得点の予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="1225"></p>
</figure>
</div>
</div>
</div>
<p>芸歴と平均得点間の関係（計算）</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>fit3_pred4 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(fit3, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Duration =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>))</span>
<span id="cb29-2"><a href="#cb29-2"></a>fit3_pred4</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Duration Estimate Std. Error   z Pr(&gt;|z|)   S 2.5 % 97.5 % Order First
        2     90.4      0.871 104   &lt;0.001 Inf  88.7   92.2   5.5  0.52
        3     90.5      0.786 115   &lt;0.001 Inf  89.0   92.1   5.5  0.52
        4     90.6      0.702 129   &lt;0.001 Inf  89.2   92.0   5.5  0.52
        5     90.7      0.622 146   &lt;0.001 Inf  89.5   91.9   5.5  0.52
        6     90.8      0.545 167   &lt;0.001 Inf  89.7   91.9   5.5  0.52
        7     90.9      0.473 192   &lt;0.001 Inf  89.9   91.8   5.5  0.52
        8     91.0      0.411 222   &lt;0.001 Inf  90.2   91.8   5.5  0.52
        9     91.0      0.361 252   &lt;0.001 Inf  90.3   91.8   5.5  0.52
       10     91.1      0.329 277   &lt;0.001 Inf  90.5   91.8   5.5  0.52
       11     91.2      0.323 283   &lt;0.001 Inf  90.6   91.9   5.5  0.52
       12     91.3      0.342 267   &lt;0.001 Inf  90.6   92.0   5.5  0.52
       13     91.4      0.383 239   &lt;0.001 Inf  90.6   92.1   5.5  0.52
       14     91.5      0.439 208   &lt;0.001 Inf  90.6   92.3   5.5  0.52
       15     91.6      0.507 181   &lt;0.001 Inf  90.6   92.6   5.5  0.52
       16     91.6      0.581 158   &lt;0.001 Inf  90.5   92.8   5.5  0.52

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, Score_Mean, Order, First, Duration 
Type:  response </code></pre>
</div>
</div>
<p>芸歴と平均得点間の関係（可視化）</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>fit3_pred4 <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> Duration, <span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>, <span class="at">labels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"コンビ結成からの経過年数"</span>, <span class="at">y =</span> <span class="st">"平均得点の予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="1225"></p>
</figure>
</div>
</div>
</div>
<p>折れ線グラフとリボン（<code>geom_ribbon()</code>）の組み合わせ</p>
<ul>
<li>横軸が細かいほどpoint-rangeプロットは気持ち悪くなる（ムカデのような見た目になる）。</li>
<li><code>geom_ribbon()</code>は<code>x</code>、<code>ymin</code>、<code>ymax</code>にマッピング
<ul>
<li><code>geom_pointrange()</code>と使い方は同じだが、予測値の情報を持たないため、<code>y</code>は不要</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>fit3_pred4 <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">x =</span> Duration, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>, <span class="at">labels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"コンビ結成からの経過年数"</span>, <span class="at">y =</span> <span class="st">"平均得点の予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="1200"></p>
</figure>
</div>
</div>
</div>
<p>折れ線グラフ + リボン</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="annotated-cell-26"><pre class="sourceCode numberSource r code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-26-1"><a href="#annotated-cell-26-1"></a>fit3_pred4 <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="1">1</button><span id="annotated-cell-26-2" class="code-annotation-target"><a href="#annotated-cell-26-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Duration)) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="2">2</button><span id="annotated-cell-26-3" class="code-annotation-target"><a href="#annotated-cell-26-3"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">fill =</span> <span class="st">"gray70"</span>) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="3">3</button><span id="annotated-cell-26-4" class="code-annotation-target"><a href="#annotated-cell-26-4"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="annotated-cell-26-5"><a href="#annotated-cell-26-5"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>, <span class="at">labels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>) <span class="sc">+</span></span>
<span id="annotated-cell-26-6"><a href="#annotated-cell-26-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"コンビ結成からの経過年数"</span>, <span class="at">y =</span> <span class="st">"平均得点の予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-26-7"><a href="#annotated-cell-26-7"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-26" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="2" data-code-annotation="1" data-code-cell="annotated-cell-26"><code>geom_ribbon()</code>と<code>geom_line()</code>は同じ横軸を共有するため、ここでマッピングした方が効率的</span>
</dd>
<dt data-target-cell="annotated-cell-26" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="3" data-code-annotation="2" data-code-cell="annotated-cell-26">デフォルトのリボンは暗い色なので、明るめの色に変える。</span>
</dd>
<dt data-target-cell="annotated-cell-26" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="4" data-code-annotation="3" data-code-cell="annotated-cell-26"><code>linewidth</code>で折れ線グラフの太さを調整（1だとデフォルトよりやや太め）</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="1200"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="信頼区間の話" class="level2">
<h2 class="anchored" data-anchor-id="信頼区間の話">信頼区間の話</h2>
<p>出場順番と平均得点間の関係</p>
<p>今回得られた回帰直線</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="1200"></p>
</figure>
</div>
</div>
</div>
<p>もう一度、過去に戻ってM-1をやったら…</p>
<p>こんな回帰直線が得られたとしてもおかしくはない（多分）</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="1200"></p>
</figure>
</div>
</div>
</div>
<p>こんな回帰直線が得られる可能性は非常に低い（多分）</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="1200"></p>
</figure>
</div>
</div>
</div>
<p>信頼区間の意味</p>
<p>この範囲（信頼区間）外の直線が得られる可能性は非常に低い！</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="1200"></p>
</figure>
</div>
</div>
</div>
<p>傾き係数が正（負）に統計的有意であれば、この区間内に引ける直線は必ず右上がり（右下がり）となる。</p>
<ul>
<li><span class="math inline">\(\alpha\)</span> = 0.05で統計的有意だった<code>Order</code>（<span class="math inline">\(p\)</span> = 0.016）は、95%信頼区間内に右上がりの直線しか引けない。</li>
<li>右は統計的に有意でない<code>Duration</code>変数の例（<span class="math inline">\(p\)</span> = 0.381）
<ul>
<li>水平線も、右上がり直線も、右下がり直線も引ける。</li>
<li><span class="math inline">\(\Rightarrow\)</span> <code>Duration</code>と<code>Score_Mean</code>の関係は現段階では判断できない。</li>
</ul></li>
<li><span class="math inline">\(\alpha\)</span> = 0.1を仮定するのであれば、90%（<span class="math inline">\(= (1 - \alpha) \times 100\)</span>）信頼区間を使うこととなる。</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>fit3_pred4 <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Duration)) <span class="sc">+</span> </span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">fill =</span> <span class="st">"gray70"</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">xend =</span> <span class="dv">16</span>, <span class="at">y =</span> <span class="dv">91</span>, <span class="at">yend =</span> <span class="dv">91</span>),</span>
<span id="cb33-5"><a href="#cb33-5"></a>               <span class="at">linewidth =</span> <span class="fl">1.5</span>, <span class="at">color =</span> <span class="st">"#00798C"</span>) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">xend =</span> <span class="dv">16</span>, <span class="at">y =</span> <span class="dv">90</span>, <span class="at">yend =</span> <span class="dv">92</span>),</span>
<span id="cb33-7"><a href="#cb33-7"></a>               <span class="at">linewidth =</span> <span class="fl">1.5</span>, <span class="at">color =</span> <span class="st">"#D1495B"</span>) <span class="sc">+</span></span>
<span id="cb33-8"><a href="#cb33-8"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">xend =</span> <span class="dv">16</span>, <span class="at">y =</span> <span class="dv">92</span>, <span class="at">yend =</span> <span class="dv">91</span>),</span>
<span id="cb33-9"><a href="#cb33-9"></a>               <span class="at">linewidth =</span> <span class="fl">1.5</span>, <span class="at">color =</span> <span class="st">"#66A182"</span>) <span class="sc">+</span></span>
<span id="cb33-10"><a href="#cb33-10"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate), <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>, <span class="at">labels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb33-12"><a href="#cb33-12"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"コンビ結成からの経過年数"</span>, <span class="at">y =</span> <span class="st">"平均得点の予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb33-13"><a href="#cb33-13"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">93</span>)) <span class="sc">+</span></span>
<span id="cb33-14"><a href="#cb33-14"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="900"></p>
</figure>
</div>
</div>
</div>
<p>有意水準と信頼区間</p>
<p>（ありえないが、）<span class="math inline">\(\alpha\)</span> = 0.6を採用する場合、40%信頼区間（<span class="math inline">\((1 - \alpha) \times 100\)</span>%信頼区間）を使うことになる。</p>
<ul>
<li>以下は40%信頼区間を採用した例（<code>predictions()</code>内に<code>conf_level = 0.4</code>を追加する）
<ul>
<li>ただし、よく使うのは90%（<span class="math inline">\(\alpha\)</span> = 0.1）、95%（<span class="math inline">\(\alpha\)</span> = 0.05）、99%（<span class="math inline">\(\alpha\)</span> = 0.01）信頼区間</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">predictions</span>(fit3, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Duration =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>),</span>
<span id="cb34-2"><a href="#cb34-2"></a>            <span class="at">conf_level =</span> <span class="fl">0.4</span>) <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Duration)) <span class="sc">+</span> </span>
<span id="cb34-4"><a href="#cb34-4"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">fill =</span> <span class="st">"gray70"</span>) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">xend =</span> <span class="dv">16</span>, <span class="at">y =</span> <span class="fl">91.09444</span>, <span class="at">yend =</span> <span class="fl">91.44930</span>),</span>
<span id="cb34-6"><a href="#cb34-6"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"#00798C"</span>) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">xend =</span> <span class="dv">16</span>, <span class="at">y =</span> <span class="fl">90.26250</span>, <span class="at">yend =</span> <span class="fl">92.02425</span>),</span>
<span id="cb34-8"><a href="#cb34-8"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"#D1495B"</span>) <span class="sc">+</span></span>
<span id="cb34-9"><a href="#cb34-9"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> estimate), <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb34-10"><a href="#cb34-10"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>, <span class="at">labels =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"コンビ結成からの経過年数"</span>, <span class="at">y =</span> <span class="st">"平均得点の予測値と95%信頼区間"</span>) <span class="sc">+</span></span>
<span id="cb34-12"><a href="#cb34-12"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">93</span>)) <span class="sc">+</span></span>
<span id="cb34-13"><a href="#cb34-13"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code><button title="コピーする" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="reporting_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="900"></p>
</figure>
</div>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>ロジスティック回帰分析、交互作用付きの回帰分析については今後解説する。<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>読み込んでいないパッケージの関数は<code>パッケージ名::関数名()</code>で使用可能だ。今回の場合以外にも、読み込んだ複数のパッケージに同じ名前の関数がある場合、「どのパッケージの関数か」を指定する際にも使用する。<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>他にも<code>"{stars}"</code>というのもよく使われるが、これは邪悪なものなので間違ってでも調べないようにしよう。<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>存在感のない{<a href="https://github.com/JaehyunSong/coefplotbl">coefplotbl</a>}という謎のパッケージもある。興味のある方でも間違ってでも調べないこと。<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/www\.jaysong\.net\/r4ps\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, <a href="https://www.jaysong.net" target="_blank">Jaehyun Song</a>. Powered by <a href="https://quarto.org/" target="_blank">Quarto</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.jaysong.net">
      <i class="bi bi-house-fill" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JaehyunSong">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>